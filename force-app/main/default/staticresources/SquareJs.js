(()=>{var e={4285:(e,t,r)=>{"use strict";function n(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}function i(){return"npm"}r.d(t,{S:()=>i,n:()=>n})},7392:(e,t,r)=>{"use strict";r.d(t,{KV:()=>i,l$:()=>o});var n=r(4285);function i(){return!(0,n.n)()&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function o(e,t){return e.require(t)}e=r.hmd(e)},7790:(e,t,r)=>{"use strict";r.d(t,{ph:()=>l,yW:()=>u});var n=r(7392),i=r(63);e=r.hmd(e);const o=(0,i.Rf)(),s={nowSeconds:()=>Date.now()/1e3},a=(0,n.KV)()?function(){try{return(0,n.l$)(e,"perf_hooks").performance}catch(e){return}}():function(){const{performance:e}=o;if(e&&e.now)return{now:()=>e.now(),timeOrigin:Date.now()-e.now()}}(),c=void 0===a?s:{nowSeconds:()=>(a.timeOrigin+a.now())/1e3},u=s.nowSeconds.bind(s),l=c.nowSeconds.bind(c);let d;(()=>{const{performance:e}=o;if(!e||!e.now)return void(d="none");const t=36e5,r=e.now(),n=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+r-n):t,s=i<t,a=e.timing&&e.timing.navigationStart,c="number"==typeof a?Math.abs(a+r-n):t;s||c<t?i<=c?(d="timeOrigin",e.timeOrigin):d="navigationStart":d="dateNow"})()},63:(e,t,r)=>{"use strict";function n(e){return e&&e.Math==Math?e:void 0}r.d(t,{Rf:()=>o,YO:()=>s,n2:()=>i});const i="object"==typeof globalThis&&n(globalThis)||"object"==typeof window&&n(window)||"object"==typeof self&&n(self)||"object"==typeof r.g&&n(r.g)||function(){return this}()||{};function o(){return i}function s(e,t,r){const n=r||i,o=n.__SENTRY__=n.__SENTRY__||{};return o[e]||(o[e]=t())}},7111:(e,t,r)=>{var n=r(6733),i=r(9821),o=TypeError;e.exports=function(e){if(n(e))return e;throw o(i(e)+" is not a function")}},7988:(e,t,r)=>{var n=r(2359),i=r(9821),o=TypeError;e.exports=function(e){if(n(e))return e;throw o(i(e)+" is not a constructor")}},8505:(e,t,r)=>{var n=r(6733),i=String,o=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw o("Can't set "+i(e)+" as a prototype")}},9736:(e,t,r)=>{var n=r(95),i=r(2391),o=r(1787).f,s=n("unscopables"),a=Array.prototype;null==a[s]&&o(a,s,{configurable:!0,value:i(null)}),e.exports=function(e){a[s][e]=!0}},6637:(e,t,r)=>{"use strict";var n=r(966).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},7728:(e,t,r)=>{var n=r(1321),i=TypeError;e.exports=function(e,t){if(n(t,e))return e;throw i("Incorrect invocation")}},1176:(e,t,r)=>{var n=r(5052),i=String,o=TypeError;e.exports=function(e){if(n(e))return e;throw o(i(e)+" is not an object")}},2460:(e,t,r)=>{var n=r(4229);e.exports=n((function(){if("function"==typeof ArrayBuffer){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}}))},6570:(e,t,r)=>{"use strict";var n=r(9996).forEach,i=r(6038)("forEach");e.exports=i?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},9540:(e,t,r)=>{var n=r(905),i=r(3231),o=r(9646),s=function(e){return function(t,r,s){var a,c=n(t),u=o(c),l=i(s,u);if(e&&r!=r){for(;u>l;)if((a=c[l++])!=a)return!0}else for(;u>l;l++)if((e||l in c)&&c[l]===r)return e||l||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},9996:(e,t,r)=>{var n=r(7636),i=r(5968),o=r(9337),s=r(2991),a=r(9646),c=r(7501),u=i([].push),l=function(e){var t=1==e,r=2==e,i=3==e,l=4==e,d=6==e,h=7==e,p=5==e||d;return function(f,g,m,v){for(var y,E,_=s(f),S=o(_),A=n(g,m),C=a(S),I=0,O=v||c,T=t?O(f,C):r||h?O(f,0):void 0;C>I;I++)if((p||I in S)&&(E=A(y=S[I],I,_),e))if(t)T[I]=E;else if(E)switch(e){case 3:return!0;case 5:return y;case 6:return I;case 2:u(T,y)}else switch(e){case 4:return!1;case 7:u(T,y)}return d?-1:i||l?l:T}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},6038:(e,t,r)=>{"use strict";var n=r(4229);e.exports=function(e,t){var r=[][e];return!!r&&n((function(){r.call(null,t||function(){return 1},1)}))}},3143:(e,t,r)=>{var n=r(7111),i=r(2991),o=r(9337),s=r(9646),a=TypeError,c=function(e){return function(t,r,c,u){n(r);var l=i(t),d=o(l),h=s(l),p=e?h-1:0,f=e?-1:1;if(c<2)for(;;){if(p in d){u=d[p],p+=f;break}if(p+=f,e?p<0:h<=p)throw a("Reduce of empty array with no initial value")}for(;e?p>=0:h>p;p+=f)p in d&&(u=r(u,d[p],p,l));return u}};e.exports={left:c(!1),right:c(!0)}},9794:(e,t,r)=>{var n=r(3231),i=r(9646),o=r(2324),s=Array,a=Math.max;e.exports=function(e,t,r){for(var c=i(e),u=n(t,c),l=n(void 0===r?c:r,c),d=s(a(l-u,0)),h=0;u<l;u++,h++)o(d,h,e[u]);return d.length=h,d}},8760:(e,t,r)=>{var n=r(3718),i=r(2359),o=r(5052),s=r(95)("species"),a=Array;e.exports=function(e){var t;return n(e)&&(t=e.constructor,(i(t)&&(t===a||n(t.prototype))||o(t)&&null===(t=t[s]))&&(t=void 0)),void 0===t?a:t}},7501:(e,t,r)=>{var n=r(8760);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},4575:(e,t,r)=>{var n=r(95)("iterator"),i=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){i=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},e(o)}catch(e){}return r}},7079:(e,t,r)=>{var n=r(5968),i=n({}.toString),o=n("".slice);e.exports=function(e){return o(i(e),8,-1)}},1589:(e,t,r)=>{var n=r(1601),i=r(6733),o=r(7079),s=r(95)("toStringTag"),a=Object,c="Arguments"==o(function(){return arguments}());e.exports=n?o:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?r:c?o(t):"Object"==(n=o(t))&&i(t.callee)?"Arguments":n}},3370:(e,t,r)=>{"use strict";var n=r(5968),i=r(8312),o=r(5926).getWeakData,s=r(7728),a=r(1176),c=r(9650),u=r(5052),l=r(9003),d=r(9996),h=r(8270),p=r(6407),f=p.set,g=p.getterFor,m=d.find,v=d.findIndex,y=n([].splice),E=0,_=function(e){return e.frozen||(e.frozen=new S)},S=function(){this.entries=[]},A=function(e,t){return m(e.entries,(function(e){return e[0]===t}))};S.prototype={get:function(e){var t=A(this,e);if(t)return t[1]},has:function(e){return!!A(this,e)},set:function(e,t){var r=A(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=v(this.entries,(function(t){return t[0]===e}));return~t&&y(this.entries,t,1),!!~t}},e.exports={getConstructor:function(e,t,r,n){var d=e((function(e,i){s(e,p),f(e,{type:t,id:E++,frozen:void 0}),c(i)||l(i,e[n],{that:e,AS_ENTRIES:r})})),p=d.prototype,m=g(t),v=function(e,t,r){var n=m(e),i=o(a(t),!0);return!0===i?_(n).set(t,r):i[n.id]=r,e};return i(p,{delete:function(e){var t=m(this);if(!u(e))return!1;var r=o(e);return!0===r?_(t).delete(e):r&&h(r,t.id)&&delete r[t.id]},has:function(e){var t=m(this);if(!u(e))return!1;var r=o(e);return!0===r?_(t).has(e):r&&h(r,t.id)}}),i(p,r?{get:function(e){var t=m(this);if(u(e)){var r=o(e);return!0===r?_(t).get(e):r?r[t.id]:void 0}},set:function(e,t){return v(this,e,t)}}:{add:function(e){return v(this,e,!0)}}),d}}},9789:(e,t,r)=>{"use strict";var n=r(3103),i=r(9859),o=r(5968),s=r(6541),a=r(4768),c=r(5926),u=r(9003),l=r(7728),d=r(6733),h=r(9650),p=r(5052),f=r(4229),g=r(4575),m=r(4555),v=r(835);e.exports=function(e,t,r){var y=-1!==e.indexOf("Map"),E=-1!==e.indexOf("Weak"),_=y?"set":"add",S=i[e],A=S&&S.prototype,C=S,I={},O=function(e){var t=o(A[e]);a(A,e,"add"==e?function(e){return t(this,0===e?0:e),this}:"delete"==e?function(e){return!(E&&!p(e))&&t(this,0===e?0:e)}:"get"==e?function(e){return E&&!p(e)?void 0:t(this,0===e?0:e)}:"has"==e?function(e){return!(E&&!p(e))&&t(this,0===e?0:e)}:function(e,r){return t(this,0===e?0:e,r),this})};if(s(e,!d(S)||!(E||A.forEach&&!f((function(){(new S).entries().next()})))))C=r.getConstructor(t,e,y,_),c.enable();else if(s(e,!0)){var T=new C,b=T[_](E?{}:-0,1)!=T,w=f((function(){T.has(1)})),P=g((function(e){new S(e)})),R=!E&&f((function(){for(var e=new S,t=5;t--;)e[_](t,t);return!e.has(-0)}));P||((C=t((function(e,t){l(e,A);var r=v(new S,e,C);return h(t)||u(t,r[_],{that:r,AS_ENTRIES:y}),r}))).prototype=A,A.constructor=C),(w||R)&&(O("delete"),O("has"),y&&O("get")),(R||b)&&O(_),E&&A.clear&&delete A.clear}return I[e]=C,n({global:!0,constructor:!0,forced:C!=S},I),m(C,e),E||r.setStrong(C,e,y),C}},7081:(e,t,r)=>{var n=r(8270),i=r(4826),o=r(7933),s=r(1787);e.exports=function(e,t,r){for(var a=i(t),c=s.f,u=o.f,l=0;l<a.length;l++){var d=a[l];n(e,d)||r&&n(r,d)||c(e,d,u(t,d))}}},8127:(e,t,r)=>{var n=r(95)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},7528:(e,t,r)=>{var n=r(4229);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},3684:e=>{e.exports=function(e,t){return{value:e,done:t}}},5762:(e,t,r)=>{var n=r(7400),i=r(1787),o=r(5358);e.exports=n?function(e,t,r){return i.f(e,t,o(1,r))}:function(e,t,r){return e[t]=r,e}},5358:e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},2324:(e,t,r)=>{"use strict";var n=r(9310),i=r(1787),o=r(5358);e.exports=function(e,t,r){var s=n(t);s in e?i.f(e,s,o(0,r)):e[s]=r}},6616:(e,t,r)=>{var n=r(6039),i=r(1787);e.exports=function(e,t,r){return r.get&&n(r.get,t,{getter:!0}),r.set&&n(r.set,t,{setter:!0}),i.f(e,t,r)}},4768:(e,t,r)=>{var n=r(6733),i=r(1787),o=r(6039),s=r(8400);e.exports=function(e,t,r,a){a||(a={});var c=a.enumerable,u=void 0!==a.name?a.name:t;if(n(r)&&o(r,u,a),a.global)c?e[t]=r:s(t,r);else{try{a.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=r:i.f(e,t,{value:r,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},8312:(e,t,r)=>{var n=r(4768);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},8400:(e,t,r)=>{var n=r(9859),i=Object.defineProperty;e.exports=function(e,t){try{i(n,e,{value:t,configurable:!0,writable:!0})}catch(r){n[e]=t}return t}},7400:(e,t,r)=>{var n=r(4229);e.exports=!n((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},3777:e=>{var t="object"==typeof document&&document.all,r=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:r}},2635:(e,t,r)=>{var n=r(9859),i=r(5052),o=n.document,s=i(o)&&i(o.createElement);e.exports=function(e){return s?o.createElement(e):{}}},5694:e=>{e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8865:(e,t,r)=>{var n=r(2635)("span").classList,i=n&&n.constructor&&n.constructor.prototype;e.exports=i===Object.prototype?void 0:i},8801:(e,t,r)=>{var n=r(7079);e.exports="undefined"!=typeof process&&"process"==n(process)},598:e=>{e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},6358:(e,t,r)=>{var n,i,o=r(9859),s=r(598),a=o.process,c=o.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(i=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!i&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(i=+n[1]),e.exports=i},3837:e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3103:(e,t,r)=>{var n=r(9859),i=r(7933).f,o=r(5762),s=r(4768),a=r(8400),c=r(7081),u=r(6541);e.exports=function(e,t){var r,l,d,h,p,f=e.target,g=e.global,m=e.stat;if(r=g?n:m?n[f]||a(f,{}):(n[f]||{}).prototype)for(l in t){if(h=t[l],d=e.dontCallGetSet?(p=i(r,l))&&p.value:r[l],!u(g?l:f+(m?".":"#")+l,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;c(h,d)}(e.sham||d&&d.sham)&&o(h,"sham",!0),s(r,l,h,e)}}},4229:e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},4954:(e,t,r)=>{"use strict";r(7950);var n=r(4745),i=r(4768),o=r(3466),s=r(4229),a=r(95),c=r(5762),u=a("species"),l=RegExp.prototype;e.exports=function(e,t,r,d){var h=a(e),p=!s((function(){var t={};return t[h]=function(){return 7},7!=""[e](t)})),f=p&&!s((function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[u]=function(){return r},r.flags="",r[h]=/./[h]),r.exec=function(){return t=!0,null},r[h](""),!t}));if(!p||!f||r){var g=n(/./[h]),m=t(h,""[e],(function(e,t,r,i,s){var a=n(e),c=t.exec;return c===o||c===l.exec?p&&!s?{done:!0,value:g(t,r,i)}:{done:!0,value:a(r,t,i)}:{done:!1}}));i(String.prototype,e,m[0]),i(l,h,m[1])}d&&c(l[h],"sham",!0)}},8476:(e,t,r)=>{var n=r(4229);e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},3171:(e,t,r)=>{var n=r(7188),i=Function.prototype,o=i.apply,s=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(n?s.bind(o):function(){return s.apply(o,arguments)})},7636:(e,t,r)=>{var n=r(4745),i=r(7111),o=r(7188),s=n(n.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?s(e,t):function(){return e.apply(t,arguments)}}},7188:(e,t,r)=>{var n=r(4229);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},266:(e,t,r)=>{var n=r(7188),i=Function.prototype.call;e.exports=n?i.bind(i):function(){return i.apply(i,arguments)}},1805:(e,t,r)=>{var n=r(7400),i=r(8270),o=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=i(o,"name"),c=a&&"something"===function(){}.name,u=a&&(!n||n&&s(o,"name").configurable);e.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},3411:(e,t,r)=>{var n=r(5968),i=r(7111);e.exports=function(e,t,r){try{return n(i(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(e){}}},4745:(e,t,r)=>{var n=r(7079),i=r(5968);e.exports=function(e){if("Function"===n(e))return i(e)}},5968:(e,t,r)=>{var n=r(7188),i=Function.prototype,o=i.call,s=n&&i.bind.bind(o,o);e.exports=n?s:function(e){return function(){return o.apply(e,arguments)}}},1333:(e,t,r)=>{var n=r(9859),i=r(6733);e.exports=function(e,t){return arguments.length<2?(r=n[e],i(r)?r:void 0):n[e]&&n[e][t];var r}},8830:(e,t,r)=>{var n=r(1589),i=r(5300),o=r(9650),s=r(5495),a=r(95)("iterator");e.exports=function(e){if(!o(e))return i(e,a)||i(e,"@@iterator")||s[n(e)]}},8403:(e,t,r)=>{var n=r(266),i=r(7111),o=r(1176),s=r(9821),a=r(8830),c=TypeError;e.exports=function(e,t){var r=arguments.length<2?a(e):t;if(i(r))return o(n(r,e));throw c(s(e)+" is not iterable")}},5300:(e,t,r)=>{var n=r(7111),i=r(9650);e.exports=function(e,t){var r=e[t];return i(r)?void 0:n(r)}},17:(e,t,r)=>{var n=r(5968),i=r(2991),o=Math.floor,s=n("".charAt),a=n("".replace),c=n("".slice),u=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,l=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,n,d,h){var p=r+e.length,f=n.length,g=l;return void 0!==d&&(d=i(d),g=u),a(h,g,(function(i,a){var u;switch(s(a,0)){case"$":return"$";case"&":return e;case"`":return c(t,0,r);case"'":return c(t,p);case"<":u=d[c(a,1,-1)];break;default:var l=+a;if(0===l)return i;if(l>f){var h=o(l/10);return 0===h?i:h<=f?void 0===n[h-1]?s(a,1):n[h-1]+s(a,1):i}u=n[l-1]}return void 0===u?"":u}))}},9859:function(e,t,r){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof r.g&&r.g)||function(){return this}()||this||Function("return this")()},8270:(e,t,r)=>{var n=r(5968),i=r(2991),o=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},5977:e=>{e.exports={}},8385:(e,t,r)=>{var n=r(1333);e.exports=n("document","documentElement")},4394:(e,t,r)=>{var n=r(7400),i=r(4229),o=r(2635);e.exports=!n&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},9337:(e,t,r)=>{var n=r(5968),i=r(4229),o=r(7079),s=Object,a=n("".split);e.exports=i((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==o(e)?a(e,""):s(e)}:s},835:(e,t,r)=>{var n=r(6733),i=r(5052),o=r(6540);e.exports=function(e,t,r){var s,a;return o&&n(s=t.constructor)&&s!==r&&i(a=s.prototype)&&a!==r.prototype&&o(e,a),e}},8511:(e,t,r)=>{var n=r(5968),i=r(6733),o=r(5353),s=n(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return s(e)}),e.exports=o.inspectSource},5926:(e,t,r)=>{var n=r(3103),i=r(5968),o=r(5977),s=r(5052),a=r(8270),c=r(1787).f,u=r(8151),l=r(166),d=r(5343),h=r(1441),p=r(8476),f=!1,g=h("meta"),m=0,v=function(e){c(e,g,{value:{objectID:"O"+m++,weakData:{}}})},y=e.exports={enable:function(){y.enable=function(){},f=!0;var e=u.f,t=i([].splice),r={};r[g]=1,e(r).length&&(u.f=function(r){for(var n=e(r),i=0,o=n.length;i<o;i++)if(n[i]===g){t(n,i,1);break}return n},n({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:l.f}))},fastKey:function(e,t){if(!s(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,g)){if(!d(e))return"F";if(!t)return"E";v(e)}return e[g].objectID},getWeakData:function(e,t){if(!a(e,g)){if(!d(e))return!0;if(!t)return!1;v(e)}return e[g].weakData},onFreeze:function(e){return p&&f&&d(e)&&!a(e,g)&&v(e),e}};o[g]=!0},6407:(e,t,r)=>{var n,i,o,s=r(1180),a=r(9859),c=r(5052),u=r(5762),l=r(8270),d=r(5353),h=r(4399),p=r(5977),f="Object already initialized",g=a.TypeError,m=a.WeakMap;if(s||d.state){var v=d.state||(d.state=new m);v.get=v.get,v.has=v.has,v.set=v.set,n=function(e,t){if(v.has(e))throw g(f);return t.facade=e,v.set(e,t),t},i=function(e){return v.get(e)||{}},o=function(e){return v.has(e)}}else{var y=h("state");p[y]=!0,n=function(e,t){if(l(e,y))throw g(f);return t.facade=e,u(e,y,t),t},i=function(e){return l(e,y)?e[y]:{}},o=function(e){return l(e,y)}}e.exports={set:n,get:i,has:o,enforce:function(e){return o(e)?i(e):n(e,{})},getterFor:function(e){return function(t){var r;if(!c(t)||(r=i(t)).type!==e)throw g("Incompatible receiver, "+e+" required");return r}}}},1943:(e,t,r)=>{var n=r(95),i=r(5495),o=n("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||s[o]===e)}},3718:(e,t,r)=>{var n=r(7079);e.exports=Array.isArray||function(e){return"Array"==n(e)}},6733:(e,t,r)=>{var n=r(3777),i=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},2359:(e,t,r)=>{var n=r(5968),i=r(4229),o=r(6733),s=r(1589),a=r(1333),c=r(8511),u=function(){},l=[],d=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=n(h.exec),f=!h.exec(u),g=function(e){if(!o(e))return!1;try{return d(u,l,e),!0}catch(e){return!1}},m=function(e){if(!o(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(h,c(e))}catch(e){return!0}};m.sham=!0,e.exports=!d||i((function(){var e;return g(g.call)||!g(Object)||!g((function(){e=!0}))||e}))?m:g},6541:(e,t,r)=>{var n=r(4229),i=r(6733),o=/#|\.prototype\./,s=function(e,t){var r=c[a(e)];return r==l||r!=u&&(i(t)?n(t):!!t)},a=s.normalize=function(e){return String(e).replace(o,".").toLowerCase()},c=s.data={},u=s.NATIVE="N",l=s.POLYFILL="P";e.exports=s},9650:e=>{e.exports=function(e){return null==e}},5052:(e,t,r)=>{var n=r(6733),i=r(3777),o=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===o}:function(e){return"object"==typeof e?null!==e:n(e)}},4231:e=>{e.exports=!1},8311:(e,t,r)=>{var n=r(5052),i=r(7079),o=r(95)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},9395:(e,t,r)=>{var n=r(1333),i=r(6733),o=r(1321),s=r(6969),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return i(t)&&o(t.prototype,a(e))}},9003:(e,t,r)=>{var n=r(7636),i=r(266),o=r(1176),s=r(9821),a=r(1943),c=r(9646),u=r(1321),l=r(8403),d=r(8830),h=r(7281),p=TypeError,f=function(e,t){this.stopped=e,this.result=t},g=f.prototype;e.exports=function(e,t,r){var m,v,y,E,_,S,A,C=r&&r.that,I=!(!r||!r.AS_ENTRIES),O=!(!r||!r.IS_RECORD),T=!(!r||!r.IS_ITERATOR),b=!(!r||!r.INTERRUPTED),w=n(t,C),P=function(e){return m&&h(m,"normal",e),new f(!0,e)},R=function(e){return I?(o(e),b?w(e[0],e[1],P):w(e[0],e[1])):b?w(e,P):w(e)};if(O)m=e.iterator;else if(T)m=e;else{if(!(v=d(e)))throw p(s(e)+" is not iterable");if(a(v)){for(y=0,E=c(e);E>y;y++)if((_=R(e[y]))&&u(g,_))return _;return new f(!1)}m=l(e,v)}for(S=O?e.next:m.next;!(A=i(S,m)).done;){try{_=R(A.value)}catch(e){h(m,"throw",e)}if("object"==typeof _&&_&&u(g,_))return _}return new f(!1)}},7281:(e,t,r)=>{var n=r(266),i=r(1176),o=r(5300);e.exports=function(e,t,r){var s,a;i(e);try{if(!(s=o(e,"return"))){if("throw"===t)throw r;return r}s=n(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw r;if(a)throw s;return i(s),r}},2247:(e,t,r)=>{"use strict";var n=r(693).IteratorPrototype,i=r(2391),o=r(5358),s=r(4555),a=r(5495),c=function(){return this};e.exports=function(e,t,r,u){var l=t+" Iterator";return e.prototype=i(n,{next:o(+!u,r)}),s(e,l,!1,!0),a[l]=c,e}},2707:(e,t,r)=>{"use strict";var n=r(3103),i=r(266),o=r(4231),s=r(1805),a=r(6733),c=r(2247),u=r(7567),l=r(6540),d=r(4555),h=r(5762),p=r(4768),f=r(95),g=r(5495),m=r(693),v=s.PROPER,y=s.CONFIGURABLE,E=m.IteratorPrototype,_=m.BUGGY_SAFARI_ITERATORS,S=f("iterator"),A="keys",C="values",I="entries",O=function(){return this};e.exports=function(e,t,r,s,f,m,T){c(r,t,s);var b,w,P,R=function(e){if(e===f&&k)return k;if(!_&&e in L)return L[e];switch(e){case A:case C:case I:return function(){return new r(this,e)}}return function(){return new r(this)}},N=t+" Iterator",D=!1,L=e.prototype,x=L[S]||L["@@iterator"]||f&&L[f],k=!_&&x||R(f),M="Array"==t&&L.entries||x;if(M&&(b=u(M.call(new e)))!==Object.prototype&&b.next&&(o||u(b)===E||(l?l(b,E):a(b[S])||p(b,S,O)),d(b,N,!0,!0),o&&(g[N]=O)),v&&f==C&&x&&x.name!==C&&(!o&&y?h(L,"name",C):(D=!0,k=function(){return i(x,this)})),f)if(w={values:R(C),keys:m?k:R(A),entries:R(I)},T)for(P in w)(_||D||!(P in L))&&p(L,P,w[P]);else n({target:t,proto:!0,forced:_||D},w);return o&&!T||L[S]===k||p(L,S,k,{name:f}),g[t]=k,w}},693:(e,t,r)=>{"use strict";var n,i,o,s=r(4229),a=r(6733),c=r(5052),u=r(2391),l=r(7567),d=r(4768),h=r(95),p=r(4231),f=h("iterator"),g=!1;[].keys&&("next"in(o=[].keys())?(i=l(l(o)))!==Object.prototype&&(n=i):g=!0),!c(n)||s((function(){var e={};return n[f].call(e)!==e}))?n={}:p&&(n=u(n)),a(n[f])||d(n,f,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:g}},5495:e=>{e.exports={}},9646:(e,t,r)=>{var n=r(4237);e.exports=function(e){return n(e.length)}},6039:(e,t,r)=>{var n=r(5968),i=r(4229),o=r(6733),s=r(8270),a=r(7400),c=r(1805).CONFIGURABLE,u=r(8511),l=r(6407),d=l.enforce,h=l.get,p=String,f=Object.defineProperty,g=n("".slice),m=n("".replace),v=n([].join),y=a&&!i((function(){return 8!==f((function(){}),"length",{value:8}).length})),E=String(String).split("String"),_=e.exports=function(e,t,r){"Symbol("===g(p(t),0,7)&&(t="["+m(p(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!s(e,"name")||c&&e.name!==t)&&(a?f(e,"name",{value:t,configurable:!0}):e.name=t),y&&r&&s(r,"arity")&&e.length!==r.arity&&f(e,"length",{value:r.arity});try{r&&s(r,"constructor")&&r.constructor?a&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=d(e);return s(n,"source")||(n.source=v(E,"string"==typeof t?t:"")),e};Function.prototype.toString=_((function(){return o(this)&&h(this).source||u(this)}),"toString")},917:e=>{var t=Math.ceil,r=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?r:t)(n)}},7272:(e,t,r)=>{var n=r(8311),i=TypeError;e.exports=function(e){if(n(e))throw i("The method doesn't accept regular expressions");return e}},5496:(e,t,r)=>{var n=r(9859),i=r(4229),o=r(5968),s=r(3326),a=r(1017).trim,c=r(1647),u=o("".charAt),l=n.parseFloat,d=n.Symbol,h=d&&d.iterator,p=1/l(c+"-0")!=-1/0||h&&!i((function(){l(Object(h))}));e.exports=p?function(e){var t=a(s(e)),r=l(t);return 0===r&&"-"==u(t,0)?-0:r}:l},47:(e,t,r)=>{"use strict";var n=r(7400),i=r(5968),o=r(266),s=r(4229),a=r(5632),c=r(894),u=r(9195),l=r(2991),d=r(9337),h=Object.assign,p=Object.defineProperty,f=i([].concat);e.exports=!h||s((function(){if(n&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},r=Symbol(),i="abcdefghijklmnopqrst";return e[r]=7,i.split("").forEach((function(e){t[e]=e})),7!=h({},e)[r]||a(h({},t)).join("")!=i}))?function(e,t){for(var r=l(e),i=arguments.length,s=1,h=c.f,p=u.f;i>s;)for(var g,m=d(arguments[s++]),v=h?f(a(m),h(m)):a(m),y=v.length,E=0;y>E;)g=v[E++],n&&!o(p,m,g)||(r[g]=m[g]);return r}:h},2391:(e,t,r)=>{var n,i=r(1176),o=r(219),s=r(3837),a=r(5977),c=r(8385),u=r(2635),l=r(4399),d="prototype",h="script",p=l("IE_PROTO"),f=function(){},g=function(e){return"<"+h+">"+e+"</"+h+">"},m=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},v=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,r;v="undefined"!=typeof document?document.domain&&n?m(n):(t=u("iframe"),r="java"+h+":",t.style.display="none",c.appendChild(t),t.src=String(r),(e=t.contentWindow.document).open(),e.write(g("document.F=Object")),e.close(),e.F):m(n);for(var i=s.length;i--;)delete v[d][s[i]];return v()};a[p]=!0,e.exports=Object.create||function(e,t){var r;return null!==e?(f[d]=i(e),r=new f,f[d]=null,r[p]=e):r=v(),void 0===t?r:o.f(r,t)}},219:(e,t,r)=>{var n=r(7400),i=r(7137),o=r(1787),s=r(1176),a=r(905),c=r(5632);t.f=n&&!i?Object.defineProperties:function(e,t){s(e);for(var r,n=a(t),i=c(t),u=i.length,l=0;u>l;)o.f(e,r=i[l++],n[r]);return e}},1787:(e,t,r)=>{var n=r(7400),i=r(4394),o=r(7137),s=r(1176),a=r(9310),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,d="enumerable",h="configurable",p="writable";t.f=n?o?function(e,t,r){if(s(e),t=a(t),s(r),"function"==typeof e&&"prototype"===t&&"value"in r&&p in r&&!r[p]){var n=l(e,t);n&&n[p]&&(e[t]=r.value,r={configurable:h in r?r[h]:n[h],enumerable:d in r?r[d]:n[d],writable:!1})}return u(e,t,r)}:u:function(e,t,r){if(s(e),t=a(t),s(r),i)try{return u(e,t,r)}catch(e){}if("get"in r||"set"in r)throw c("Accessors not supported");return"value"in r&&(e[t]=r.value),e}},7933:(e,t,r)=>{var n=r(7400),i=r(266),o=r(9195),s=r(5358),a=r(905),c=r(9310),u=r(8270),l=r(4394),d=Object.getOwnPropertyDescriptor;t.f=n?d:function(e,t){if(e=a(e),t=c(t),l)try{return d(e,t)}catch(e){}if(u(e,t))return s(!i(o.f,e,t),e[t])}},166:(e,t,r)=>{var n=r(7079),i=r(905),o=r(8151).f,s=r(9794),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"Window"==n(e)?function(e){try{return o(e)}catch(e){return s(a)}}(e):o(i(e))}},8151:(e,t,r)=>{var n=r(140),i=r(3837).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},894:(e,t)=>{t.f=Object.getOwnPropertySymbols},7567:(e,t,r)=>{var n=r(8270),i=r(6733),o=r(2991),s=r(4399),a=r(7528),c=s("IE_PROTO"),u=Object,l=u.prototype;e.exports=a?u.getPrototypeOf:function(e){var t=o(e);if(n(t,c))return t[c];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof u?l:null}},5343:(e,t,r)=>{var n=r(4229),i=r(5052),o=r(7079),s=r(2460),a=Object.isExtensible,c=n((function(){a(1)}));e.exports=c||s?function(e){return!!i(e)&&(!s||"ArrayBuffer"!=o(e))&&(!a||a(e))}:a},1321:(e,t,r)=>{var n=r(5968);e.exports=n({}.isPrototypeOf)},140:(e,t,r)=>{var n=r(5968),i=r(8270),o=r(905),s=r(9540).indexOf,a=r(5977),c=n([].push);e.exports=function(e,t){var r,n=o(e),u=0,l=[];for(r in n)!i(a,r)&&i(n,r)&&c(l,r);for(;t.length>u;)i(n,r=t[u++])&&(~s(l,r)||c(l,r));return l}},5632:(e,t,r)=>{var n=r(140),i=r(3837);e.exports=Object.keys||function(e){return n(e,i)}},9195:(e,t)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,i=n&&!r.call({1:2},1);t.f=i?function(e){var t=n(this,e);return!!t&&t.enumerable}:r},6540:(e,t,r)=>{var n=r(3411),i=r(1176),o=r(8505);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,r={};try{(e=n(Object.prototype,"__proto__","set"))(r,[]),t=r instanceof Array}catch(e){}return function(r,n){return i(r),o(n),t?e(r,n):r.__proto__=n,r}}():void 0)},7664:(e,t,r)=>{var n=r(7400),i=r(4229),o=r(5968),s=r(7567),a=r(5632),c=r(905),u=o(r(9195).f),l=o([].push),d=n&&i((function(){var e=Object.create(null);return e[2]=2,!u(e,2)})),h=function(e){return function(t){for(var r,i=c(t),o=a(i),h=d&&null===s(i),p=o.length,f=0,g=[];p>f;)r=o[f++],n&&!(h?r in i:u(i,r))||l(g,e?[r,i[r]]:i[r]);return g}};e.exports={entries:h(!0),values:h(!1)}},2914:(e,t,r)=>{var n=r(266),i=r(6733),o=r(5052),s=TypeError;e.exports=function(e,t){var r,a;if("string"===t&&i(r=e.toString)&&!o(a=n(r,e)))return a;if(i(r=e.valueOf)&&!o(a=n(r,e)))return a;if("string"!==t&&i(r=e.toString)&&!o(a=n(r,e)))return a;throw s("Can't convert object to primitive value")}},4826:(e,t,r)=>{var n=r(1333),i=r(5968),o=r(8151),s=r(894),a=r(1176),c=i([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=o.f(a(e)),r=s.f;return r?c(t,r(e)):t}},6060:(e,t,r)=>{var n=r(1787).f;e.exports=function(e,t,r){r in e||n(e,r,{configurable:!0,get:function(){return t[r]},set:function(e){t[r]=e}})}},8115:(e,t,r)=>{var n=r(266),i=r(1176),o=r(6733),s=r(7079),a=r(3466),c=TypeError;e.exports=function(e,t){var r=e.exec;if(o(r)){var u=n(r,e,t);return null!==u&&i(u),u}if("RegExp"===s(e))return n(a,e,t);throw c("RegExp#exec called on incompatible receiver")}},3466:(e,t,r)=>{"use strict";var n,i,o=r(266),s=r(5968),a=r(3326),c=r(895),u=r(5650),l=r(3036),d=r(2391),h=r(6407).get,p=r(2926),f=r(461),g=l("native-string-replace",String.prototype.replace),m=RegExp.prototype.exec,v=m,y=s("".charAt),E=s("".indexOf),_=s("".replace),S=s("".slice),A=(i=/b*/g,o(m,n=/a/,"a"),o(m,i,"a"),0!==n.lastIndex||0!==i.lastIndex),C=u.BROKEN_CARET,I=void 0!==/()??/.exec("")[1];(A||I||C||p||f)&&(v=function(e){var t,r,n,i,s,u,l,p=this,f=h(p),O=a(e),T=f.raw;if(T)return T.lastIndex=p.lastIndex,t=o(v,T,O),p.lastIndex=T.lastIndex,t;var b=f.groups,w=C&&p.sticky,P=o(c,p),R=p.source,N=0,D=O;if(w&&(P=_(P,"y",""),-1===E(P,"g")&&(P+="g"),D=S(O,p.lastIndex),p.lastIndex>0&&(!p.multiline||p.multiline&&"\n"!==y(O,p.lastIndex-1))&&(R="(?: "+R+")",D=" "+D,N++),r=new RegExp("^(?:"+R+")",P)),I&&(r=new RegExp("^"+R+"$(?!\\s)",P)),A&&(n=p.lastIndex),i=o(m,w?r:p,D),w?i?(i.input=S(i.input,N),i[0]=S(i[0],N),i.index=p.lastIndex,p.lastIndex+=i[0].length):p.lastIndex=0:A&&i&&(p.lastIndex=p.global?i.index+i[0].length:n),I&&i&&i.length>1&&o(g,i[0],r,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(i[s]=void 0)})),i&&b)for(i.groups=u=d(null),s=0;s<b.length;s++)u[(l=b[s])[0]]=i[l[1]];return i}),e.exports=v},895:(e,t,r)=>{"use strict";var n=r(1176);e.exports=function(){var e=n(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},3349:(e,t,r)=>{var n=r(266),i=r(8270),o=r(1321),s=r(895),a=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in a||i(e,"flags")||!o(a,e)?t:n(s,e)}},5650:(e,t,r)=>{var n=r(4229),i=r(9859).RegExp,o=n((function(){var e=i("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),s=o||n((function(){return!i("a","y").sticky})),a=o||n((function(){var e=i("^r","gy");return e.lastIndex=2,null!=e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:s,UNSUPPORTED_Y:o}},2926:(e,t,r)=>{var n=r(4229),i=r(9859).RegExp;e.exports=n((function(){var e=i(".","s");return!(e.dotAll&&e.exec("\n")&&"s"===e.flags)}))},461:(e,t,r)=>{var n=r(4229),i=r(9859).RegExp;e.exports=n((function(){var e=i("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},8885:(e,t,r)=>{var n=r(9650),i=TypeError;e.exports=function(e){if(n(e))throw i("Can't call method on "+e);return e}},2101:e=>{e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},1832:(e,t,r)=>{"use strict";var n=r(1333),i=r(6616),o=r(95),s=r(7400),a=o("species");e.exports=function(e){var t=n(e);s&&t&&!t[a]&&i(t,a,{configurable:!0,get:function(){return this}})}},4555:(e,t,r)=>{var n=r(1787).f,i=r(8270),o=r(95)("toStringTag");e.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!i(e,o)&&n(e,o,{configurable:!0,value:t})}},4399:(e,t,r)=>{var n=r(3036),i=r(1441),o=n("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},5353:(e,t,r)=>{var n=r(9859),i=r(8400),o="__core-js_shared__",s=n[o]||i(o,{});e.exports=s},3036:(e,t,r)=>{var n=r(4231),i=r(5353);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.31.1",mode:n?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.31.1/LICENSE",source:"https://github.com/zloirock/core-js"})},7942:(e,t,r)=>{var n=r(1176),i=r(7988),o=r(9650),s=r(95)("species");e.exports=function(e,t){var r,a=n(e).constructor;return void 0===a||o(r=n(a)[s])?t:i(r)}},966:(e,t,r)=>{var n=r(5968),i=r(3329),o=r(3326),s=r(8885),a=n("".charAt),c=n("".charCodeAt),u=n("".slice),l=function(e){return function(t,r){var n,l,d=o(s(t)),h=i(r),p=d.length;return h<0||h>=p?e?"":void 0:(n=c(d,h))<55296||n>56319||h+1===p||(l=c(d,h+1))<56320||l>57343?e?a(d,h):n:e?u(d,h,h+2):l-56320+(n-55296<<10)+65536}};e.exports={codeAt:l(!1),charAt:l(!0)}},3124:(e,t,r)=>{"use strict";var n=r(3329),i=r(3326),o=r(8885),s=RangeError;e.exports=function(e){var t=i(o(this)),r="",a=n(e);if(a<0||a==1/0)throw s("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(t+=t))1&a&&(r+=t);return r}},9445:(e,t,r)=>{var n=r(1805).PROPER,i=r(4229),o=r(1647);e.exports=function(e){return i((function(){return!!o[e]()||"​᠎"!=="​᠎"[e]()||n&&o[e].name!==e}))}},1017:(e,t,r)=>{var n=r(5968),i=r(8885),o=r(3326),s=r(1647),a=n("".replace),c=RegExp("^["+s+"]+"),u=RegExp("(^|[^"+s+"])["+s+"]+$"),l=function(e){return function(t){var r=o(i(t));return 1&e&&(r=a(r,c,"")),2&e&&(r=a(r,u,"$1")),r}};e.exports={start:l(1),end:l(2),trim:l(3)}},4860:(e,t,r)=>{var n=r(6358),i=r(4229),o=r(9859).String;e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!o(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},143:(e,t,r)=>{var n=r(5968);e.exports=n(1..valueOf)},3231:(e,t,r)=>{var n=r(3329),i=Math.max,o=Math.min;e.exports=function(e,t){var r=n(e);return r<0?i(r+t,0):o(r,t)}},905:(e,t,r)=>{var n=r(9337),i=r(8885);e.exports=function(e){return n(i(e))}},3329:(e,t,r)=>{var n=r(917);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},4237:(e,t,r)=>{var n=r(3329),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},2991:(e,t,r)=>{var n=r(8885),i=Object;e.exports=function(e){return i(n(e))}},2066:(e,t,r)=>{var n=r(266),i=r(5052),o=r(9395),s=r(5300),a=r(2914),c=r(95),u=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!i(e)||o(e))return e;var r,c=s(e,l);if(c){if(void 0===t&&(t="default"),r=n(c,e,t),!i(r)||o(r))return r;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},9310:(e,t,r)=>{var n=r(2066),i=r(9395);e.exports=function(e){var t=n(e,"string");return i(t)?t:t+""}},1601:(e,t,r)=>{var n={};n[r(95)("toStringTag")]="z",e.exports="[object z]"===String(n)},3326:(e,t,r)=>{var n=r(1589),i=String;e.exports=function(e){if("Symbol"===n(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},9821:e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},1441:(e,t,r)=>{var n=r(5968),i=0,o=Math.random(),s=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++i+o,36)}},6969:(e,t,r)=>{var n=r(4860);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},7137:(e,t,r)=>{var n=r(7400),i=r(4229);e.exports=n&&i((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},1180:(e,t,r)=>{var n=r(9859),i=r(6733),o=n.WeakMap;e.exports=i(o)&&/native code/.test(String(o))},95:(e,t,r)=>{var n=r(9859),i=r(3036),o=r(8270),s=r(1441),a=r(4860),c=r(6969),u=n.Symbol,l=i("wks"),d=c?u.for||u:u&&u.withoutSetter||s;e.exports=function(e){return o(l,e)||(l[e]=a&&o(u,e)?u[e]:d("Symbol."+e)),l[e]}},1647:e=>{e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},9529:(e,t,r)=>{"use strict";var n=r(3103),i=r(9540).includes,o=r(4229),s=r(9736);n({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),s("includes")},5735:(e,t,r)=>{"use strict";var n=r(905),i=r(9736),o=r(5495),s=r(6407),a=r(1787).f,c=r(2707),u=r(3684),l=r(4231),d=r(7400),h="Array Iterator",p=s.set,f=s.getterFor(h);e.exports=c(Array,"Array",(function(e,t){p(this,{type:h,target:n(e),index:0,kind:t})}),(function(){var e=f(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,u(void 0,!0)):u("keys"==r?n:"values"==r?t[n]:[n,t[n]],!1)}),"values");var g=o.Arguments=o.Array;if(i("keys"),i("values"),i("entries"),!l&&d&&"values"!==g.name)try{a(g,"name",{value:"values"})}catch(e){}},3108:(e,t,r)=>{"use strict";var n=r(3103),i=r(3143).left,o=r(6038),s=r(6358);n({target:"Array",proto:!0,forced:!r(8801)&&s>79&&s<83||!o("reduce")},{reduce:function(e){var t=arguments.length;return i(this,e,t,t>1?arguments[1]:void 0)}})},8836:(e,t,r)=>{var n=r(3103),i=r(5496);n({target:"Number",stat:!0,forced:Number.parseFloat!=i},{parseFloat:i})},1657:(e,t,r)=>{"use strict";var n=r(3103),i=r(5968),o=r(3329),s=r(143),a=r(3124),c=r(4229),u=RangeError,l=String,d=Math.floor,h=i(a),p=i("".slice),f=i(1..toFixed),g=function(e,t,r){return 0===t?r:t%2==1?g(e,t-1,r*e):g(e*e,t/2,r)},m=function(e,t,r){for(var n=-1,i=r;++n<6;)i+=t*e[n],e[n]=i%1e7,i=d(i/1e7)},v=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=d(n/t),n=n%t*1e7},y=function(e){for(var t=6,r="";--t>=0;)if(""!==r||0===t||0!==e[t]){var n=l(e[t]);r=""===r?n:r+h("0",7-n.length)+n}return r};n({target:"Number",proto:!0,forced:c((function(){return"0.000"!==f(8e-5,3)||"1"!==f(.9,0)||"1.25"!==f(1.255,2)||"1000000000000000128"!==f(0xde0b6b3a7640080,0)}))||!c((function(){f({})}))},{toFixed:function(e){var t,r,n,i,a=s(this),c=o(e),d=[0,0,0,0,0,0],f="",E="0";if(c<0||c>20)throw u("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return l(a);if(a<0&&(f="-",a=-a),a>1e-21)if(r=(t=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t}(a*g(2,69,1))-69)<0?a*g(2,-t,1):a/g(2,t,1),r*=4503599627370496,(t=52-t)>0){for(m(d,0,r),n=c;n>=7;)m(d,1e7,0),n-=7;for(m(d,g(10,n,1),0),n=t-1;n>=23;)v(d,1<<23),n-=23;v(d,1<<n),m(d,1,1),v(d,2),E=y(d)}else m(d,0,r),m(d,1<<-t,0),E=y(d)+h("0",c);return c>0?f+((i=E.length)<=c?"0."+h("0",c-i)+E:p(E,0,i-c)+"."+p(E,i-c)):f+E}})},3105:(e,t,r)=>{var n=r(3103),i=r(47);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==i},{assign:i})},5883:(e,t,r)=>{var n=r(3103),i=r(7664).entries;n({target:"Object",stat:!0},{entries:function(e){return i(e)}})},1804:(e,t,r)=>{var n=r(3103),i=r(9003),o=r(2324);n({target:"Object",stat:!0},{fromEntries:function(e){var t={};return i(e,(function(e,r){o(t,e,r)}),{AS_ENTRIES:!0}),t}})},7890:(e,t,r)=>{var n=r(3103),i=r(7664).values;n({target:"Object",stat:!0},{values:function(e){return i(e)}})},7368:(e,t,r)=>{var n=r(7400),i=r(9859),o=r(5968),s=r(6541),a=r(835),c=r(5762),u=r(8151).f,l=r(1321),d=r(8311),h=r(3326),p=r(3349),f=r(5650),g=r(6060),m=r(4768),v=r(4229),y=r(8270),E=r(6407).enforce,_=r(1832),S=r(95),A=r(2926),C=r(461),I=S("match"),O=i.RegExp,T=O.prototype,b=i.SyntaxError,w=o(T.exec),P=o("".charAt),R=o("".replace),N=o("".indexOf),D=o("".slice),L=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,x=/a/g,k=/a/g,M=new O(x)!==x,U=f.MISSED_STICKY,H=f.UNSUPPORTED_Y;if(s("RegExp",n&&(!M||U||A||C||v((function(){return k[I]=!1,O(x)!=x||O(k)==k||"/a/i"!=O(x,"i")}))))){for(var j=function(e,t){var r,n,i,o,s,u,f=l(T,this),g=d(e),m=void 0===t,v=[],_=e;if(!f&&g&&m&&e.constructor===j)return e;if((g||l(T,e))&&(e=e.source,m&&(t=p(_))),e=void 0===e?"":h(e),t=void 0===t?"":h(t),_=e,A&&"dotAll"in x&&(n=!!t&&N(t,"s")>-1)&&(t=R(t,/s/g,"")),r=t,U&&"sticky"in x&&(i=!!t&&N(t,"y")>-1)&&H&&(t=R(t,/y/g,"")),C&&(o=function(e){for(var t,r=e.length,n=0,i="",o=[],s={},a=!1,c=!1,u=0,l="";n<=r;n++){if("\\"===(t=P(e,n)))t+=P(e,++n);else if("]"===t)a=!1;else if(!a)switch(!0){case"["===t:a=!0;break;case"("===t:w(L,D(e,n+1))&&(n+=2,c=!0),i+=t,u++;continue;case">"===t&&c:if(""===l||y(s,l))throw new b("Invalid capture group name");s[l]=!0,o[o.length]=[l,u],c=!1,l="";continue}c?l+=t:i+=t}return[i,o]}(e),e=o[0],v=o[1]),s=a(O(e,t),f?this:T,j),(n||i||v.length)&&(u=E(s),n&&(u.dotAll=!0,u.raw=j(function(e){for(var t,r=e.length,n=0,i="",o=!1;n<=r;n++)"\\"!==(t=P(e,n))?o||"."!==t?("["===t?o=!0:"]"===t&&(o=!1),i+=t):i+="[\\s\\S]":i+=t+P(e,++n);return i}(e),r)),i&&(u.sticky=!0),v.length&&(u.groups=v)),e!==_)try{c(s,"source",""===_?"(?:)":_)}catch(e){}return s},B=u(O),G=0;B.length>G;)g(j,O,B[G++]);T.constructor=j,j.prototype=T,m(i,"RegExp",j,{constructor:!0})}_("RegExp")},7950:(e,t,r)=>{"use strict";var n=r(3103),i=r(3466);n({target:"RegExp",proto:!0,forced:/./.exec!==i},{exec:i})},8233:(e,t,r)=>{"use strict";var n=r(1805).PROPER,i=r(4768),o=r(1176),s=r(3326),a=r(4229),c=r(3349),u="toString",l=RegExp.prototype[u],d=a((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),h=n&&l.name!=u;(d||h)&&i(RegExp.prototype,u,(function(){var e=o(this);return"/"+s(e.source)+"/"+s(c(e))}),{unsafe:!0})},6708:(e,t,r)=>{"use strict";var n,i=r(3103),o=r(4745),s=r(7933).f,a=r(4237),c=r(3326),u=r(7272),l=r(8885),d=r(8127),h=r(4231),p=o("".endsWith),f=o("".slice),g=Math.min,m=d("endsWith");i({target:"String",proto:!0,forced:!(!h&&!m&&(n=s(String.prototype,"endsWith"),n&&!n.writable)||m)},{endsWith:function(e){var t=c(l(this));u(e);var r=arguments.length>1?arguments[1]:void 0,n=t.length,i=void 0===r?n:g(a(r),n),o=c(e);return p?p(t,o,i):f(t,i-o.length,i)===o}})},1235:(e,t,r)=>{"use strict";var n=r(3103),i=r(5968),o=r(7272),s=r(8885),a=r(3326),c=r(8127),u=i("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(e){return!!~u(a(s(this)),a(o(e)),arguments.length>1?arguments[1]:void 0)}})},4069:(e,t,r)=>{"use strict";var n=r(266),i=r(4954),o=r(1176),s=r(9650),a=r(4237),c=r(3326),u=r(8885),l=r(5300),d=r(6637),h=r(8115);i("match",(function(e,t,r){return[function(t){var r=u(this),i=s(t)?void 0:l(t,e);return i?n(i,t,r):new RegExp(t)[e](c(r))},function(e){var n=o(this),i=c(e),s=r(t,n,i);if(s.done)return s.value;if(!n.global)return h(n,i);var u=n.unicode;n.lastIndex=0;for(var l,p=[],f=0;null!==(l=h(n,i));){var g=c(l[0]);p[f]=g,""===g&&(n.lastIndex=d(i,a(n.lastIndex),u)),f++}return 0===f?null:p}]}))},5940:(e,t,r)=>{"use strict";var n=r(3171),i=r(266),o=r(5968),s=r(4954),a=r(4229),c=r(1176),u=r(6733),l=r(9650),d=r(3329),h=r(4237),p=r(3326),f=r(8885),g=r(6637),m=r(5300),v=r(17),y=r(8115),E=r(95)("replace"),_=Math.max,S=Math.min,A=o([].concat),C=o([].push),I=o("".indexOf),O=o("".slice),T="$0"==="a".replace(/./,"$0"),b=!!/./[E]&&""===/./[E]("a","$0");s("replace",(function(e,t,r){var o=b?"$":"$0";return[function(e,r){var n=f(this),o=l(e)?void 0:m(e,E);return o?i(o,e,n,r):i(t,p(n),e,r)},function(e,i){var s=c(this),a=p(e);if("string"==typeof i&&-1===I(i,o)&&-1===I(i,"$<")){var l=r(t,s,a,i);if(l.done)return l.value}var f=u(i);f||(i=p(i));var m=s.global;if(m){var E=s.unicode;s.lastIndex=0}for(var T=[];;){var b=y(s,a);if(null===b)break;if(C(T,b),!m)break;""===p(b[0])&&(s.lastIndex=g(a,h(s.lastIndex),E))}for(var w,P="",R=0,N=0;N<T.length;N++){for(var D=p((b=T[N])[0]),L=_(S(d(b.index),a.length),0),x=[],k=1;k<b.length;k++)C(x,void 0===(w=b[k])?w:String(w));var M=b.groups;if(f){var U=A([D],x,L,a);void 0!==M&&C(U,M);var H=p(n(i,void 0,U))}else H=v(D,a,L,x,M,i);L>=R&&(P+=O(a,R,L)+H,R=L+D.length)}return P+O(a,R)}]}),!!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!T||b)},4908:(e,t,r)=>{"use strict";var n=r(266),i=r(4954),o=r(1176),s=r(9650),a=r(8885),c=r(2101),u=r(3326),l=r(5300),d=r(8115);i("search",(function(e,t,r){return[function(t){var r=a(this),i=s(t)?void 0:l(t,e);return i?n(i,t,r):new RegExp(t)[e](u(r))},function(e){var n=o(this),i=u(e),s=r(t,n,i);if(s.done)return s.value;var a=n.lastIndex;c(a,0)||(n.lastIndex=0);var l=d(n,i);return c(n.lastIndex,a)||(n.lastIndex=a),null===l?-1:l.index}]}))},8319:(e,t,r)=>{"use strict";var n=r(3171),i=r(266),o=r(5968),s=r(4954),a=r(1176),c=r(9650),u=r(8311),l=r(8885),d=r(7942),h=r(6637),p=r(4237),f=r(3326),g=r(5300),m=r(9794),v=r(8115),y=r(3466),E=r(5650),_=r(4229),S=E.UNSUPPORTED_Y,A=4294967295,C=Math.min,I=[].push,O=o(/./.exec),T=o(I),b=o("".slice);s("split",(function(e,t,r){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var o=f(l(this)),s=void 0===r?A:r>>>0;if(0===s)return[];if(void 0===e)return[o];if(!u(e))return i(t,o,e,s);for(var a,c,d,h=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,v=new RegExp(e.source,p+"g");(a=i(y,v,o))&&!((c=v.lastIndex)>g&&(T(h,b(o,g,a.index)),a.length>1&&a.index<o.length&&n(I,h,m(a,1)),d=a[0].length,g=c,h.length>=s));)v.lastIndex===a.index&&v.lastIndex++;return g===o.length?!d&&O(v,"")||T(h,""):T(h,b(o,g)),h.length>s?m(h,0,s):h}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:i(t,this,e,r)}:t,[function(t,r){var n=l(this),s=c(t)?void 0:g(t,e);return s?i(s,t,n,r):i(o,f(n),t,r)},function(e,n){var i=a(this),s=f(e),c=r(o,i,s,n,o!==t);if(c.done)return c.value;var u=d(i,RegExp),l=i.unicode,g=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(S?"g":"y"),m=new u(S?"^(?:"+i.source+")":i,g),y=void 0===n?A:n>>>0;if(0===y)return[];if(0===s.length)return null===v(m,s)?[s]:[];for(var E=0,_=0,I=[];_<s.length;){m.lastIndex=S?0:_;var O,w=v(m,S?b(s,_):s);if(null===w||(O=C(p(m.lastIndex+(S?_:0)),s.length))===E)_=h(s,_,l);else{if(T(I,b(s,E,_)),I.length===y)return I;for(var P=1;P<=w.length-1;P++)if(T(I,w[P]),I.length===y)return I;_=E=O}}return T(I,b(s,E)),I}]}),!!_((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return 2!==r.length||"a"!==r[0]||"b"!==r[1]})),S)},4112:(e,t,r)=>{"use strict";var n,i=r(3103),o=r(4745),s=r(7933).f,a=r(4237),c=r(3326),u=r(7272),l=r(8885),d=r(8127),h=r(4231),p=o("".startsWith),f=o("".slice),g=Math.min,m=d("startsWith");i({target:"String",proto:!0,forced:!(!h&&!m&&(n=s(String.prototype,"startsWith"),n&&!n.writable)||m)},{startsWith:function(e){var t=c(l(this));u(e);var r=a(g(arguments.length>1?arguments[1]:void 0,t.length)),n=c(e);return p?p(t,n,r):f(t,r,r+n.length)===n}})},5794:(e,t,r)=>{"use strict";var n=r(3103),i=r(1017).trim;n({target:"String",proto:!0,forced:r(9445)("trim")},{trim:function(){return i(this)}})},634:(e,t,r)=>{"use strict";var n=r(3103),i=r(7400),o=r(9859),s=r(5968),a=r(8270),c=r(6733),u=r(1321),l=r(3326),d=r(6616),h=r(7081),p=o.Symbol,f=p&&p.prototype;if(i&&c(p)&&(!("description"in f)||void 0!==p().description)){var g={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:l(arguments[0]),t=u(f,this)?new p(e):void 0===e?p():p(e);return""===e&&(g[t]=!0),t};h(m,p),m.prototype=f,f.constructor=m;var v="Symbol(test)"==String(p("test")),y=s(f.valueOf),E=s(f.toString),_=/^Symbol\((.*)\)[^)]+$/,S=s("".replace),A=s("".slice);d(f,"description",{configurable:!0,get:function(){var e=y(this);if(a(g,e))return"";var t=E(e),r=v?A(t,7,-1):S(t,_,"$1");return""===r?void 0:r}}),n({global:!0,constructor:!0,forced:!0},{Symbol:m})}},6418:(e,t,r)=>{"use strict";var n,i=r(8476),o=r(9859),s=r(5968),a=r(8312),c=r(5926),u=r(9789),l=r(3370),d=r(5052),h=r(6407).enforce,p=r(4229),f=r(1180),g=Object,m=Array.isArray,v=g.isExtensible,y=g.isFrozen,E=g.isSealed,_=g.freeze,S=g.seal,A={},C={},I=!o.ActiveXObject&&"ActiveXObject"in o,O=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},T=u("WeakMap",O,l),b=T.prototype,w=s(b.set);if(f)if(I){n=l.getConstructor(O,"WeakMap",!0),c.enable();var P=s(b.delete),R=s(b.has),N=s(b.get);a(b,{delete:function(e){if(d(e)&&!v(e)){var t=h(this);return t.frozen||(t.frozen=new n),P(this,e)||t.frozen.delete(e)}return P(this,e)},has:function(e){if(d(e)&&!v(e)){var t=h(this);return t.frozen||(t.frozen=new n),R(this,e)||t.frozen.has(e)}return R(this,e)},get:function(e){if(d(e)&&!v(e)){var t=h(this);return t.frozen||(t.frozen=new n),R(this,e)?N(this,e):t.frozen.get(e)}return N(this,e)},set:function(e,t){if(d(e)&&!v(e)){var r=h(this);r.frozen||(r.frozen=new n),R(this,e)?w(this,e,t):r.frozen.set(e,t)}else w(this,e,t);return this}})}else i&&p((function(){var e=_([]);return w(new T,e,1),!y(e)}))&&a(b,{set:function(e,t){var r;return m(e)&&(y(e)?r=A:E(e)&&(r=C)),w(this,e,t),r==A&&_(e),r==C&&S(e),this}})},2356:(e,t,r)=>{r(6418)},1939:(e,t,r)=>{var n=r(9859),i=r(5694),o=r(8865),s=r(6570),a=r(5762),c=function(e){if(e&&e.forEach!==s)try{a(e,"forEach",s)}catch(t){e.forEach=s}};for(var u in i)i[u]&&c(n[u]&&n[u].prototype);c(o)},6886:(e,t,r)=>{var n=r(9859),i=r(5694),o=r(8865),s=r(5735),a=r(5762),c=r(95),u=c("iterator"),l=c("toStringTag"),d=s.values,h=function(e,t){if(e){if(e[u]!==d)try{a(e,u,d)}catch(t){e[u]=d}if(e[l]||a(e,l,t),i[t])for(var r in s)if(e[r]!==s[r])try{a(e,r,s[r])}catch(t){e[r]=s[r]}}};for(var p in i)h(n[p]&&n[p].prototype,p);h(o,"DOMTokenList")}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};r.r(e),r.d(e,{FunctionToString:()=>Y,InboundFilters:()=>te});var t={};r.r(t),r.d(t,{Breadcrumbs:()=>St,Dedupe:()=>Lt,GlobalHandlers:()=>at,HttpContext:()=>Dt,LinkedErrors:()=>Nt,TryCatch:()=>ft}),r(5735),r(6886),r(634),r(1939),r(7950);var n=/android/i;function i(){var e,t=null===(e=navigator)||void 0===e?void 0:e.userAgent;return!!t&&Boolean((/Safari/.test(t)&&(/iPhone/.test(t)||/iPad/.test(t))&&!/Trident/.test(t)||/AppleWebKit/.test(t)&&!(/Android/.test(t)||/Linux/.test(t)||/Trident/.test(t))&&(/Mobile/.test(t)||/iPhone/.test(t)||/iPad/.test(t))&&!/Macintosh/.test(t)&&!/Windows/.test(t))&&!(/Chrome/.test(t)||/CriOS/.test(t)||/Edg/.test(t)))}function o(){var e,t=null===(e=navigator)||void 0===e?void 0:e.userAgent;return!!t&&Boolean((/Safari/.test(t)||/AppleWebKit/.test(t))&&(/Macintosh/.test(t)||/Windows/.test(t))&&!/iPhone/.test(t)&&!/iPad/.test(t)&&!/Chrome/.test(t)&&!/Edg/.test(t)&&!/Firefox/.test(t))}var s,a,c={get documentBody(){return window.document.body},get documentReferrer(){return window.document.referrer},get documentVisibilityState(){return document.visibilityState},getQueryParams:function(e,t){var r=new URL(e),n={};return t.forEach((e=>{var t=r.searchParams.get(e);t&&(n[e]=t)})),n},isAndroid:function(){return n.test(window.navigator.userAgent)},isDesktopSafari:o,isMobileSafari:i,isSafari:function(){return i()||o()},isSupported:function(){return void 0!==window.postMessage&&void 0!==window.fetch&&void 0!==document.createElement("a").classList},redirectTo:function(e){window.location.href=e},replaceWindowState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.title;window.history.replaceState(null,t,e)},submitForm:function(e){e.submit()},get windowHash(){return window.location.hash},get windowInnerHeight(){return window.innerHeight},get windowInnerWidth(){return window.innerWidth},get windowLocation(){return window.location},get windowNavigationBeacon(){return window.navigator.sendBeacon},get windowNavigationLanguage(){var e=window.navigator.language;return!e&&window.navigator.languages.length>0&&(e=window.navigator.languages[0]),e},get windowParentLocation(){return window.parent.location},get windowPerformance(){return window.performance}};!function(e){e.development="development",e.sandbox="sandbox",e.production="production",e.staging="staging",e.test="test"}(s||(s={})),function(e){e.JAVASCRIPT="text/javascript",e.HTML="text/html"}(a||(a={}));var u=null!=="sandbox"?"sandbox":"development",l={get ANALYTICS_PUBLIC_ENDPOINT(){return u===s.test?(e="window.Square.Analytics = {};",t=a.JAVASCRIPT,r=new Blob([e],{type:t}),URL.createObjectURL(r)):"".concat(this.API_PROTOCOL,"js.").concat(this.API_PUBLIC_HOST,"/payments/data.js");var e,t,r},get API_HOST(){switch(u){case s.production:return"pci-connect.squareup.com";case s.sandbox:return"pci-connect.squareupsandbox.com";default:return"pci-connect.squareupstaging.com"}},get API_PROTOCOL(){return"https://"},get API_PUBLIC_HOST(){switch(u){case s.production:return"squareup.com";case s.sandbox:return"squareupsandbox.com";default:return"squareupstaging.com"}},get API_URL(){return"".concat(this.API_PROTOCOL).concat(this.API_HOST)},get ASSET_BASE_URL(){return function(e){switch(e){case s.production:return"https://web.squarecdn.com";case s.sandbox:return"https://sandbox.web.squarecdn.com";case s.development:return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}(s[u])},get ASSET_URL(){return"local"===this.VERSION?this.ASSET_BASE_URL:"".concat(this.ASSET_BASE_URL,"/").concat(this.VERSION)},get BANK_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/bank-nonce")},get CARD_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/card-nonce")},get CASH_APP_API(){return u===s.production?"https://api.cash.app":"https://api.cashstaging.app"},get CREATE_OAUTH_PLAID_LINK_SESSION_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/plaid/oauth-link-session")},get ENABLE_ERROR_LOGGING(){return u!==s.development},get GET_PRODUCT_INFORMATION_ENDPOINT(){return"".concat(this.API_URL,"/v2/tokenization/product-information")},get GIFT_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/gift-card-element-iframe.html")},get GOOGLE_PAY_GENERATE_TOKEN_ENDPOINT(){return"".concat(this.API_URL,"/digital-wallets/google-pay/token")},get HYDRATION_ENDPOINT(){return"".concat(this.API_URL,"/payments/hydrate")},get IFRAME_SRC(){return"".concat(this.ASSET_URL,"/main-iframe.html")},get INSTANT_WALLET_NONCE_ENDPOINT(){return"".concat(this.API_URL,"/v2/instant-wallet-nonce")},get METRICS_ERROR_URL(){return"".concat(this.API_URL,"/payments/mtx/error")},get METRICS_URL(){return"".concat(this.API_URL,"/payments/mtx")},get METRICS_V2_URL(){return"".concat(this.API_URL,"/payments/mtx/v2")},get SENTRY_DSN(){switch(u){case s.test:case s.development:return"https://acacaeaccacacacabcaacdacdacadaca@sentry.io/000001";default:return"https://565ee38bb5ff45dabc25ab6d7b8bebe3@o160250.ingest.sentry.io/3478832"}},get SINGLE_CARD_IFRAME(){return"".concat(this.ASSET_URL,"/single-card-element-iframe.html")},get SINGLE_CARD_WRAPPER_STYLES(){return"".concat(this.ASSET_URL,"/card-wrapper.css")},STATIC_ASSET(e){return"".concat(this.ASSET_URL,"/static-assets/").concat(e)},get VERSION(){return"1.53.0"},env:u},d=l;r(8233),r(5883);const h=Object.prototype.toString;function p(e){switch(h.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return A(e,Error)}}function f(e,t){return h.call(e)===`[object ${t}]`}function g(e){return f(e,"ErrorEvent")}function m(e){return f(e,"DOMError")}function v(e){return f(e,"String")}function y(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function E(e){return f(e,"Object")}function _(e){return"undefined"!=typeof Event&&A(e,Event)}function S(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function A(e,t){try{return e instanceof t}catch(e){return!1}}function C(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}var I=r(63);const O=(0,I.Rf)(),T=80;function b(e,t={}){try{let r=e;const n=5,i=[];let o=0,s=0;const a=" > ",c=a.length;let u;const l=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||T;for(;r&&o++<n&&(u=w(r,l),!("html"===u||o>1&&s+i.length*c+u.length>=d));)i.push(u),s+=u.length,r=r.parentNode;return i.reverse().join(a)}catch(e){return"<unknown>"}}function w(e,t){const r=e,n=[];let i,o,s,a,c;if(!r||!r.tagName)return"";n.push(r.tagName.toLowerCase());const u=t&&t.length?t.filter((e=>r.getAttribute(e))).map((e=>[e,r.getAttribute(e)])):null;if(u&&u.length)u.forEach((e=>{n.push(`[${e[0]}="${e[1]}"]`)}));else if(r.id&&n.push(`#${r.id}`),i=r.className,i&&v(i))for(o=i.split(/\s+/),c=0;c<o.length;c++)n.push(`.${o[c]}`);const l=["aria-label","type","name","title","alt"];for(c=0;c<l.length;c++)s=l[c],a=r.getAttribute(s),a&&n.push(`[${s}="${a}"]`);return n.join("")}const P=["debug","info","warn","error","log","assert","trace"],R={};function N(e){if(!("console"in I.n2))return e();const t=I.n2.console,r={},n=Object.keys(R);n.forEach((e=>{const n=R[e];r[e]=t[e],t[e]=n}));try{return e()}finally{n.forEach((e=>{t[e]=r[e]}))}}const D=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1}};return"undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__?P.forEach((r=>{t[r]=(...t)=>{e&&N((()=>{I.n2.console[r](`Sentry Logger [${r}]:`,...t)}))}})):P.forEach((e=>{t[e]=()=>{}})),t}();function L(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function x(e,t){if(!Array.isArray(e))return"";const r=[];for(let t=0;t<e.length;t++){const n=e[t];try{C(n)?r.push("[VueViewModel]"):r.push(String(n))}catch(e){r.push("[value cannot be serialized]")}}return r.join(t)}function k(e,t=[],r=!1){return t.some((t=>function(e,t,r=!1){return!!v(e)&&(f(t,"RegExp")?t.test(e):!!v(t)&&(r?e===t:e.includes(t)))}(e,t,r)))}function M(e,t,r){if(!(t in e))return;const n=e[t],i=r(n);"function"==typeof i&&H(i,n),e[t]=i}function U(e,t,r){try{Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0})}catch(r){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function H(e,t){try{const r=t.prototype||{};e.prototype=t.prototype=r,U(e,"__sentry_original__",t)}catch(e){}}function j(e){return e.__sentry_original__}function B(e){if(p(e))return{message:e.message,name:e.name,stack:e.stack,...q(e)};if(_(e)){const t={type:e.type,target:G(e.target),currentTarget:G(e.currentTarget),...q(e)};return"undefined"!=typeof CustomEvent&&A(e,CustomEvent)&&(t.detail=e.detail),t}return e}function G(e){try{return"undefined"!=typeof Element&&A(e,Element)?b(e):Object.prototype.toString.call(e)}catch(e){return"<unknown>"}}function q(e){if("object"==typeof e&&null!==e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}return{}}function F(e){return V(e,new Map)}function V(e,t){if(E(e)){const r=t.get(e);if(void 0!==r)return r;const n={};t.set(e,n);for(const r of Object.keys(e))void 0!==e[r]&&(n[r]=V(e[r],t));return n}if(Array.isArray(e)){const r=t.get(e);if(void 0!==r)return r;const n=[];return t.set(e,n),e.forEach((e=>{n.push(V(e,t))})),n}return e}let z;class Y{static __initStatic(){this.id="FunctionToString"}constructor(){this.name=Y.id}setupOnce(){z=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=j(this)||this;return z.apply(t,e)}}catch(e){}}}function $(){const e=I.n2,t=e.crypto||e.msCrypto;let r=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(r=()=>t.getRandomValues(new Uint8Array(1))[0])}catch(e){}return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,(e=>(e^(15&r())>>e/4).toString(16)))}function K(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function W(e){const{message:t,event_id:r}=e;if(t)return t;const n=K(e);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||r||"<unknown>":r||"<unknown>"}function Q(e,t,r){const n=e.exception=e.exception||{},i=n.values=n.values||[],o=i[0]=i[0]||{};o.value||(o.value=t||""),o.type||(o.type=r||"Error")}function Z(e,t){const r=K(e);if(!r)return;const n=r.mechanism;if(r.mechanism={type:"generic",handled:!0,...n,...t},t&&"data"in t){const e={...n&&n.data,...t.data};r.mechanism.data=e}}function J(e){if(e&&e.__sentry_captured__)return!0;try{U(e,"__sentry_captured__",!0)}catch(e){}return!1}Y.__initStatic();const X=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],ee=[/^.*healthcheck.*$/,/^.*healthy.*$/,/^.*live.*$/,/^.*ready.*$/,/^.*heartbeat.*$/,/^.*\/health$/,/^.*\/healthz$/];class te{static __initStatic(){this.id="InboundFilters"}constructor(e={}){this.name=te.id,this._options=e}setupOnce(e,t){const r=e=>{const r=t();if(r){const t=r.getIntegration(te);if(t){const n=r.getClient(),i=n?n.getOptions():{},o=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:X],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:ee],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(t._options,i);return function(e,t){return t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(e){}return!1}(e)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${W(e)}`),!0):function(e,t){return!(e.type||!t||!t.length)&&function(e){const t=[];let r;e.message&&t.push(e.message);try{r=e.exception.values[e.exception.values.length-1]}catch(e){}return r&&r.value&&(t.push(r.value),r.type&&t.push(`${r.type}: ${r.value}`)),"undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__||0!==t.length||D.error(`Could not extract message for event ${W(e)}`),t}(e).some((e=>k(e,t)))}(e,t.ignoreErrors)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${W(e)}`),!0):function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const r=e.transaction;return!!r&&k(r,t)}(e,t.ignoreTransactions)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${W(e)}`),!0):function(e,t){if(!t||!t.length)return!1;const r=re(e);return!!r&&k(r,t)}(e,t.denyUrls)?(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${W(e)}.\nUrl: ${re(e)}`),!0):!function(e,t){if(!t||!t.length)return!0;const r=re(e);return!r||k(r,t)}(e,t.allowUrls)&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${W(e)}.\nUrl: ${re(e)}`),!0)}(e,o)?null:e}}return e};r.id=this.name,e(r)}}function re(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch(e){}return t?function(e=[]){for(let t=e.length-1;t>=0;t--){const r=e[t];if(r&&"<anonymous>"!==r.filename&&"[native code]"!==r.filename)return r.filename||null}return null}(t):null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.error(`Cannot extract url for event ${W(e)}`),null}}te.__initStatic();var ne=r(7790);const ie="production";var oe;function se(e){return new ce((t=>{t(e)}))}function ae(e){return new ce(((t,r)=>{r(e)}))}!function(e){e[e.PENDING=0]="PENDING",e[e.RESOLVED=1]="RESOLVED",e[e.REJECTED=2]="REJECTED"}(oe||(oe={}));class ce{constructor(e){ce.prototype.__init.call(this),ce.prototype.__init2.call(this),ce.prototype.__init3.call(this),ce.prototype.__init4.call(this),this._state=oe.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}then(e,t){return new ce(((r,n)=>{this._handlers.push([!1,t=>{if(e)try{r(e(t))}catch(e){n(e)}else r(t)},e=>{if(t)try{r(t(e))}catch(e){n(e)}else n(e)}]),this._executeHandlers()}))}catch(e){return this.then((e=>e),e)}finally(e){return new ce(((t,r)=>{let n,i;return this.then((t=>{i=!1,n=t,e&&e()}),(t=>{i=!0,n=t,e&&e()})).then((()=>{i?r(n):t(n)}))}))}__init(){this._resolve=e=>{this._setResult(oe.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(oe.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===oe.PENDING&&(S(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===oe.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach((e=>{e[0]||(this._state===oe.RESOLVED&&e[1](this._value),this._state===oe.REJECTED&&e[2](this._value),e[0]=!0)}))}}}function ue(){return(0,I.YO)("globalEventProcessors",(()=>[]))}function le(e){ue().push(e)}function de(e,t,r,n=0){return new ce(((i,o)=>{const s=e[n];if(null===t||"function"!=typeof s)i(t);else{const a=s({...t},r);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&s.id&&null===a&&D.log(`Event processor "${s.id}" dropped event`),S(a)?a.then((t=>de(e,t,r,n+1).then(i))).then(null,o):de(e,a,r,n+1).then(i).then(null,o)}}))}function he(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||(0,ne.ph)(),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:$()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}class pe{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=fe()}static clone(e){const t=new pe;return e&&(t._breadcrumbs=[...e._breadcrumbs],t._tags={...e._tags},t._extra={...e._extra},t._contexts={...e._contexts},t._user=e._user,t._level=e._level,t._span=e._span,t._session=e._session,t._transactionName=e._transactionName,t._fingerprint=e._fingerprint,t._eventProcessors=[...e._eventProcessors],t._requestSession=e._requestSession,t._attachments=[...e._attachments],t._sdkProcessingMetadata={...e._sdkProcessingMetadata},t._propagationContext={...e._propagationContext}),t}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&he(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if("function"==typeof e){const t=e(this);return t instanceof pe?t:this}return e instanceof pe?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):E(e)&&(this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=fe(),this}addBreadcrumb(e,t){const r="number"==typeof t?t:100;if(r<=0)return this;const n={timestamp:(0,ne.yW)(),...e},i=this._breadcrumbs;return i.push(n),this._breadcrumbs=i.length>r?i.slice(-r):i,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,t={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const t=this._span.transaction;if(t){e.sdkProcessingMetadata={dynamicSamplingContext:t.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const r=t.name;r&&(e.tags={transaction:r,...e.tags})}}this._applyFingerprint(e);const r=this._getBreadcrumbs(),n=[...e.breadcrumbs||[],...r];return e.breadcrumbs=n.length>0?n:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},de([...ue(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}_getBreadcrumbs(){return this._breadcrumbs}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((e=>{e(this)})),this._notifyingListeners=!1)}_applyFingerprint(e){var t;e.fingerprint=e.fingerprint?(t=e.fingerprint,Array.isArray(t)?t:[t]):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function fe(){return{traceId:$(),spanId:$().substring(16)}}const ge=4,me=100;class ve{constructor(e,t=new pe,r=ge){this._version=r,this._stack=[{scope:t}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=pe.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1||!this.getStack().pop())}withScope(e){const t=this.pushScope();try{e(t)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const r=this._lastEventId=t&&t.event_id?t.event_id:$(),n=new Error("Sentry syntheticException");return this._withClient(((i,o)=>{i.captureException(e,{originalException:e,syntheticException:n,...t,event_id:r},o)})),r}captureMessage(e,t,r){const n=this._lastEventId=r&&r.event_id?r.event_id:$(),i=new Error(e);return this._withClient(((o,s)=>{o.captureMessage(e,t,{originalException:e,syntheticException:i,...r,event_id:n},s)})),n}captureEvent(e,t){const r=t&&t.event_id?t.event_id:$();return e.type||(this._lastEventId=r),this._withClient(((n,i)=>{n.captureEvent(e,{...t,event_id:r},i)})),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:r,client:n}=this.getStackTop();if(!n)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=me}=n.getOptions&&n.getOptions()||{};if(o<=0)return;const s={timestamp:(0,ne.yW)(),...e},a=i?N((()=>i(s,t))):s;null!==a&&(n.emit&&n.emit("beforeAddBreadcrumb",a,t),r.addBreadcrumb(a,o))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t)}configureScope(e){const{scope:t,client:r}=this.getStackTop();r&&e(t)}run(e){const t=Ee(this);try{e(this)}finally{Ee(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const r=this._callExtensionMethod("startTransaction",e,t);return"undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__||r||(this.getClient()?console.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):console.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&function(e,t){let r={};"ok"===e.status&&(r={status:"exited"}),he(e,r)}(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:r}=this.getStackTop(),{release:n,environment:i=ie}=r&&r.getOptions()||{},{userAgent:o}=I.n2.navigator||{},s=function(e){const t=(0,ne.ph)(),r={sid:$(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return F({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(r)};return e&&he(r,e),r}({release:n,environment:i,user:t.getUser(),...o&&{userAgent:o},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&he(a,{status:"exited"}),this.endSession(),t.setSession(s),s}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),r=e.getSession();r&&t&&t.captureSession&&t.captureSession(r)}_withClient(e){const{scope:t,client:r}=this.getStackTop();r&&e(r,t)}_callExtensionMethod(e,...t){const r=ye().__SENTRY__;if(r&&r.extensions&&"function"==typeof r.extensions[e])return r.extensions[e].apply(this,t);("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function ye(){return I.n2.__SENTRY__=I.n2.__SENTRY__||{extensions:{},hub:void 0},I.n2}function Ee(e){const t=ye(),r=Se(t);return Ae(t,e),r}function _e(){const e=ye();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=ye()){return t=e,!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)&&!Se(e).isOlderThan(ge)||Ae(e,new ve),Se(e);var t}(e)}function Se(e){return(0,I.YO)("hub",(()=>new ve),e)}function Ae(e,t){return!!e&&((e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0)}const Ce=I.n2;let Ie=0;function Oe(){return Ie>0}function Te(e,t={},r){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return t;if(j(e))return e}catch(t){return e}const n=function(){const n=Array.prototype.slice.call(arguments);try{r&&"function"==typeof r&&r.apply(this,arguments);const i=n.map((e=>Te(e,t)));return e.apply(this,i)}catch(e){throw Ie++,setTimeout((()=>{Ie--})),i=r=>{var i;r.addEventProcessor((e=>(t.mechanism&&(Q(e,void 0,void 0),Z(e,t.mechanism)),e.extra={...e.extra,arguments:n},e))),i=e,_e().captureException(i,{captureContext:undefined})},_e().withScope(i),e}var i};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch(e){}H(n,e),U(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch(e){}return n}const be=/\(error: (.*)\)/,we=/captureMessage|captureException/;const Pe="<anonymous>";function Re(e){try{return e&&"function"==typeof e&&e.name||Pe}catch(e){return Pe}}const Ne=(0,I.Rf)();function De(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}const Le=(0,I.Rf)(),xe=(0,I.Rf)(),ke="__sentry_xhr_v2__",Me={},Ue={};function He(e){if(!Ue[e])switch(Ue[e]=!0,e){case"console":"console"in I.n2&&P.forEach((function(e){e in I.n2.console&&M(I.n2.console,e,(function(t){return R[e]=t,function(...t){Be("console",{args:t,level:e});const r=R[e];r&&r.apply(I.n2.console,t)}}))}));break;case"dom":!function(){if(!xe.document)return;const e=Be.bind(null,"dom"),t=$e(e,!0);xe.document.addEventListener("click",t,!1),xe.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const r=xe[t]&&xe[t].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(M(r,"addEventListener",(function(t){return function(r,n,i){if("click"===r||"keypress"==r)try{const n=this,o=n.__sentry_instrumentation_handlers__=n.__sentry_instrumentation_handlers__||{},s=o[r]=o[r]||{refCount:0};if(!s.handler){const n=$e(e);s.handler=n,t.call(this,r,n,i)}s.refCount++}catch(e){}return t.call(this,r,n,i)}})),M(r,"removeEventListener",(function(e){return function(t,r,n){if("click"===t||"keypress"==t)try{const r=this,i=r.__sentry_instrumentation_handlers__||{},o=i[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,n),o.handler=void 0,delete i[t]),0===Object.keys(i).length&&delete r.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,r,n)}})))}))}();break;case"xhr":!function(){if(!xe.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;M(e,"open",(function(e){return function(...t){const r=t[1],n=this[ke]={method:v(t[0])?t[0].toUpperCase():t[0],url:t[1],request_headers:{}};v(r)&&"POST"===n.method&&r.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const i=()=>{const e=this[ke];if(e&&4===this.readyState){try{e.status_code=this.status}catch(e){}Be("xhr",{args:t,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?M(this,"onreadystatechange",(function(e){return function(...t){return i(),e.apply(this,t)}})):this.addEventListener("readystatechange",i),M(this,"setRequestHeader",(function(e){return function(...t){const[r,n]=t,i=this[ke];return i&&(i.request_headers[r.toLowerCase()]=n),e.apply(this,t)}})),e.apply(this,t)}})),M(e,"send",(function(e){return function(...t){const r=this[ke];return r&&void 0!==t[0]&&(r.body=t[0]),Be("xhr",{args:t,startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}}))}();break;case"fetch":(function(){if(!function(){if(!("fetch"in Ne))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}())return!1;if(De(Ne.fetch))return!0;let e=!1;const t=Ne.document;if(t&&"function"==typeof t.createElement)try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(e=De(r.contentWindow.fetch)),t.head.removeChild(r)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return e})()&&M(I.n2,"fetch",(function(e){return function(...t){const{method:r,url:n}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,r]=e;return{url:qe(t),method:Ge(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:qe(t),method:Ge(t,"method")?String(t.method).toUpperCase():"GET"}}(t),i={args:t,fetchData:{method:r,url:n},startTimestamp:Date.now()};return Be("fetch",{...i}),e.apply(I.n2,t).then((e=>(Be("fetch",{...i,endTimestamp:Date.now(),response:e}),e)),(e=>{throw Be("fetch",{...i,endTimestamp:Date.now(),error:e}),e}))}}));break;case"history":!function(){if(!function(){const e=Le.chrome,t=e&&e.app&&e.app.runtime,r="history"in Le&&!!Le.history.pushState&&!!Le.history.replaceState;return!t&&r}())return;const e=xe.onpopstate;function t(e){return function(...t){const r=t.length>2?t[2]:void 0;if(r){const e=Fe,t=String(r);Fe=t,Be("history",{from:e,to:t})}return e.apply(this,t)}}xe.onpopstate=function(...t){const r=xe.location.href,n=Fe;if(Fe=r,Be("history",{from:n,to:r}),e)try{return e.apply(this,t)}catch(e){}},M(xe.history,"pushState",t),M(xe.history,"replaceState",t)}();break;case"error":Ke=xe.onerror,xe.onerror=function(e,t,r,n,i){return Be("error",{column:n,error:i,line:r,msg:e,url:t}),!(!Ke||Ke.__SENTRY_LOADER__)&&Ke.apply(this,arguments)},xe.onerror.__SENTRY_INSTRUMENTED__=!0;break;case"unhandledrejection":We=xe.onunhandledrejection,xe.onunhandledrejection=function(e){return Be("unhandledrejection",e),!(We&&!We.__SENTRY_LOADER__)||We.apply(this,arguments)},xe.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0;break;default:return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn("unknown instrumentation type:",e))}}function je(e,t){Me[e]=Me[e]||[],Me[e].push(t),He(e)}function Be(e,t){if(e&&Me[e])for(const r of Me[e]||[])try{r(t)}catch(t){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Re(r)}\nError:`,t)}}function Ge(e,t){return!!e&&"object"==typeof e&&!!e[t]}function qe(e){return"string"==typeof e?e:e?Ge(e,"url")?e.url:e.toString?e.toString():"":""}let Fe;const Ve=1e3;let ze,Ye;function $e(e,t=!1){return r=>{if(!r||Ye===r)return;if(function(e){if("keypress"!==e.type)return!1;try{const t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(r))return;const n="keypress"===r.type?"input":r.type;(void 0===ze||function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(Ye,r))&&(e({event:r,name:n,global:t}),Ye=r),clearTimeout(ze),ze=xe.setTimeout((()=>{ze=void 0}),Ve)}}let Ke=null,We=null;function Qe(e,t=100,r=1/0){try{return Je("",e,t,r)}catch(e){return{ERROR:`**non-serializable** (${e})`}}}function Ze(e,t=3,r=102400){const n=Qe(e,t);return i=n,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(i))>r?Ze(e,t-1,r):n;var i}function Je(e,t,n=1/0,i=1/0,o=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(r){if(e)return!!t.has(r)||(t.add(r),!1);for(let e=0;e<t.length;e++)if(t[e]===r)return!0;return t.push(r),!1},function(r){if(e)t.delete(r);else for(let e=0;e<t.length;e++)if(t[e]===r){t.splice(e,1);break}}]}()){const[s,a]=o;if(null==t||["number","boolean","string"].includes(typeof t)&&("number"!=typeof(c=t)||c==c))return t;var c;const u=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if(void 0!==r.g&&t===r.g)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(C(t))return"[VueViewModel]";if(function(e){return E(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}(t))return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${Re(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const n=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(e){return`**non-serializable** (${e})`}}(e,t);if(!u.startsWith("[object "))return u;if(t.__sentry_skip_normalization__)return t;const l="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===l)return u.replace("object ","");if(s(t))return"[Circular ~]";const d=t;if(d&&"function"==typeof d.toJSON)try{return Je("",d.toJSON(),l-1,i,o)}catch(e){}const h=Array.isArray(t)?[]:{};let p=0;const f=B(t);for(const e in f){if(!Object.prototype.hasOwnProperty.call(f,e))continue;if(p>=i){h[e]="[MaxProperties ~]";break}const t=f[e];h[e]=Je(e,t,l-1,i,o),p++}return a(t),h}function Xe(e,t){const r=tt(e,t),n={type:t&&t.name,value:nt(t)};return r.length&&(n.stacktrace={frames:r}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function et(e,t){return{exception:{values:[Xe(e,t)]}}}function tt(e,t){const r=t.stacktrace||t.stack||"",n=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(rt.test(e.message))return 1}return 0}(t);try{return e(r,n)}catch(e){}return[]}const rt=/Minified React error #\d+;/i;function nt(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function it(e,t,r,n,i){let o;if(g(t)&&t.error)return et(e,t.error);if(m(t)||f(t,"DOMException")){const i=t;if("stack"in t)o=et(e,t);else{const t=i.name||(m(i)?"DOMError":"DOMException"),s=i.message?`${t}: ${i.message}`:t;o=ot(e,s,r,n),Q(o,s)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}return p(t)?et(e,t):E(t)||_(t)?(o=function(e,t,r,n){const i=_e().getClient(),o=i&&i.getOptions().normalizeDepth,s={exception:{values:[{type:_(t)?t.constructor.name:n?"UnhandledRejection":"Error",value:st(t,{isUnhandledRejection:n})}]},extra:{__serialized__:Ze(t,o)}};if(r){const t=tt(e,r);t.length&&(s.exception.values[0].stacktrace={frames:t})}return s}(e,t,r,i),Z(o,{synthetic:!0}),o):(o=ot(e,t,r,n),Q(o,`${t}`,void 0),Z(o,{synthetic:!0}),o)}function ot(e,t,r,n){const i={message:t};if(n&&r){const n=tt(e,r);n.length&&(i.exception={values:[{value:t,stacktrace:{frames:n}}]})}return i}function st(e,{isUnhandledRejection:t}){const r=function(e,t=40){const r=Object.keys(B(e));if(r.sort(),!r.length)return"[object has no keys]";if(r[0].length>=t)return L(r[0],t);for(let e=r.length;e>0;e--){const n=r.slice(0,e).join(", ");if(!(n.length>t))return e===r.length?n:L(n,t)}return""}(e),n=t?"promise rejection":"exception";return g(e)?`Event \`ErrorEvent\` captured as ${n} with message \`${e.message}\``:_(e)?`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(e){}}(e)}\` (type=${e.type}) captured as ${n}`:`Object captured as ${n} with keys: ${r}`}class at{static __initStatic(){this.id="GlobalHandlers"}constructor(e){this.name=at.id,this._options={onerror:!0,onunhandledrejection:!0,...e},this._installFunc={onerror:ct,onunhandledrejection:ut}}setupOnce(){Error.stackTraceLimit=50;const e=this._options;for(const r in e){const n=this._installFunc[r];n&&e[r]&&(t=r,("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.log(`Global Handler attached: ${t}`),n(),this._installFunc[r]=void 0)}var t}}function ct(){je("error",(e=>{const[t,r,n]=ht();if(!t.getIntegration(at))return;const{msg:i,url:o,line:s,column:a,error:c}=e;if(Oe()||c&&c.__sentry_own_request__)return;const u=void 0===c&&v(i)?function(e,t,r,n){let i=g(e)?e.message:e,o="Error";const s=i.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);s&&(o=s[1],i=s[2]);return lt({exception:{values:[{type:o,value:i}]}},t,r,n)}(i,o,s,a):lt(it(r,c||i,void 0,n,!1),o,s,a);u.level="error",dt(t,c,u,"onerror")}))}function ut(){je("unhandledrejection",(e=>{const[t,r,n]=ht();if(!t.getIntegration(at))return;let i=e;try{"reason"in e?i=e.reason:"detail"in e&&"reason"in e.detail&&(i=e.detail.reason)}catch(e){}if(Oe()||i&&i.__sentry_own_request__)return!0;const o=y(i)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(i)}`}]}}:it(r,i,void 0,n,!0);o.level="error",dt(t,i,o,"onunhandledrejection")}))}function lt(e,t,r,n){const i=e.exception=e.exception||{},o=i.values=i.values||[],s=o[0]=o[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=isNaN(parseInt(n,10))?void 0:n,l=isNaN(parseInt(r,10))?void 0:r,d=v(t)&&t.length>0?t:function(){try{return O.document.location.href}catch(e){return""}}();return 0===c.length&&c.push({colno:u,filename:d,function:"?",in_app:!0,lineno:l}),e}function dt(e,t,r,n){Z(r,{handled:!1,type:n}),e.captureEvent(r,{originalException:t})}function ht(){const e=_e(),t=e.getClient(),r=t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return[e,r.stackParser,r.attachStacktrace]}at.__initStatic();const pt=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"];class ft{static __initStatic(){this.id="TryCatch"}constructor(e){this.name=ft.id,this._options={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e}}setupOnce(){this._options.setTimeout&&M(Ce,"setTimeout",gt),this._options.setInterval&&M(Ce,"setInterval",gt),this._options.requestAnimationFrame&&M(Ce,"requestAnimationFrame",mt),this._options.XMLHttpRequest&&"XMLHttpRequest"in Ce&&M(XMLHttpRequest.prototype,"send",vt);const e=this._options.eventTarget;e&&(Array.isArray(e)?e:pt).forEach(yt)}}function gt(e){return function(...t){const r=t[0];return t[0]=Te(r,{mechanism:{data:{function:Re(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function mt(e){return function(t){return e.apply(this,[Te(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Re(e)},handled:!1,type:"instrument"}})])}}function vt(e){return function(...t){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach((e=>{e in r&&"function"==typeof r[e]&&M(r,e,(function(t){const r={mechanism:{data:{function:e,handler:Re(t)},handled:!1,type:"instrument"}},n=j(t);return n&&(r.mechanism.data.handler=Re(n)),Te(t,r)}))})),e.apply(this,t)}}function yt(e){const t=Ce,r=t[e]&&t[e].prototype;r&&r.hasOwnProperty&&r.hasOwnProperty("addEventListener")&&(M(r,"addEventListener",(function(t){return function(r,n,i){try{"function"==typeof n.handleEvent&&(n.handleEvent=Te(n.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Re(n),target:e},handled:!1,type:"instrument"}}))}catch(e){}return t.apply(this,[r,Te(n,{mechanism:{data:{function:"addEventListener",handler:Re(n),target:e},handled:!1,type:"instrument"}}),i])}})),M(r,"removeEventListener",(function(e){return function(t,r,n){const i=r;try{const r=i&&i.__sentry_wrapped__;r&&e.call(this,t,r,n)}catch(e){}return e.call(this,t,i,n)}})))}ft.__initStatic();const Et=["fatal","error","warning","log","info","debug"];function _t(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const r=t[6]||"",n=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:r,hash:n,relative:t[5]+r+n}}class St{static __initStatic(){this.id="Breadcrumbs"}constructor(e){this.name=St.id,this.options={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e}}setupOnce(){if(this.options.console&&je("console",Ct),this.options.dom&&je("dom",(e=this.options.dom,function(t){let r,n="object"==typeof e?e.serializeAttribute:void 0,i="object"==typeof e&&"number"==typeof e.maxStringLength?e.maxStringLength:void 0;i&&i>1024&&(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${i} was configured. Sentry will use 1024 instead.`),i=1024),"string"==typeof n&&(n=[n]);try{const e=t.event;r=function(e){return!!e&&!!e.target}(e)?b(e.target,{keyAttrs:n,maxStringLength:i}):b(e,{keyAttrs:n,maxStringLength:i})}catch(e){r="<unknown>"}0!==r.length&&_e().addBreadcrumb({category:`ui.${t.name}`,message:r},{event:t.event,name:t.name,global:t.global})})),this.options.xhr&&je("xhr",It),this.options.fetch&&je("fetch",Ot),this.options.history&&je("history",Tt),this.options.sentry){const e=_e().getClient();e&&e.on&&e.on("beforeSendEvent",At)}var e}}function At(e){_e().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:W(e)},{event:e})}function Ct(e){const t={category:"console",data:{arguments:e.args,logger:"console"},level:(r=e.level,"warn"===r?"warning":Et.includes(r)?r:"log"),message:x(e.args," ")};var r;if("assert"===e.level){if(!1!==e.args[0])return;t.message=`Assertion failed: ${x(e.args.slice(1)," ")||"console.assert"}`,t.data.arguments=e.args.slice(1)}_e().addBreadcrumb(t,{input:e.args,level:e.level})}function It(e){const{startTimestamp:t,endTimestamp:r}=e,n=e.xhr[ke];if(!t||!r||!n)return;const{method:i,url:o,status_code:s,body:a}=n,c={method:i,url:o,status_code:s},u={xhr:e.xhr,input:a,startTimestamp:t,endTimestamp:r};_e().addBreadcrumb({category:"xhr",data:c,type:"http"},u)}function Ot(e){const{startTimestamp:t,endTimestamp:r}=e;if(r&&(!e.fetchData.url.match(/sentry_key/)||"POST"!==e.fetchData.method))if(e.error){const n=e.fetchData,i={data:e.error,input:e.args,startTimestamp:t,endTimestamp:r};_e().addBreadcrumb({category:"fetch",data:n,level:"error",type:"http"},i)}else{const n={...e.fetchData,status_code:e.response&&e.response.status},i={input:e.args,response:e.response,startTimestamp:t,endTimestamp:r};_e().addBreadcrumb({category:"fetch",data:n,type:"http"},i)}}function Tt(e){let t=e.from,r=e.to;const n=_t(Ce.location.href);let i=_t(t);const o=_t(r);i.path||(i=n),n.protocol===o.protocol&&n.host===o.host&&(r=o.relative),n.protocol===i.protocol&&n.host===i.host&&(t=i.relative),_e().addBreadcrumb({category:"navigation",data:{from:t,to:r}})}function bt(e,t,r=250,n,i,o,s){if(!(o.exception&&o.exception.values&&s&&A(s.originalException,Error)))return;const a=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;var c,u;a&&(o.exception.values=(c=wt(e,t,i,s.originalException,n,o.exception.values,a,0),u=r,c.map((e=>(e.value&&(e.value=L(e.value,u)),e)))))}function wt(e,t,r,n,i,o,s,a){if(o.length>=r+1)return o;let c=[...o];if(A(n[i],Error)){Pt(s,a);const o=e(t,n[i]),u=c.length;Rt(o,i,u,a),c=wt(e,t,r,n[i],i,[o,...c],o,u)}return Array.isArray(n.errors)&&n.errors.forEach(((n,o)=>{if(A(n,Error)){Pt(s,a);const u=e(t,n),l=c.length;Rt(u,`errors[${o}]`,l,a),c=wt(e,t,r,n,i,[u,...c],u,l)}})),c}function Pt(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,is_exception_group:!0,exception_id:t}}function Rt(e,t,r,n){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:r,parent_id:n}}St.__initStatic();class Nt{static __initStatic(){this.id="LinkedErrors"}constructor(e={}){this.name=Nt.id,this._key=e.key||"cause",this._limit=e.limit||5}setupOnce(){}preprocessEvent(e,t,r){const n=r.getOptions();bt(Xe,n.stackParser,n.maxValueLength,this._key,this._limit,e,t)}}Nt.__initStatic();class Dt{static __initStatic(){this.id="HttpContext"}constructor(){this.name=Dt.id}setupOnce(){le((e=>{if(_e().getIntegration(Dt)){if(!Ce.navigator&&!Ce.location&&!Ce.document)return e;const t=e.request&&e.request.url||Ce.location&&Ce.location.href,{referrer:r}=Ce.document||{},{userAgent:n}=Ce.navigator||{},i={...e.request&&e.request.headers,...r&&{Referer:r},...n&&{"User-Agent":n}},o={...e.request,...t&&{url:t},headers:i};return{...e,request:o}}return e}))}}Dt.__initStatic();class Lt{static __initStatic(){this.id="Dedupe"}constructor(){this.name=Lt.id}setupOnce(e,t){const r=e=>{if(e.type)return e;const r=t().getIntegration(Lt);if(r){try{if(function(e,t){return!!t&&(!!function(e,t){const r=e.message,n=t.message;return!(!r&&!n)&&(!(r&&!n||!r&&n)&&(r===n&&(!!kt(e,t)&&!!xt(e,t))))}(e,t)||!!function(e,t){const r=Mt(t),n=Mt(e);return!(!r||!n)&&(r.type===n.type&&r.value===n.value&&(!!kt(e,t)&&!!xt(e,t)))}(e,t))}(e,r._previousEvent))return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(t){return r._previousEvent=e}return r._previousEvent=e}return e};r.id=this.name,e(r)}}function xt(e,t){let r=Ut(e),n=Ut(t);if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;if(n.length!==r.length)return!1;for(let e=0;e<n.length;e++){const t=n[e],i=r[e];if(t.filename!==i.filename||t.lineno!==i.lineno||t.colno!==i.colno||t.function!==i.function)return!1}return!0}function kt(e,t){let r=e.fingerprint,n=t.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;try{return!(r.join("")!==n.join(""))}catch(e){return!1}}function Mt(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Ut(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}}Lt.__initStatic();let Ht={};Ce.Sentry&&Ce.Sentry.Integrations&&(Ht=Ce.Sentry.Integrations);const jt={...Ht,...e,...t},Bt="?";function Gt(e,t,r,n){const i={filename:e,function:t,in_app:!0};return void 0!==r&&(i.lineno=r),void 0!==n&&(i.colno=n),i}const qt=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Ft=/\((\S*)(?::(\d+))(?::(\d+))\)/,Vt=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,zt=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Yt=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,$t=function(...e){const t=e.sort(((e,t)=>e[0]-t[0])).map((e=>e[1]));return(e,r=0)=>{const n=[],i=e.split("\n");for(let e=r;e<i.length;e++){const r=i[e];if(r.length>1024)continue;const o=be.test(r)?r.replace(be,"$1"):r;if(!o.match(/\S*Error: /)){for(const e of t){const t=e(o);if(t){n.push(t);break}}if(n.length>=50)break}}return function(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),we.test(t[t.length-1].function||"")&&(t.pop(),we.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,50).map((e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"})))}(n)}}([30,e=>{const t=qt.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Ft.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,r]=Kt(t[1]||Bt,t[2]);return Gt(r,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=Vt.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=zt.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],r=t[1]||Bt;return[r,e]=Kt(r,e),Gt(e,r,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=Yt.exec(e);return t?Gt(t[2],t[1]||Bt,+t[3],t[4]?+t[4]:void 0):void 0}]),Kt=(e,t)=>{const r=-1!==e.indexOf("safari-extension"),n=-1!==e.indexOf("safari-web-extension");return r||n?[-1!==e.indexOf("@")?e.split("@")[0]:Bt,r?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};class Wt extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}const Qt=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Zt(e,t=!1){const{host:r,path:n,pass:i,port:o,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:""}@${r}${o?`:${o}`:""}/${n?`${n}/`:n}${s}`}function Jt(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Xt(e,t=[]){return[e,t]}function er(e,t){const[r,n]=e;return[r,[...n,t]]}function tr(e,t){const r=e[1];for(const e of r)if(t(e,e[0].type))return!0;return!1}function rr(e,t){return(t||new TextEncoder).encode(e)}function nr(e,t){const[r,n]=e;let i=JSON.stringify(r);function o(e){"string"==typeof i?i="string"==typeof e?i+e:[rr(i,t),e]:i.push("string"==typeof e?rr(e,t):e)}for(const e of n){const[t,r]=e;if(o(`\n${JSON.stringify(t)}\n`),"string"==typeof r||r instanceof Uint8Array)o(r);else{let e;try{e=JSON.stringify(r)}catch(t){e=JSON.stringify(Qe(r))}o(e)}}return"string"==typeof i?i:function(e){const t=e.reduce(((e,t)=>e+t.length),0),r=new Uint8Array(t);let n=0;for(const t of e)r.set(t,n),n+=t.length;return r}(i)}function ir(e,t){const r="string"==typeof e.data?rr(e.data,t):e.data;return[F({type:"attachment",length:r.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),r]}const or={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor"};function sr(e){return or[e]}function ar(e){if(!e||!e.sdk)return;const{name:t,version:r}=e.sdk;return{name:t,version:r}}const cr=6e4;const ur=30;function lr(e,t,r=function(e){const t=[];function r(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(n){if(!(void 0===e||t.length<e))return ae(new Wt("Not adding Promise because buffer limit was reached."));const i=n();return-1===t.indexOf(i)&&t.push(i),i.then((()=>r(i))).then(null,(()=>r(i).then(null,(()=>{})))),i},drain:function(e){return new ce(((r,n)=>{let i=t.length;if(!i)return r(!0);const o=setTimeout((()=>{e&&e>0&&r(!1)}),e);t.forEach((e=>{se(e).then((()=>{--i||(clearTimeout(o),r(!0))}),n)}))}))}}}(e.bufferSize||ur)){let n={};function i(i){const o=[];if(tr(i,((t,r)=>{const i=sr(r);if(function(e,t,r=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>r}(n,i)){const n=dr(t,r);e.recordDroppedEvent("ratelimit_backoff",i,n)}else o.push(t)})),0===o.length)return se();const s=Xt(i[0],o),a=t=>{tr(s,((r,n)=>{const i=dr(r,n);e.recordDroppedEvent(t,sr(n),i)}))};return r.add((()=>t({body:nr(s,e.textEncoder)}).then((e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),n=function(e,{statusCode:t,headers:r},n=Date.now()){const i={...e},o=r&&r["x-sentry-rate-limits"],s=r&&r["retry-after"];if(o)for(const e of o.trim().split(",")){const[t,r]=e.split(":",2),o=parseInt(t,10),s=1e3*(isNaN(o)?60:o);if(r)for(const e of r.split(";"))i[e]=n+s;else i.all=n+s}else s?i.all=n+function(e,t=Date.now()){const r=parseInt(`${e}`,10);if(!isNaN(r))return 1e3*r;const n=Date.parse(`${e}`);return isNaN(n)?cr:n-t}(s,n):429===t&&(i.all=n+6e4);return i}(n,e),e)),(e=>{throw a("network_error"),e})))).then((e=>e),(e=>{if(e instanceof Wt)return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.error("Skipped sending event because buffer is full."),a("queue_overflow"),se();throw e}))}return i.__sentry__baseTransport__=!0,{send:i,flush:e=>r.drain(e)}}function dr(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}let hr;function pr(e,t=function(){if(hr)return hr;if(De(Ce.fetch))return hr=Ce.fetch.bind(Ce);const e=Ce.document;let t=Ce.fetch;if(e&&"function"==typeof e.createElement)try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r);const n=r.contentWindow;n&&n.fetch&&(t=n.fetch),e.head.removeChild(r)}catch(e){("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return hr=t.bind(Ce)}()){let r=0,n=0;return lr(e,(function(i){const o=i.body.length;r+=o,n++;const s={body:i.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:r<=6e4&&n<15,...e.fetchOptions};try{return t(e.url,s).then((e=>(r-=o,n--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}})))}catch(e){return hr=void 0,r-=o,n--,ae(e)}}))}const fr="7";function gr(e,t={}){const r="string"==typeof t?t:t.tunnel,n="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return r||`${function(e){return`${function(e){const t=e.protocol?`${e.protocol}:`:"",r=e.port?`:${e.port}`:"";return`${t}//${e.host}${r}${e.path?`/${e.path}`:""}/api/`}(e)}${e.projectId}/envelope/`}(e)}?${function(e,t){return r={sentry_key:e.publicKey,sentry_version:fr,...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(r).map((e=>`${encodeURIComponent(e)}=${encodeURIComponent(r[e])}`)).join("&");var r}(e,n)}`}const mr=[];function vr(e,t,r){if(r[t.name]=t,-1===mr.indexOf(t.name)&&(t.setupOnce(le,_e),mr.push(t.name)),e.on&&"function"==typeof t.preprocessEvent){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",((t,n)=>r(t,n,e)))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const r=t.processEvent.bind(t),n=Object.assign(((t,n)=>r(t,n,e)),{id:t.name});e.addEventProcessor(n)}("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.log(`Integration installed: ${t.name}`)}const yr=new WeakMap,Er="Not capturing exception because it's already been captured.";class _r{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=function(e){const t="string"==typeof e?function(e){const t=Qt.exec(e);if(!t)return void console.error(`Invalid Sentry Dsn: ${e}`);const[r,n,i="",o,s="",a]=t.slice(1);let c="",u=a;const l=u.split("/");if(l.length>1&&(c=l.slice(0,-1).join("/"),u=l.pop()),u){const e=u.match(/^\d+/);e&&(u=e[0])}return Jt({host:o,pass:i,path:c,projectId:u,port:s,protocol:r,publicKey:n})}(e):Jt(e);if(t&&function(e){if("undefined"!=typeof __SENTRY_DEBUG__&&!__SENTRY_DEBUG__)return!0;const{port:t,projectId:r,protocol:n}=e;return!(["protocol","publicKey","host","projectId"].find((t=>!e[t]&&(D.error(`Invalid Sentry Dsn: ${t} missing`),!0)))||(r.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(n)?t&&isNaN(parseInt(t,10))&&(D.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(D.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),1):(D.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),1)))}(t))return t}(e.dsn):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn("No DSN provided, client will not do anything."),this._dsn){const t=gr(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,r){if(J(e))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.log(Er));let n=t&&t.event_id;return this._process(this.eventFromException(e,t).then((e=>this._captureEvent(e,t,r))).then((e=>{n=e}))),n}captureMessage(e,t,r,n){let i=r&&r.event_id;const o=y(e)?this.eventFromMessage(String(e),t,r):this.eventFromException(e,r);return this._process(o.then((e=>this._captureEvent(e,r,n))).then((e=>{i=e}))),i}captureEvent(e,t,r){if(t&&t.originalException&&J(t.originalException))return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.log(Er));let n=t&&t.event_id;return this._process(this._captureEvent(e,t,r).then((e=>{n=e}))),n}captureSession(e){this._isEnabled()?"string"!=typeof e.release?("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),he(e,{init:!1})):("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn("SDK not enabled, will not capture session.")}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?this._isClientDoneProcessing(e).then((r=>t.flush(e).then((e=>r&&e)))):se(!0)}close(e){return this.flush(e).then((e=>(this.getOptions().enabled=!1,e)))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(){this._isEnabled()&&!this._integrationsInitialized&&(this._integrations=function(e,t){const r={};return t.forEach((t=>{t&&vr(e,t,r)})),r}(this,this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){vr(this,e,this._integrations)}sendEvent(e,t={}){if(this.emit("beforeSendEvent",e,t),this._dsn){let r=function(e,t,r,n){const i=ar(r),o=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,r&&r.sdk);const s=function(e,t,r,n){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!r&&{dsn:Zt(n)},...i&&{trace:F({...i})}}}(e,i,n,t);return delete e.sdkProcessingMetadata,Xt(s,[[{type:o},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const e of t.attachments||[])r=er(r,ir(e,this._options.transportOptions&&this._options.transportOptions.textEncoder));const n=this._sendEnvelope(r);n&&n.then((t=>this.emit("afterSendEvent",e,t)),null)}}sendSession(e){if(this._dsn){const t=function(e,t,r,n){const i=ar(r);return Xt({sent_at:(new Date).toISOString(),...i&&{sdk:i},...!!n&&{dsn:Zt(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}}recordDroppedEvent(e,t,r){if(this._options.sendClientReports){const r=`${e}:${t}`;("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.log(`Adding outcome: "${r}"`),this._outcomes[r]=this._outcomes[r]+1||1}}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach((e=>e(...t)))}_updateSessionFromEvent(e,t){let r=!1,n=!1;const i=t.exception&&t.exception.values;if(i){n=!0;for(const e of i){const t=e.mechanism;if(t&&!1===t.handled){r=!0;break}}}const o="ok"===e.status;(o&&0===e.errors||o&&r)&&(he(e,{...r&&{status:"crashed"},errors:e.errors||Number(n||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new ce((t=>{let r=0;const n=setInterval((()=>{0==this._numProcessing?(clearInterval(n),t(!0)):(r+=1,e&&r>=e&&(clearInterval(n),t(!1)))}),1)}))}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._dsn}_prepareEvent(e,t,r){const n=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),this.emit("preprocessEvent",e,t),function(e,t,r,n,i){const{normalizeDepth:o=3,normalizeMaxBreadth:s=1e3}=e,a={...t,event_id:t.event_id||r.event_id||$(),timestamp:t.timestamp||(0,ne.yW)()},c=r.integrations||e.integrations.map((e=>e.name));!function(e,t){const{environment:r,release:n,dist:i,maxValueLength:o=250}=t;"environment"in e||(e.environment="environment"in t?r:ie),void 0===e.release&&void 0!==n&&(e.release=n),void 0===e.dist&&void 0!==i&&(e.dist=i),e.message&&(e.message=L(e.message,o));const s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=L(s.value,o));const a=e.request;a&&a.url&&(a.url=L(a.url,o))}(a,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(a,c),void 0===t.type&&function(e,t){const r=I.n2._sentryDebugIds;if(!r)return;let n;const i=yr.get(t);i?n=i:(n=new Map,yr.set(t,n));const o=Object.keys(r).reduce(((e,i)=>{let o;const s=n.get(i);s?o=s:(o=t(i),n.set(i,o));for(let t=o.length-1;t>=0;t--){const n=o[t];if(n.filename){e[n.filename]=r[i];break}}return e}),{});try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.filename&&(e.debug_id=o[e.filename])}))}))}catch(e){}}(a,e.stackParser);let u=n;r.captureContext&&(u=pe.clone(u).update(r.captureContext));let l=se(a);if(u){if(u.getAttachments){const e=[...r.attachments||[],...u.getAttachments()];e.length&&(r.attachments=e)}l=u.applyToEvent(a,r)}return l.then((e=>i&&i.getEventProcessors?de(i.getEventProcessors(),e,r):e)).then((e=>(e&&function(e){const t={};try{e.exception.values.forEach((e=>{e.stacktrace.frames.forEach((e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)}))}))}catch(e){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;Object.keys(t).forEach((e=>{r.push({type:"sourcemap",code_file:e,debug_id:t[e]})}))}(e),"number"==typeof o&&o>0?function(e,t,r){if(!e)return null;const n={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((e=>({...e,...e.data&&{data:Qe(e.data,t,r)}})))},...e.user&&{user:Qe(e.user,t,r)},...e.contexts&&{contexts:Qe(e.contexts,t,r)},...e.extra&&{extra:Qe(e.extra,t,r)}};return e.contexts&&e.contexts.trace&&n.contexts&&(n.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(n.contexts.trace.data=Qe(e.contexts.trace.data,t,r))),e.spans&&(n.spans=e.spans.map((e=>(e.data&&(e.data=Qe(e.data,t,r)),e)))),n}(e,o,s):e)))}(n,e,t,r,this).then((e=>{if(null===e)return e;const{propagationContext:t}=e.sdkProcessingMetadata||{};if((!e.contexts||!e.contexts.trace)&&t){const{traceId:n,spanId:i,parentSpanId:o,dsc:s}=t;e.contexts={trace:{trace_id:n,span_id:i,parent_span_id:o},...e.contexts};const a=s||function(e,t,r){const n=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:o}=r&&r.getUser()||{},s=F({environment:n.environment||ie,release:n.release,user_segment:o,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",s),s}(n,this,r);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e}))}_captureEvent(e,t={},r){return this._processEvent(e,t,r).then((e=>e.event_id),(e=>{if("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__){const t=e;"log"===t.logLevel?D.log(t.message):D.warn(t)}}))}_processEvent(e,t,r){const n=this.getOptions(),{sampleRate:i}=n;if(!this._isEnabled())return ae(new Wt("SDK not enabled, will not capture event.","log"));const o=Ar(e),s=Sr(e),a=e.type||"error",c=`before send for type \`${a}\``;if(s&&"number"==typeof i&&Math.random()>i)return this.recordDroppedEvent("sample_rate","error",e),ae(new Wt(`Discarding event because it's not included in the random sample (sampling rate = ${i})`,"log"));const u="replay_event"===a?"replay":a;return this._prepareEvent(e,t,r).then((r=>{if(null===r)throw this.recordDroppedEvent("event_processor",u,e),new Wt("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return r;const i=function(e,t,r){const{beforeSend:n,beforeSendTransaction:i}=e;return Sr(t)&&n?n(t,r):Ar(t)&&i?i(t,r):t}(n,r,t);return function(e,t){const r=`${t} must return \`null\` or a valid event.`;if(S(e))return e.then((e=>{if(!E(e)&&null!==e)throw new Wt(r);return e}),(e=>{throw new Wt(`${t} rejected with ${e}`)}));if(!E(e)&&null!==e)throw new Wt(r);return e}(i,c)})).then((n=>{if(null===n)throw this.recordDroppedEvent("before_send",u,e),new Wt(`${c} returned \`null\`, will not send event.`,"log");const i=r&&r.getSession();!o&&i&&this._updateSessionFromEvent(i,n);const s=n.transaction_info;if(o&&s&&n.transaction!==e.transaction){const e="custom";n.transaction_info={...s,source:e}}return this.sendEvent(n,t),n})).then(null,(e=>{if(e instanceof Wt)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new Wt(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)}))}_process(e){this._numProcessing++,e.then((e=>(this._numProcessing--,e)),(e=>(this._numProcessing--,e)))}_sendEnvelope(e){if(this._transport&&this._dsn)return this.emit("beforeEnvelope",e),this._transport.send(e).then(null,(e=>{("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.error("Error while sending event:",e)}));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map((t=>{const[r,n]=t.split(":");return{reason:r,category:n,quantity:e[t]}}))}}function Sr(e){return void 0===e.type}function Ar(e){return"transaction"===e.type}const Cr="7.70.0";var Ir=r(4285);class Or extends _r{constructor(e){const t=Ce.SENTRY_SDK_SOURCE||(0,Ir.S)();e._metadata=e._metadata||{},e._metadata.sdk=e._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${t}:@sentry/browser`,version:Cr}],version:Cr},super(e),e.sendClientReports&&Ce.document&&Ce.document.addEventListener("visibilitychange",(()=>{"hidden"===Ce.document.visibilityState&&this._flushOutcomes()}))}eventFromException(e,t){return function(e,t,r,n){const i=it(e,t,r&&r.syntheticException||void 0,n);return Z(i),i.level="error",r&&r.event_id&&(i.event_id=r.event_id),se(i)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",r){return function(e,t,r="info",n,i){const o=ot(e,t,n&&n.syntheticException||void 0,i);return o.level=r,n&&n.event_id&&(o.event_id=n.event_id),se(o)}(this._options.stackParser,e,t,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.warn("SDK not enabled, will not capture user feedback."));const t=function(e,{metadata:t,tunnel:r,dsn:n}){const i={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!r&&!!n&&{dsn:Zt(n)}},o=function(e){return[{type:"user_report"},e]}(e);return Xt(i,[o])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,r)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.log("No outcomes to send"));if(!this._dsn)return void(("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.log("No dsn provided, will not send outcomes"));("undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__)&&D.log("Sending outcomes:",e);const t=function(e,t,r){return Xt(t?{dsn:t}:{},[[{type:"client_report"},{timestamp:(0,ne.yW)(),discarded_events:e}]])}(e,this._options.tunnel&&Zt(this._dsn));this._sendEnvelope(t)}}const Tr=-1;async function br(e,t,r=new Error("Promise timeout exceeded")){let n=Tr;const i=new Promise(((e,i)=>{n=window.setTimeout((()=>{i(r)}),t)})),o=await Promise.race([i,e()]);return window.clearTimeout(n),o}const wr=(e,t)=>Math.min(200*Math.pow(2,e-1)+Math.floor(1e3*Math.random()),t);class Pr extends Error{constructor(e,t,r){super(`Request timeout exceeded (attempts=${e}; duration=${t}ms; url=${r})`),this.name="HttpRequestTimeoutError",Object.setPrototypeOf(this,Pr.prototype)}}class Rr extends Error{constructor(e,t,r){super(`Invalid JSON received (status=${t}; url=${e})`),this.originalErrorMessage=r,this.name="HttpRequestInvalidJsonError",Object.setPrototypeOf(this,Rr.prototype)}}class Nr extends Error{constructor(e,t,r){super(`Network error during request (attempts=${e}; duration=${t}ms; url=${r})`),this.name="HttpRequestNetworkError",Object.setPrototypeOf(this,Nr.prototype)}}var Dr;function Lr(e,t){return{body:e,status:t.status,statusText:t.statusText}}function xr(e){const t=new Headers([["Accept","application/json"],["Content-Type","application/json; charset=utf-8"]]);for(const r in e){const n=e[r];void 0!==n&&t.set(r,n)}return t}async function kr(e,t,r=1,n=Date.now()){const i=Date.now()-n,{body:o,headers:s={},credentials:a="include",mode:c="cors",timeoutMs:u=1e4,maxAttempts:l=3,maxBackoffMs:d=32e3}=t;let h=null;void 0!==window.AbortController&&null!==window.AbortController&&(h=new window.AbortController);const p={...t,body:null!=o?JSON.stringify(o):null,credentials:a,headers:xr(s),mode:c,signal:h?h.signal:null};try{const t=await br(window.fetch.bind(null,e,p),u,new Pr(r,i,e));return await async function(e,t){let r={};const n=e.status;if(!(n<Dr.INTERNAL_SERVER_ERROR))return Lr(r,e);{let i;try{return n!==Dr.NO_CONTENT&&(r=await e.json()),Lr(r,e)}catch(r){if(r instanceof Error){const n=r.toString();try{i=await e.text(),i=`${i} ${n}`}catch{i=n}throw new Rr(t,e.status,i)}throw new Rr(t,e.status,JSON.stringify(r))}}}(t,e)}catch(o){if(o instanceof Pr)h?.abort();else{if(o instanceof Rr)throw o;if(r===l)throw new Nr(r,i,e)}if(r===l)throw o;const s=wr(r,d);return new Promise((i=>{setTimeout((()=>{i(kr(e,t,r+1,n))}),s)}))}}!function(e){e[e.BAD_REQUEST=400]="BAD_REQUEST",e[e.OK=200]="OK",e[e.CREATED=201]="CREATED",e[e.NO_CONTENT=204]="NO_CONTENT",e[e.NOT_FOUND=404]="NOT_FOUND",e[e.INTERNAL_SERVER_ERROR=500]="INTERNAL_SERVER_ERROR",e[e.SERVICE_UNAVAILABLE=503]="SERVICE_UNAVAILABLE",e[e.TOO_MANY_REQUESTS=429]="TOO_MANY_REQUESTS",e[e.UNAUTHORIZED=401]="UNAUTHORIZED"}(Dr||(Dr={}));const Mr=function(e,t){return kr(e,{...t,method:"POST"})};var Ur,Hr,jr,Br,Gr,qr,Fr,Vr,zr,Yr,$r,Kr,Wr,Qr,Zr,Jr,Xr;r(8836),r(1657),r(6708),r(7368),r(4069),r(4112),r(5940),function(e){e.API_ERROR="API_ERROR",e.AUTHENTICATION_ERROR="AUTHENTICATION_ERROR",e.INVALID_REQUEST_ERROR="INVALID_REQUEST_ERROR",e.RATE_LIMIT_ERROR="RATE_LIMIT_ERROR",e.PAYMENT_METHOD_ERROR="PAYMENT_METHOD_ERROR",e.REFUND_ERROR="REFUND_ERROR"}(Ur||(Ur={}));class en extends Error{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unknown Error",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=e;t.length>0&&(r=function(e,t){return"".concat(e,"\n  ").concat(t.map((e=>{switch(!0){case"message"in e:return e.message;case"detail"in e:return e.detail;default:return"[Unspecified Error]"}})).join("\n  "))}(e,t)),super(r),this.errors=t,this.name="SqError",Object.setPrototypeOf(this,en.prototype)}fromSerializedError(e){this.name=e.name,this.message=e.message,e.errors&&(this.errors=e.errors)}}class tn extends en{constructor(){super("The Payment 'applicationId' option is not in the correct format."),this.name="InvalidApplicationIdError",Object.setPrototypeOf(this,tn.prototype)}}class rn extends en{constructor(e,t){super("Web Payments SDK was initialized with an application ID created in ".concat(e," however you are currently using ").concat(t,".")),this.name="ApplicationIdEnvironmentMismatchError ",Object.setPrototypeOf(this,rn.prototype)}}class nn extends en{constructor(){super("Tokenization has failed. `accountHolderName` is a required option when calling ach.tokenize()"),this.name="PlaidMissingNameError",Object.setPrototypeOf(this,nn.prototype)}}class on extends en{constructor(){super("You cannot call `tokenize` when using an `onTokenize` callback"),this.name="AfterpayOnTokenizeListenerError",Object.setPrototypeOf(this,on.prototype)}}class sn extends en{constructor(e,t){super("This instance of ".concat(e," is missing the ").concat(t," listener.")),this.name="PaymentMethodMissingListener",Object.setPrototypeOf(this,sn.prototype)}}class an extends en{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("The payment request used for Afterpay/Clearpay caused a failure",e),this.errors=e,this.name="AfterpayRequestError",Object.setPrototypeOf(this,an.prototype)}}class cn extends en{constructor(){super("The amount is outside of the merchant's Afterpay payment limits."),this.name="AfterpayAmountOutsideLimitsError",Object.setPrototypeOf(this,cn.prototype)}}class un extends en{constructor(){super("The currency provided is not supported for use with Afterpay/Clearpay"),this.name="AfterpayUnsupportedCurrencyError",Object.setPrototypeOf(this,un.prototype)}}class ln extends en{constructor(){super("Afterpay/Clearpay is not enabled for this merchant."),this.name="AfterpayMerchantError",Object.setPrototypeOf(this,ln.prototype)}}class dn extends en{constructor(e){super(e),this.name="AfterpayInvalidPaymentRequestError",Object.setPrototypeOf(this,dn.prototype)}}class hn extends en{constructor(e){super("An issue occurred while verifying the buyer",[e]),this.name="VerifyBuyerError",Object.setPrototypeOf(this,hn.prototype)}}class pn extends en{constructor(e){var t=e instanceof HTMLElement?e.nodeName:e;super("The element ".concat(t," was not found")),this.name="ElementNotFoundError",Object.setPrototypeOf(this,pn.prototype)}}class fn extends en{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("Please ensure you call payments.paymentRequest (https://developer.squareup.com/reference/sdks/web/payments#Payments.paymentRequest) with the appropriate options.\n".concat(e)),this.name="InvalidPaymentRequestError",Object.setPrototypeOf(this,fn.prototype)}}class gn extends en{constructor(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("\n".concat(e)),this.name="InvalidPaymentRequestUpdateError",Object.setPrototypeOf(this,gn.prototype)}}class mn extends en{constructor(e,t){super("The callback provided to the event listener ".concat(e," threw an error with message: ").concat(t)),this.name="InvalidEventListenerCallbackError",Object.setPrototypeOf(this,mn.prototype)}}class vn extends en{constructor(e){super("option: '".concat(e,"'")),this.name="InvalidOptionError",Object.setPrototypeOf(this,vn.prototype)}}r(7890),function(e){e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.CARD_BRAND_CHANGED="cardBrandChanged",e.POSTAL_CODE_CHANGED="postalCodeChanged",e.ESCAPE="escape",e.SUBMIT="submit"}(Hr||(Hr={})),function(e){e.CARD_NUMBER="cardNumber",e.CVV="cvv",e.EXPIRATION_DATE="expirationDate",e.POSTAL_CODE="postalCode"}(jr||(jr={})),function(e){e.CARD_INPUT="input",e.CARD_INPUT_FOCUS="input.is-focus",e.CARD_INPUT_PLACEHOLDER="input::placeholder",e.CARD_INPUT_FOCUS_PLACEHOLDER="input.is-focus::placeholder",e.CARD_INPUT_ERROR="input.is-error",e.CARD_INPUT_ERROR_PLACEHOLDER="input.is-error::placeholder",e.CARD_COMPONENT=".input-container",e.CARD_COMPONENT_FOCUS=".input-container.is-focus",e.CARD_COMPONENT_ERROR=".input-container.is-error",e.CARD_INPUT_HELPER_TEXT=".message-text",e.CARD_INPUT_HELPER_ICON=".message-icon",e.CARD_INPUT_ERROR_TEXT=".message-text.is-error",e.CARD_INPUT_ERROR_ICON=".message-icon.is-error"}(Br||(Br={})),function(e){e.GIFT_CARD_NUMBER="giftCardNumber"}(Gr||(Gr={})),function(e){e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.CARD_BRAND_CHANGED="cardBrandChanged",e.ESCAPE="escape",e.SUBMIT="submit"}(qr||(qr={})),function(e){e.UNKNOWN="Unknown"}(Fr||(Fr={})),function(e){e.GIFT="Gift"}(Vr||(Vr={}));class yn extends en{constructor(e){super("".concat(e," is not a valid field name. Valid field names are ").concat([...Object.values(jr),...Object.values(Gr)].join(", "))),this.name="InvalidFieldNameError",Object.setPrototypeOf(this,yn.prototype)}}class En extends en{constructor(e){super("Configuration property '".concat(e,"' is invalid")),this.name="InvalidConfigurationPropertyError",Object.setPrototypeOf(this,En.prototype)}}class _n extends en{constructor(e,t,r){super("Configuration property '".concat(e,"' has an invalid value '").concat(t,"'.").concat(r?" ".concat(r,"."):"")),this.name="InvalidConfigurationValueError",Object.setPrototypeOf(this,_n.prototype)}}class Sn extends en{constructor(e){var t=e.map((e=>{var[t,r]=e;return'expected property: "'.concat(t,'" of type "').concat(r,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldTypes",Object.setPrototypeOf(this,Sn.prototype)}}class An extends en{constructor(e){var t=e.map((e=>{var[t,r]=e;return'accepted property: "'.concat(t,'" values are "').concat(r,'"')})).join("\n");super("\n".concat(t)),this.name="InvalidCashAppPayV1OptionsFieldValues",Object.setPrototypeOf(this,An.prototype)}}class Cn extends en{constructor(e){super(e),this.name="CashAppPayInvalidPaymentRequestError",Object.setPrototypeOf(this,Cn.prototype)}}class In extends en{constructor(){super("A redirect url is always required for requests. This must also be a secure link."),this.name="CashAppPayMissingRedirectUrlError",Object.setPrototypeOf(this,In.prototype)}}class On extends en{constructor(){super("Non function passed as shouldTokenize checker"),this.name="CashAppPayInvalidShouldTokenizeError",Object.setPrototypeOf(this,On.prototype)}}class Tn extends en{constructor(e,t){super("amount '".concat(e,"' in ").concat(t," is not expressed in a valid format")),this.name="InvalidCurrencyFormatError",Object.setPrototypeOf(this,Tn.prototype)}}class bn extends en{constructor(e){super("The ".concat(e," feature is not enabled for this application.")),this.name="FeatureDisabledError",Object.setPrototypeOf(this,bn.prototype)}}class wn extends en{constructor(){super("Web Payments SDK does not support this browser"),this.name="BrowserNotSupportedError",Object.setPrototypeOf(this,wn.prototype)}}class Pn extends en{constructor(){super("Web Payments SDK can only be embedded on sites that use HTTPS"),this.name="WebSdkEmbedError",Object.setPrototypeOf(this,Pn.prototype)}}class Rn extends en{constructor(e,t){var r=t||(null==e?void 0:e.field);super("Method unsupported: ".concat(null==e?void 0:e.message).concat(r?" (field=".concat(r,")"):"")),this.name="PaymentMethodUnsupportedError",Object.setPrototypeOf(this,Rn.prototype)}}class Nn extends en{constructor(e){super("This instance of ".concat(e," has already been attached to the page.")),this.name="PaymentMethodAlreadyAttachedError",Object.setPrototypeOf(this,Nn.prototype)}}class Dn extends en{constructor(e){super("".concat(e," has not been attached to the page. It must be attached before you can call this method.")),this.name="PaymentMethodNotAttachedError",Object.setPrototypeOf(this,Dn.prototype)}}class Ln extends en{constructor(e){super("This instance of ".concat(e," has already been destroyed.")),this.name="PaymentMethodAlreadyDestroyedError",Object.setPrototypeOf(this,Ln.prototype)}}class xn extends en{constructor(e,t){var r=e instanceof HTMLElement?e.nodeName:e;super("The value ".concat(r," is not a valid element type or selector. Only valid elements or selectors referring to ").concat([...t].join(", ")," elements are allowed.")),this.name="InvalidElementTypeError",Object.setPrototypeOf(this,xn.prototype)}}class kn extends en{constructor(e,t){super("An element with one of the following conflicting IDs was found on the page: ".concat(t,". You must change those elements' ID before you can use ").concat(e)),this.name="InvalidElementPresentError",Object.setPrototypeOf(this,kn.prototype)}}class Mn extends en{constructor(){super("Method is not enabled for this app."),this.name="MethodNotAvailableError",Object.setPrototypeOf(this,Mn.prototype)}}class Un extends en{constructor(e){super(e),this.name="ScriptLoaderError",Object.setPrototypeOf(this,Un.prototype)}}class Hn extends en{constructor(e){super("Invalid style property '".concat(e,"'.")),this.name="InvalidInputStylePropertyError",Object.setPrototypeOf(this,Hn.prototype)}}class jn extends en{constructor(e,t){super("Invalid style value '".concat(t,"' for property '").concat(e,"'.")),this.name="InvalidInputStyleValueError",Object.setPrototypeOf(this,jn.prototype)}}class Bn extends en{constructor(e){super("Invalid style selector '".concat(e,"'.")),this.name="InvalidInputStyleSelectorError",Object.setPrototypeOf(this,Bn.prototype)}}class Gn extends en{constructor(e){super("One or more style selectors and/or CSS properties are invalid",e),this.errors=e,this.name="InvalidStylesError",Object.setPrototypeOf(this,Gn.prototype)}}class qn extends en{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Tokenization has failed",e),this.errors=e,this.name="TokenizationError",Object.setPrototypeOf(this,qn.prototype)}}class Fn extends en{constructor(e){var t="An unexpected error occurred";e&&(t+=" while ".concat(e)),super("".concat(t,".")),this.name="UnexpectedError",Object.setPrototypeOf(this,Fn.prototype)}}!function(e){e.ON_TOKENIZATION="ontokenization",e.CLOSE_OAUTH="CLOSE_OAUTH",e.ERROR="ERROR",e.EXIT="EXIT",e.FAIL_OAUTH="FAIL_OAUTH",e.HANDOFF="HANDOFF",e.MATCHED_SELECT_INSTITUTION="MATCHED_SELECT_INSTITUTION",e.MATCHED_SELECT_VERIFY_METHOD="MATCHED_SELECT_VERIFY_METHOD",e.OPEN="OPEN",e.OPEN_MY_PLAID="OPEN_MY_PLAID",e.OPEN_OAUTH="OPEN_OAUTH",e.SEARCH_INSTITUTION="SEARCH_INSTITUTION",e.SELECT_BRAND="SELECT_BRAND",e.SELECT_INSTITUTION="SELECT_INSTITUTION",e.SUBMIT_CREDENTIALS="SUBMIT_CREDENTIALS",e.SUBMIT_MFA="SUBMIT_MFA",e.TRANSITION_VIEW="TRANSITION_VIEW"}(zr||(zr={})),function(e){e.BLACK="black",e.GREEN="mint",e.MINT="mint"}(Yr||(Yr={})),function(e){e.CheckoutWithAfterpay="checkout_with_afterpay",e.BuyNowWithAfterpay="buy_now_with_afterpay",e.PlaceOrderWithAfterpay="place_order_with_afterpay"}($r||($r={})),function(e){e.REVIEW_MY_ORDER="review_my_order",e.BUY_NOW="buy_now"}(Kr||(Kr={})),function(e){e.BLACK_ON_MINT="black-on-mint",e.BLACK_ON_WHITE="black-on-white",e.MINT_ON_BLACK="mint-on-black",e.WHITE_ON_BLACK="white-on-black"}(Wr||(Wr={})),function(e){e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg"}(Qr||(Qr={})),function(e){e.CIRCLED_INFO_ICON="circled-info-icon",e.CIRCLED_QUESTION_ICON="circled-question-icon",e.LEARN_MORE_TEXT="learn-more-text",e.MORE_INFO_TEXT="more-info-text",e.NONE="none"}(Zr||(Zr={})),function(e){e.MINT="mint",e.WHITE="white"}(Jr||(Jr={})),function(e){e.AFTERPAY_SHIPPING_ADDRESS_CHANGED="afterpay_shippingaddresschanged",e.AFTERPAY_SHIPPING_OPTION_CHANGED="afterpay_shippingoptionchanged"}(Xr||(Xr={}));var Vn,zn,Yn,$n,Kn,Wn,Qn,Zn,Jn,Xn,ei,ti,ri,ni,ii,oi,si,ai=["borderColor","borderRadius","borderWidth"],ci=["borderColor","borderWidth"],ui=["color"],li=["color"];!function(e){e.UNKNOWN="OTHER_BRAND",e.AMERICAN_EXPRESS="AMERICAN_EXPRESS",e.DINERS_CLUB="DISCOVER_DINERS",e.DISCOVER="DISCOVER",e.JCB="JCB",e.MASTERCARD="MASTERCARD",e.UNION_PAY="CHINA_UNIONPAY",e.VISA="VISA"}(Vn||(Vn={})),function(e){e.UNKNOWN_CARD_TYPE="UNKNOWN_CARD_TYPE",e.CREDIT="CREDIT",e.DEBIT="DEBIT"}(zn||(zn={})),function(e){e.UNKNOWN_PAYMENT_TYPE="UNKNOWN_PREPAID_TYPE",e.NOT_PREPAID="NOT_PREPAID",e.PREPAID="PREPAID"}(Yn||(Yn={})),function(e){e.LIGHT="light",e.DARK="dark"}($n||($n={})),function(e){e.SQUARED="Squared",e.SEMIROUNDED="Semirounded",e.ROUNDED="Rounded"}(Kn||(Kn={})),function(e){e.ROUND="round",e.SEMIROUND="semiround"}(Wn||(Wn={})),function(e){e.MEDIUM="medium",e.SMALL="small"}(Qn||(Qn={})),function(e){e.DARK="dark",e.LIGHT="light"}(Zn||(Zn={})),function(e){e.FULL="full",e.STATIC="static"}(Jn||(Jn={})),function(e){e.ONTOKENIZATION="ontokenization",e.CUSTOMER_INTERACTION="customerInteraction",e.CUSTOMER_DISMISSED="customerDismissed"}(Xn||(Xn={})),function(e){e.DEFAULT="default",e.BLACK="black",e.WHITE="white"}(ei||(ei={})),function(e){e.STATIC="static",e.FILL="fill"}(ti||(ti={})),function(e){e.LONG="long",e.SHORT="short"}(ri||(ri={})),function(e){e.PAYMENT_METHOD_DESTROYED="PAYMENT_METHOD_DESTROYED",e.SHIPPING_ADDRESS_UNSERVICEABLE="SHIPPING_ADDRESS_UNSERVICEABLE",e.SHIPPING_ADDRESS_INVALID="SHIPPING_ADDRESS_INVALID"}(ni||(ni={})),function(e){e.APPLE_PAY="Apple Pay",e.AFTERPAY_CLEARPAY="AfterpayClearpay",e.CARD="Card",e.CASH_APP="Cash App",e.GOOGLE_PAY="Google Pay",e.GIFT_CARD="Gift Card",e.ACH="ACH",e.CASH_APP_PAY="Cash App Pay"}(ii||(ii={})),function(e){e.SHIPPING_CONTACT_CHANGED="shippingcontactchanged",e.SHIPPING_OPTION_CHANGED="shippingoptionchanged"}(oi||(oi={}));class di{constructor(e,t){this.type=e,this.detail=t,this.type=e,this.detail=t}}function hi(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.entries(t).map((e=>{var[t,r]=e;return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r))})).join("&");return encodeURI(e)+(r.length>0?"?".concat(r):"")}!function(e){e.UNKNOWN="Unknown",e.OK="OK",e.ERROR="Error",e.INVALID="Invalid",e.ABORT="Abort",e.CANCEL="Cancel"}(si||(si={}));var pi=new RegExp(/^[\w.-]+$/i),fi=new RegExp(/sq0at/i);function gi(e){return d.env===e}function mi(){return gi(s.production)}var vi=Ei(60),yi=_i(60);function Ei(e){return 1e3*e}function _i(e){return e*vi}var Si={hoursToMs:function(e){return e*yi},minutesToMs:_i,msToSeconds:function(e){return e/1e3},secondsToMs:Ei},Ai=/^_/g,Ci=/(?!^)([A-Z])/g,Ii=/[\s_]+(?=[A-Za-z])/g;function Oi(e){return"JPY"===e.toUpperCase()?0:2}var Ti,bi,wi,Pi,Ri,Ni={convertLocaleToUnderscore:function(e){return e.replace(/-/,"_")},cssProperty:function(e){return e.replace(Ai,"-").replace(Ci," $1").replace(Ii,"-").toLowerCase()},delay:function(e){return new Promise((t=>setTimeout(t,e)))},decimalPlaces:Oi,formatCSSKeyValuePair:function(e,t){return"".concat(e,": ").concat(t,";")},enumValues:function(e){return Object.keys(e).map((t=>e[t])).filter((function(e){return"string"==typeof e}))},isInstanceOf:function(e,t){return t.some((function(t){return e instanceof t}))},isStaging:function(){return gi(s.staging)},isProduction:mi,isValidUrl:function(e){try{return new URL(e),!0}catch(e){return!1}},requestId:function(){return Date.now()+Number.parseFloat(Math.random().toFixed(8))},url:hi,versionedUrl:function(e){return hi(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})},paymentRequestAmountToMoneyAmount:function(e,t){var r=Oi(t),n="^(-?[0-9]+)";r>0&&(n="".concat(n,"(?:\\.([0-9]{1,").concat(r,"})[0-9]*)?")),n="".concat(n,"$");var i=e.match(n);if(!i)throw new Tn(e,t);var o=i[1];if(r>0){var s=i[2]||"";o=o+s+"0".repeat(r-s.length)}return Number(o)},moneyAmountToPaymentRequestAmount:function(e,t){var r=Oi(t);return(e/Math.pow(10,r)).toFixed(r)},moneyAmountToInternationalizedCurrency:function(e,t,r){var n=Oi(t),i=e/Math.pow(10,n);return new Intl.NumberFormat(r,{currency:t,style:"currency"}).format(i)}};!function(e){e.AnalyticsBackend="analytics_backend",e.CanUseOverrideStrings="can_use_override_strings",e.CanUseInterac="can_use_interac",e.CanUseAchAuth="can_use_ach_auth",e.CanUseBNPLA="can_use_bnpl_a",e.ClientLogLevel="client_log_level",e.RecordErrorMetrics="record_error_metrics"}(Ti||(Ti={})),function(e){e.Control="C",e.TreatmentA="T1"}(bi||(bi={})),function(e){e.NoSupport="NO_SUPPORT",e.Supported="SUPPORTED",e.Required="REQUIRED",e.Legacy="LEGACY"}(wi||(wi={})),function(e){e.Inline="INLINE",e.ScriptLoadLegacy="SCRIPT_LOAD",e.ScriptLoadBackend="SCRIPT_LOAD_BACKEND"}(Pi||(Pi={})),function(e){e.None="NONE",e.Debug="DEBUG"}(Ri||(Ri={}));var Di,Li,xi=d.SENTRY_DSN;class ki{constructor(e){var t;t=e.useGlobalHandlers?new jt.GlobalHandlers:new jt.GlobalHandlers({onerror:!1,onunhandledrejection:!1});var r=[new te,new Y,new jt.TryCatch,new jt.Breadcrumbs,t,new jt.LinkedErrors,new jt.HttpContext],n={beforeSend:(t,r)=>{var n;if(!e.enableErrorLogging)return console.error(t.exception),null!==(n=t.exception)&&void 0!==n&&n.values&&t.exception.values.forEach((e=>{console.error(e)})),null;if(!r)return t;var i=r.originalException;if(void 0!==this.featureFlagHandler&&this.featureFlagHandler.isActive(Ti.RecordErrorMetrics)){var o=null==i?void 0:i.toString();i instanceof Error&&(o=i.stack);var s="applicationID: ".concat(e.applicationId,", url: ").concat(e.applicationUrl,", source: ").concat(e.sourceName,", error: ").concat(o);Mr(d.METRICS_ERROR_URL,{body:{sdk_version:d.VERSION,error_message:s||""}}).catch((()=>{}))}return t},dsn:xi,environment:e.environment,integrations:r,release:"web-payments-sdk@".concat(d.VERSION),stackParser:$t,transport:e.transport||pr},i=new Or(n);this.hub=new ve(i),this.hub.configureScope((t=>{t.setTag("applicationId",e.applicationId),t.setTag("applicationUrl",e.applicationUrl),t.setTag("source",e.sourceName),t.setTag("version",e.version)})),e.useGlobalHandlers&&Ee(this.hub)}setFeatureFlagHandler(e){this.featureFlagHandler=e}setAvt(e){this.hub.setUser({id:e}),this.hub.configureScope((t=>{t.setTag("avt",e)}))}setSessionId(e){this.hub.configureScope((t=>{t.setTag("sessionId",e)}))}setInstanceId(e){this.hub.configureScope((t=>{t.setTag("instanceId",e)}))}captureException(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Ni.isInstanceOf(e,[Nr,Pr])||(e instanceof Rr&&this.hub.addBreadcrumb({category:"invalid json error message",message:e.originalErrorMessage,level:"info"}),this.hub.withScope((r=>{Object.entries(t).forEach((e=>{var[t,n]=e;r.setTag(t,n)})),this.hub.captureException(e)})))}}!function(e){e.INVALID_APPLICATION_ID="INVALID_APPLICATION_ID",e.INVALID_CARD_NUMBER="INVALID_CARD_NUMBER",e.INVALID_CVV="INVALID_CVV",e.INVALID_EXPIRATION_DATE="INVALID_EXPIRATION_DATE",e.INVALID_POSTAL_CODE="INVALID_POSTAL_CODE",e.INVALID_SANDBOX_CARD_NUMBER="INVALID_SANDBOX_CARD_NUMBER",e.INVALID_STAGING_CARD_NUMBER="INVALID_STAGING_CARD_NUMBER",e.MISSING_APPLICATION_ID="MISSING_APPLICATION_ID",e.MISSING_CARD_DATA="MISSING_CARD_DATA",e.UNKNOWN="UNKNOWN",e.UNSUPPORTED_CARD_BRAND="UNSUPPORTED_CARD_BRAND"}(Di||(Di={})),function(e){e.UNKNOWN="UNKNOWN"}(Li||(Li={}));var Mi,Ui={[Li.UNKNOWN]:{message:"An unknown error has occurred",type:"UNKNOWN"}};!function(e){e.EXPIRED_PLAID_SESSION="EXPIRED_PLAID_SESSION",e.INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID="INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID",e.UNKNOWN="UNKNOWN"}(Mi||(Mi={}));var Hi,ji,Bi={EXPIRED_PLAID_SESSION:{message:"The plaid session was expired. Please try again.",type:"EXPIRED_PLAID_SESSION"},INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID:{message:"Invalid plaid bank account id selected",type:"INVALID_SELECTED_PLAID_BANK_ACCOUNT_ID"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"}},Gi={INVALID_APPLICATION_ID:{message:"Invalid applicationId",type:"INVALID_APPLICATION_ID"},INVALID_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid",type:"VALIDATION_ERROR"},INVALID_CVV:{field:"cvv",message:"CVV is not valid",type:"VALIDATION_ERROR"},INVALID_EXPIRATION_DATE:{field:"expirationDate",message:"Expiration date is not valid",type:"VALIDATION_ERROR"},INVALID_POSTAL_CODE:{field:"postalCode",message:"Postal code is not valid",type:"VALIDATION_ERROR"},INVALID_SANDBOX_CARD_NUMBER:{field:"cardNumber",message:"Credit card number is not valid for sandbox use. Please use one of the test numbers documented at https://developer.squareup.com/docs/testing/test-values.",type:"VALIDATION_ERROR"},INVALID_STAGING_CARD_NUMBER:{field:"cardNumber",message:"Card number is not allowed in Staging. See: https://go/panfake-ui",type:"VALIDATION_ERROR"},MISSING_APPLICATION_ID:{message:"Missing applicationId",type:"MISSING_APPLICATION_ID"},MISSING_CARD_DATA:{message:"Missing card data",type:"MISSING_CARD_DATA"},UNKNOWN:{message:"An unknown error has occurred",type:"UNKNOWN"},UNSUPPORTED_CARD_BRAND:{field:"cardNumber",message:"Card not supported",type:"UNSUPPORTED_CARD_BRAND"}};!function(e){e.INVALID_VALUE="INVALID_VALUE",e.MISSING_LOCATION_ID_OR_NAME="MISSING_LOCATION_ID_OR_NAME",e.NOT_FOUND="NOT_FOUND",e.UNKNOWN="UNKNOWN"}(Hi||(Hi={}));class qi extends en{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super("Internal Validation Error",e),this.errors=e,this.name="InternalValidationError",Object.setPrototypeOf(this,qi.prototype)}}function Fi(){return new qn([Gi.UNKNOWN])}!function(e){e.INTERNAL_SERVER_ERROR="INTERNAL_SERVER_ERROR",e.NOT_FOUND="NOT_FOUND",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE",e.TOO_MANY_REQUESTS="TOO_MANY_REQUESTS",e.UNAUTHORIZED="UNAUTHORIZED",e.UNKNOWN="UNKNOWN"}(ji||(ji={}));var Vi={message:"An internal error has occurred. Unable to complete the request.",type:"INTERNAL_SERVER_ERROR"},zi={message:"The requested resource was not found.",type:"NOT_FOUND"},Yi={message:"The endpoint is currently unavailable.",type:"SERVICE_UNAVAILABLE"},$i={message:"Too many requests in progress.",type:"TOO_MANY_REQUESTS"},Ki={message:"Request not authorized.",type:"UNAUTHORIZED"},Wi={message:"An unknown error has occurred",type:"UNKNOWN"};class Qi extends en{constructor(e){super(e),this.name="InternalError",Object.setPrototypeOf(this,Qi.prototype)}}class Zi extends en{constructor(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=function(e){switch(e){case Dr.UNAUTHORIZED:return Ki;case Dr.NOT_FOUND:return zi;case Dr.TOO_MANY_REQUESTS:return $i;case Dr.INTERNAL_SERVER_ERROR:return Vi;case Dr.SERVICE_UNAVAILABLE:return Yi;default:return Wi}}(t);super("".concat(i.message," (message=").concat(r,"; url=").concat(e,")"),n),this.name="InternalHttpError",Object.setPrototypeOf(this,Zi.prototype)}}class Ji extends en{constructor(e,t){super("".concat(e," (payment_method=").concat(t,")")),this.name="InternalPaymentMethodError",Object.setPrototypeOf(this,Ji.prototype)}}class Xi extends en{constructor(e,t,r){super("Request timeout exceeded (attempts=".concat(e,"; duration=").concat(t,"ms; url=").concat(r,")")),this.name="InternalTimeoutError",Object.setPrototypeOf(this,Xi.prototype)}}function eo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function to(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(r),!0).forEach((function(t){ro(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ro(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var no={HttpRequestTimeoutError:Pr,HttpRequestInvalidJsonError:Rr,HttpRequestNetworkError:Nr,InternalError:Qi,InternalHttpError:Zi,InternalPaymentMethodError:Ji,InternalTimeoutError:Xi,InternalValidationError:qi};function io(e){return Object.values(no).some((t=>e instanceof t))}var oo,so,ao,co,uo,lo,ho,po,fo,go={AfterpayAmountOutsideLimitsError:cn,AfterpayMerchantError:ln,AfterpayRequestError:an,AfterpayUnsupportedCurrencyError:un,BrowserNotSupportedError:wn,ElementNotFoundError:pn,InvalidCurrencyFormatError:Tn,InvalidElementTypeError:xn,InvalidEventListenerCallbackError:mn,InvalidOptionError:vn,InvalidPaymentRequestError:fn,InvalidPaymentRequestUpdateError:gn,PaymentMethodUnsupportedError:Rn,PlaidMissingNameError:nn,ScriptLoaderError:Un,TokenizationError:qn,UnexpectedError:Fn,VerifyBuyerError:hn,WebSdkEmbedError:Pn},mo=to(to(to({},go),no),{},{AfterpayInvalidPaymentRequestError:dn,AfterpayOnTokenizeListenerError:on,InvalidApplicationIdError:tn,InvalidInputStylePropertyError:Hn,InvalidInputStyleValueError:jn,InvalidStylesError:Gn,PaymentMethodAlreadyAttachedError:Nn,PaymentMethodAlreadyDestroyedError:Ln,PaymentMethodMissingListener:sn,PaymentMethodNotAttachedError:Dn,SqError:en}),vo=/[$()*+.?[\\\]^{|}]/g,yo=new RegExp(vo.source),Eo=function(e){return e&&yo.test(e)?e.replace(vo,"\\$&"):e||""};!function(e){e.AttachStart="ATTACH:START",e.AttachOK="ATTACH:OK",e.AttachError="ATTACH:ERROR",e.BuildStart="BUILD:START",e.BuildOK="BUILD:OK",e.BuildError="BUILD:ERROR",e.ACHAuthStart="ACH_AUTH:START",e.ACHAuthOk="ACH_AUTH:OK",e.ACHAuthError="ACH_AUTH:ERROR",e.ACHAuthCanceled="ACH_AUTH:CANCEL",e.CashAppAPICustomerStart="CASH_APP_API_CUSTOMER:START",e.CashAppAPICustomerOK="CASH_APP_API_CUSTOMER:OK",e.CashAppAPICustomerError="CASH_APP_API_CUSTOMER:ERROR",e.CashAppAuthStart="CASH_APP_AUTH:START",e.CashAppAuthOK="CASH_APP_AUTH:OK",e.CashAppAuthError="CASH_APP_AUTH:ERROR",e.CashAppPayClickValidating="CASH_APP_PAY_CLICK:VALIDATING",e.CashAppPayClickInvalid="CASH_APP_PAY_CLICK:INVALID",e.CashAppPayClickError="CASH_APP_PAY_CLICK:ERROR",e.CashAppPayAuthStart="CASH_APP_PAY_AUTH:START",e.FirstInteraction="FIRST_INTERACTION:OK",e.GetProductInformationStart="GET_PRODUCT_INFORMATION:START",e.GetProductInformationOK="GET_PRODUCT_INFORMATION:OK",e.GetProductInformationError="GET_PRODUCT_INFORMATION:ERROR",e.InitializeStart="INITIALIZATION:START",e.InitializeOK="INITIALIZATION:OK",e.InitializeError="INITIALIZATION:ERROR",e.LoadOK="LOAD:OK",e.MainIframeOK="MAIN_IFRAME:OK",e.NonceStart="NONCE:START",e.NonceOK="NONCE:OK",e.NonceError="NONCE:ERROR",e.VerificationStart="VERIFICATION:START",e.VerificationOK="VERIFICATION:OK",e.VerificationError="VERIFICATION:ERROR",e.AchMissingRequiredOAuthParameters="ACH_MISSING_REQUIRED_OAUTH_PARAMETERS"}(oo||(oo={})),function(e){e.ExternalSessionStart="EXTERNAL_SESSION:START",e.ExternalSessionOK="EXTERNAL_SESSION:OK",e.ExternalSessionError="EXTERNAL_SESSION:ERROR",e.ExternalSessionCancel="EXTERNAL_SESSION:CANCEL",e.ShippingAddressChangeOK="SHIPPING_ADDRESS_CHANGE:OK",e.ShippingOptionChangeOK="SHIPPING_OPTION_CHANGE:OK",e.AfterpayCreateCheckoutStart="AFTERPAY_CREATE_CHECKOUT:START",e.AfterpayCreateCheckoutOK="AFTERPAY_CREATE_CHECKOUT:OK",e.AfterpayCreateCheckoutError="AFTERPAY_CREATE_CHECKOUT:ERROR"}(so||(so={})),function(e){e.Clear="CLEAR",e.ConfigUpdated="CONFIG_UPDATED",e.Configured="CONFIGURED",e.Destroyed="DESTROYED",e.Detached="DETACHED",e.EventListenerAdded="EVENT_LISTENER_ADDED",e.EventListenerOnCompleteResponse="EVENT_LISTENER_ON_COMPLETE_RESPONSE",e.Focused="FOCUSED",e.OverrideStrings="OVERRIDE_STRINGS",e.RecalculatedSize="RECALCULATED_SIZE",e.SetLocale="SET_LOCALE",e.SetError="SET_ERROR"}(ao||(ao={})),function(e){e.IframeMessengerTimeoutError="IFRAME_MESSENGER_TIMEOUT_ERROR",e.InvalidRedirectURI="INVALID_REDIRECT_URI"}(co||(co={})),function(e){e.ExperimentInteraction="EXPERIMENT_INTERACTION"}(uo||(uo={})),function(e){e.CASH_APP_API_CUSTOMER="CASH_APP_API_CUSTOMER",e.CASH_APP_AUTH="CASH_APP_AUTH",e.GET_PRODUCT_INFORMATION="GET_PRODUCT_INFORMATION",e.LOAD="LOAD",e.MAIN_IFRAME="MAIN_IFRAME",e.NONCE="NONCE"}(lo||(lo={})),function(e){e.ATTACH="ATTACH",e.BUILD="BUILD",e.INITIALIZATION="INITIALIZATION"}(ho||(ho={})),function(e){e.START="START",e.OK="OK",e.ERROR="ERROR"}(po||(po={})),function(e){e.Ach="ACH",e.Afterpay="Afterpay",e.App="WebSDK",e.ApplePay="Apple Pay",e.Card="Card",e.CashApp="Cash App",e.CashAppPayV1="Cash App Pay V1",e.GooglePay="Google Pay",e.Masterpass="Masterpass",e.GiftCard="Gift Card",e.Fields="Fields",e.PaymentRequest="Payment Request"}(fo||(fo={}));var _o,So={CARD_NONCE_ENDPOINT:new RegExp(Eo(d.CARD_NONCE_ENDPOINT)),CASH_APP_API_CUSTOMER:new RegExp(Eo("".concat(d.CASH_APP_API,"/customer"))),CASH_APP_AUTH_ENDPOINT:new RegExp(Eo("".concat(d.API_URL,"/digital-wallets/cash-app/auth"))),GET_PRODUCT_INFORMATION_ENDPOINT:new RegExp(Eo(d.GET_PRODUCT_INFORMATION_ENDPOINT)),LIBRARY_RESOURCE:new RegExp("".concat(Eo(d.ASSET_BASE_URL),"/([\\w\\d.-]*/)?square\\.js")),MAIN_IFRAME_RESOURCE:new RegExp("".concat(Eo(d.ASSET_URL),"/main-iframe"))};!function(e){e.navigation="navigation",e.fetch="fetch",e.iframe="iframe",e.script="script"}(_o||(_o={}));var Ao=new Set(Object.values(ao)),Co=new Set([oo.InitializeOK,uo.ExperimentInteraction,co.IframeMessengerTimeoutError]);r(4908);var Io,Oo,To,bo,wo={hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",port:"",protocol:"",search:"",toString:()=>""};function Po(){if(c.windowLocation===c.windowParentLocation)return c.windowLocation;var e=c.documentReferrer;return e&&0!==e.length?(Io||(Io=document.createElement("a")),Io.href="".concat(e),{hash:Io.hash,host:Io.host,hostname:Io.hostname,href:Io.href,origin:Io.origin,pathname:Io.pathname,port:Io.port,protocol:Io.protocol,search:Io.search,toString(){return this.href}}):wo}function Ro(e,t){var r={};return Object.keys(e).forEach((n=>{"object"==typeof e[n]&&!Array.isArray(e[n])&&t[n]?r[n]=Ro(e[n],t[n]):r[n]=t[n]||e[n]})),r}!function(e){e.CA="CA",e.GB="GB",e.US="US"}(Oo||(Oo={})),function(e){e.en="en",e.ja="ja",e.fr="fr",e.es="es"}(To||(To={})),function(e){e.enUS="en-US",e.enIE="en-IE",e.enCA="en-CA",e.enGB="en-GB",e.enAU="en-AU",e.jaJP="ja-JP",e.frFR="fr-FR",e.frCA="fr-CA",e.esES="es-ES"}(bo||(bo={}));var No={"en-AU":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"en-GB":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid ZIP code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-IE":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiry date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiry date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the ZIP code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected delivery contact. Please try again.",optionsError:"There was an error processing your selected delivery option. Please try again."}}}},"en-US":{paymentMethods:{cards:{errors:{cardNumberError:"Enter a valid card number.",cvvError:"Enter a valid security code.",expirationDateError:"Enter a valid expiration date.",multipleErrors:"Fix the highlighted errors.",postalCodeErrors:{CA:"Enter a valid postal code.",GB:"Enter a valid postcode.",US:"Enter a valid zip code."}},helperText:{cardNumber:"Enter your card number",cvv:"Enter the security code",expirationDate:"Enter the expiration date",postalCodes:{CA:"Enter the postal code",GB:"Enter the postcode",US:"Enter the zip code"}},placeholderText:{cardNumber:"Card number",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"Postal Code",GB:"Postcode",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"Enter a valid gift card number."},helperText:{giftCardNumber:"Enter your gift card number"},placeholderText:{giftCardNumber:"Gift card"}},afterpay:{checkoutWidget:{today:"Today",weeks:"weeks",title:"Your 4 interest-free payments"}},wallets:{callbackErrors:{contactError:"There was an error processing your selected shipping contact. Please try again.",optionsError:"There was an error processing your selected shipping option. Please try again."}}}},"es-ES":{paymentMethods:{afterpay:{checkoutWidget:{title:"Tus 4 pagos sin intereses",today:"Hoy",weeks:"semanas"}},cards:{errors:{cardNumberError:"Introduce un número de tarjeta válido.",cvvError:"Introduce un código de seguridad válido.",expirationDateError:"Introduce una fecha de caducidad válida.",multipleErrors:"Corrige los errores resaltados.",postalCodeErrors:{CA:"Introduce un código postal válido.",GB:"Introduce un código postal válido.",US:"Introduce un código postal válido."}},helperText:{cardNumber:"Introduce tu número de tarjeta",cvv:"Introduce el código de seguridad",expirationDate:"Introduce la fecha de caducidad",postalCodes:{CA:"Introduce el código postal",GB:"Introduce el código postal",US:"Introduce el código postal"}},placeholderText:{cardNumber:"Número de tarjeta",cvv:"Código CVV",expirationDate:"MM/AA",postalCodes:{CA:"Código postal",GB:"Código postal",US:"C.P."}}},giftCards:{errors:{giftCardNumberError:"Introduce un número de tarjeta regalo válido."},helperText:{giftCardNumber:"Introduce el número de tu tarjeta regalo"},placeholderText:{giftCardNumber:"Tarjeta regalo"}},wallets:{callbackErrors:{contactError:"Se ha producido un error al procesar el contacto de envío que has seleccionado. Inténtalo de nuevo.",optionsError:"Se ha producido un error al procesar la opción de envío que has seleccionado. Inténtalo de nuevo."}}}},"fr-CA":{paymentMethods:{cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide.",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Veuillez saisir une date d’expiration valide.",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide.",GB:"Saisissez un code postal valide.",US:"Saisissez un code postal valide."}},helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir le code postal",GB:"Saisir le code postal",US:"Saisir le code postal"}},placeholderText:{cardNumber:"Numéro de la carte",cvv:"CVV",expirationDate:"MM/AA",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code postal"}}},giftCards:{errors:{giftCardNumberError:"Saisissez un numéro de carte-cadeau valide."},helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},placeholderText:{giftCardNumber:"Carte-cadeau"}},afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intérêts",today:"Aujourd’hui",weeks:"semaines"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"fr-FR":{paymentMethods:{afterpay:{checkoutWidget:{title:"Vos quatre paiements sans intérêts",today:"Aujourd’hui",weeks:"semaines"}},cards:{errors:{cardNumberError:"Saisissez un numéro de carte valide",cvvError:"Veuillez saisir un code de sécurité valide.",expirationDateError:"Saisir une date d’expiration valide",multipleErrors:"Corrigez les erreurs mises en évidence.",postalCodeErrors:{CA:"Saisissez un code postal valide",GB:"Saisissez un code postal valide",US:"Saisissez un code ZIP valide"}},helperText:{cardNumber:"Saisir votre numéro de carte",cvv:"Saisir le code de sécurité",expirationDate:"Saisir la date d’expiration",postalCodes:{CA:"Saisir un code postal",GB:"Saisir un code postal",US:"Saisir un code ZIP"}},placeholderText:{cardNumber:"Numéro de carte",expirationDate:"MM/AA",cvv:"CVV",postalCodes:{CA:"Code postal",GB:"Code postal",US:"Code ZIP"}}},giftCards:{errors:{giftCardNumberError:"Saisir un numéro de carte cadeau valide"},helperText:{giftCardNumber:"Saisir le numéro de votre carte cadeau"},placeholderText:{giftCardNumber:"Carte cadeau"}},wallets:{callbackErrors:{contactError:"Une erreur s‘est produite lors du traitement du contact de livraison sélectionné. Veuillez réessayer.",optionsError:"Une erreur s‘est produite lors du traitement de l‘option d‘expédition sélectionnée. Veuillez réessayer."}}}},"ja-JP":{paymentMethods:{afterpay:{checkoutWidget:{title:"無利息の4回払い",today:"今日",weeks:"週間"}},cards:{errors:{cardNumberError:"正しいカード番号を入力してください。",cvvError:"有効なセキュリティコードを入力してください。",expirationDateError:"正しい有効期限を入力してください。",multipleErrors:"強調表示されたエラーを修正してください。",postalCodeErrors:{CA:"正しい郵便番号を入力してください。",GB:"有効な郵便番号を入力してください。",US:"正しいZIPコードを入力してください。"}},helperText:{cardNumber:"カード番号を入力してください",cvv:"セキュリティコードを入力してください",expirationDate:"有効期限を入力してください",postalCodes:{CA:"郵便番号を入力してください",GB:"郵便番号を入力してください",US:"ZIPコードを入力してください"}},placeholderText:{cardNumber:"カード番号",cvv:"CVV",expirationDate:"MM/YY",postalCodes:{CA:"郵便番号",GB:"郵便番号",US:"ZIP"}}},giftCards:{errors:{giftCardNumberError:"有効なギフトカード番号を入力してください。"},helperText:{giftCardNumber:"ギフトカード番号を入力してください"},placeholderText:{giftCardNumber:"ギフトカード"}},wallets:{callbackErrors:{contactError:"選択された配送住所を処理する際にエラーが発生しました。もう一度やり直してください。",optionsError:"選択された配送方法を処理する際にエラーが発生しました。もう一度やり直してください。"}}}}},Do={en:bo.enUS,es:bo.esES,fr:bo.frFR,ja:bo.jaJP},Lo=Do[To.en];class xo{constructor(e){this.currentLocale=Lo,this.currentTranslations=No[this.currentLocale],this.setLocale(e)}setTranslationOverrides(e){this.translationOverrides=e}setLocale(e){var t=this.getLanguageFromLocale(e),r=this.getRegionFromLocale(e),n=this.currentLocale;if(No[e])this.currentLocale=e;else{if(!To[t])return{message:"Locale ".concat(e," is not supported. Language ").concat(t," and region ").concat(r," are both unsupported."),newLocale:this.currentLocale,previousLocale:n};this.currentLocale=Do[t]}this.currentTranslations=No[this.currentLocale];var i=this.getRegionFromLocale(this.currentLocale);return r&&i&&r.toLowerCase()!==i.toLowerCase()?{message:"Locale ".concat(e," is not supported. Language ").concat(t," is supported, but region ").concat(r," is not. Falling back to ").concat(this.currentLocale,"."),newLocale:this.currentLocale,previousLocale:n}:{newLocale:this.currentLocale,previousLocale:n}}getCurrentLocale(){return this.currentLocale}getLocaleString(){return this.translationOverrides?Ro(this.currentTranslations,this.translationOverrides):this.currentTranslations}getLanguageFromLocale(e){return e.split("-")[0]}getRegionFromLocale(e){return e.split("-")[1]}}var ko="INVALID_VALUE",Mo="SANITIZED",Uo=new Set(["countryCode","currencyCode","requestBillingContact","requestShippingContact","lineItems","total","shippingOptions","shippingContact"]),Ho=new Set(["error","shippingErrors","lineItems","total","shippingOptions","taxLineItems","shippingLineItems","discounts"]),jo=new Set([...Ho.values(),"eventName"]),Bo=new Set(["includeInputLabels","postalCode","style"]),Go=new Set(["includeInputLabels","style"]),qo=new Set(["lineItems","total","shippingOptions","shippingContact"]),Fo=new Set(["buttonColor","buttonSizeMode","buttonType"]),Vo=new Set(["shape","size","values","theme","width"]),zo=os(zr),Yo=os(Hr),$o=os(qr),Ko=os(oi),Wo=os(jr),Qo=os(Gr),Zo=os(bo),Jo=os(ei),Xo=os(ti),es=os(ri),ts=os(Qn),rs=os(Wn),ns=os(Zn),is=os(Jn);function os(e){return new Set(Object.values(e))}function ss(e){return JSON.stringify({value:e})}function as(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i={};return Object.entries(e).forEach((e=>{var[o,s]=e;if(t.has(o)){var a=s;r.has(o)?a=Mo:n[o]&&(a=n[o].has(s)?s:ko),i[o]=a}})),JSON.stringify(i)}function cs(e){return as(e,Vo,void 0,{shape:rs,size:ts,values:ns,theme:ns,width:is})}var us=function(e,t,r){switch(e){case ao.Configured:case ao.ConfigUpdated:return function(e,t){switch(e){case fo.Card:case fo.GiftCard:return function(e,t){return as(t,e===fo.Card?Bo:Go)}(e,t);case fo.GooglePay:return function(e){return as(e,Fo,void 0,{buttonColor:Jo,buttonSizeMode:Xo,buttonType:es})}(t);case fo.PaymentRequest:return function(e){return as(e,Uo,qo)}(t);case fo.CashAppPayV1:return cs(t)}return ko}(t,r);case ao.Focused:return ss(function(e,t){if("string"!=typeof t)return ko;switch(e){case fo.Card:if(Wo.has(t))return t;break;case fo.GiftCard:if(Qo.has(t))return t}return ko}(t,r));case ao.SetLocale:return ss(function(e){return"string"!=typeof e?ko:Zo.has(e)?e:ko}(r));case ao.EventListenerAdded:return ss(function(e,t){if("string"!=typeof t)return ko;switch(e){case fo.Ach:if(zo.has(t))return t;break;case fo.Card:if(Yo.has(t))return t;break;case fo.GiftCard:if($o.has(t))return t;break;case fo.PaymentRequest:if(Ko.has(t))return t}return ko}(t,r));case ao.EventListenerOnCompleteResponse:return function(e,t){return e===fo.PaymentRequest?function(e){return as(e,jo,Ho,{eventName:Ko})}(t):ko}(t,r);default:return""}};function ls(e,t){return null!==e.document.body&&void 0!==e.document.body&&null!==e.document.createNodeIterator(e.document.body,NodeFilter.SHOW_ELEMENT,{acceptNode:t}).nextNode()}function ds(e,t){return Boolean(e.querySelector(t))}function hs(e,t){return void 0!==e[t]}r(1804);var ps=function(e){var t,r=hs(e,"angular"),n=ds(e.document,"[ng-version]")||hs(e,"getAllAngularRootElements")||hs(e,"getAngularVersion"),i=hs(e,"bootstrap"),o=hs(e,"Ember"),s=hs(e,"jQuery"),a=ds(e.document,'form[action*="paypal.com"]'),c=function(e){return ls(e,(function(e){return e.__k||e._component||e.__c?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),u=function(e){var t=ds(e.document,"*[data-reactroot]");if(t)return t;return ls(e,(function(e){return e._reactRootContainer?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),l=function(e){var t=hs(e,"__NUXT__")||hs(e,"$nuxt"),r=hs(e,"__VUE__");if(r||t)return r||t;return ls(e,(function(e){return e.__vue__?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}))}(e),d={angular:n,angularJS:r,bootstrap:i,ember:o,jquery:s,nextJS:hs(e,"__NEXT_DATA__")&&void 0!==(null===(t=e.__NEXT_DATA__)||void 0===t?void 0:t.buildId),paypalBuyNow:a,preact:c,react:u,vue:l};return Object.fromEntries(Object.entries(d).filter((e=>{var[t,r]=e;return!0===r})))};function fs(e,t){var r=c.windowPerformance;if(!r||"function"!=typeof r.getEntriesByType)return null;var n=function(e,t,r){var n=e.filter((e=>e.initiatorType===t&&r.test(e.name)));return n[n.length-1]}([...r.getEntriesByType("resource"),...r.getEntriesByType("navigation")],e,t);return n?Math.round(function(e){return e.duration>0?e.duration:Math.max(Math.trunc(e.responseEnd-e.startTime),0)}(n)):null}var gs=function(e){switch(e){case lo.CASH_APP_AUTH:return fs(_o.fetch,So.CASH_APP_AUTH_ENDPOINT);case lo.CASH_APP_API_CUSTOMER:return fs(_o.fetch,So.CASH_APP_API_CUSTOMER);case lo.GET_PRODUCT_INFORMATION:return fs(_o.fetch,So.GET_PRODUCT_INFORMATION_ENDPOINT);case lo.MAIN_IFRAME:return fs(_o.navigation,So.MAIN_IFRAME_RESOURCE);case lo.LOAD:return fs(_o.script,So.LIBRARY_RESOURCE);case lo.NONCE:return fs(_o.fetch,So.CARD_NONCE_ENDPOINT);default:return null}};function ms(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ms(Object(r),!0).forEach((function(t){ys(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ms(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ys(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Es,_s=d.METRICS_URL,Ss=d.METRICS_V2_URL;class As{constructor(e,t){this.sdkVersion=d.VERSION,this.jsFramework="",this.applicationData=t,this.manualTelemetryStarts={},this.metricsBuffer=[],this.errorLogger=e,this.disableBeacon=!1}setAvt(e){this.avt=e}logEvent(e,t,r,n){try{var i={origin:Po().origin},o={innerHeight:c.windowInnerHeight,innerWidth:c.windowInnerWidth,language:c.windowNavigationLanguage},s=this.eventDuration(e,n),{event:a,eventSource:u,eventConfigurationValues:l,internalConfigurationValues:d}=e,h=this.sdkVersion,p=this.metricsSession(t,r),f={appLocation:i,avt:this.avt,browserData:o,event:a,eventSource:u,paymentMethodTrackingId:n,sdkVersion:h,session:p};void 0!==l&&(m=a,Ao.has(m))&&(f.eventConfigurationValues=us(a,u,l)),void 0!==d&&function(e){return Co.has(e)}(a)&&(f.internalConfigurationValues=JSON.stringify(d)),s&&(f.duration=s),a===oo.InitializeOK&&(f.jsFramework=this.getJSFrameworkValue());var g=!1;a!==oo.NonceOK&&a!==ao.Destroyed||(g=!0),this.postMetricsEvent(f,g)}catch(e){this.errorLogger.captureException(e)}var m}getJSFrameworkValue(){return 0===this.jsFramework.length&&(this.jsFramework=JSON.stringify(ps(window))),this.jsFramework}eventDuration(e,t){var[r,n]=e.event.split(":");if(r in ho){var i;if(r===ho.INITIALIZATION?i=r:t&&(i="".concat(r,":").concat(t)),!i)return null;if(n===po.START){var o=Date.now();return this.manualTelemetryStarts[i]=o,null}if(n===po.OK||n===po.ERROR){var s=this.manualTelemetryStarts[i];return void 0===s?null:(delete this.manualTelemetryStarts[i],Date.now()-s)}}return n!==po.START&&r in lo?gs(r):null}postMetricsEvent(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];!this.disableBeacon&&c.windowNavigationBeacon&&c.documentVisibilityState?(this.metricsBuffer.push(e),t&&this.buildAndSendBeacon(),void 0===this.currentInterval&&(document.addEventListener("visibilitychange",(()=>{"hidden"===c.documentVisibilityState&&(this.buildAndSendBeacon(),clearInterval(this.currentInterval),this.currentInterval=void 0)})),this.currentInterval=window.setInterval((()=>{this.buildAndSendBeacon()}),1e3))):Mr(_s,{body:e}).catch((e=>{this.errorLogger.captureException(e)}))}buildAndSendBeacon(){if(0!==this.metricsBuffer.length){try{var e=new Blob([JSON.stringify({metrics:this.metricsBuffer})],{type:"text/plain;charset=UTF-8"});window.navigator.sendBeacon(Ss,e)}catch(e){e instanceof TypeError&&"Illegal invocation"===e.message||this.errorLogger.captureException(e),this.disableBeacon=!0,void 0!==this.currentInterval&&(clearInterval(this.currentInterval),this.currentInterval=void 0),Mr(Ss,{body:{metrics:this.metricsBuffer}}).catch((e=>{this.errorLogger.captureException(e)}))}this.metricsBuffer=[]}}metricsSession(e,t){return vs(vs({},this.applicationData),{},{instanceId:e,sessionId:t})}}r(2356),function(e){e.ACH="ACH",e.AFTERPAY="AFTERPAY",e.APPLE_PAY="APPLE_PAY",e.CASH_APP="CASH_APP",e.CASH_APP_PAY_V1="CASH_APP_PAY_V1",e.GOOGLE_PAY="GOOGLE_PAY"}(Es||(Es={})),d.HYDRATION_ENDPOINT;var Cs="UPDATE_SESSION";class Is{constructor(e,t){this.errorLogger=e,this.messenger=t}}var Os={[Ti.CanUseInterac]:{false:bi.Control,true:bi.TreatmentA},[Ti.CanUseOverrideStrings]:{false:bi.Control,true:bi.TreatmentA},[Ti.CanUseBNPLA]:{false:bi.Control,true:bi.TreatmentA},[Ti.RecordErrorMetrics]:{false:bi.Control,true:bi.TreatmentA},[Ti.CanUseAchAuth]:{[wi.NoSupport]:bi.Control,[wi.Supported]:bi.TreatmentA,[wi.Required]:bi.TreatmentA},[Ti.AnalyticsBackend]:{[Pi.ScriptLoadLegacy]:bi.Control,[Pi.Inline]:bi.TreatmentA},[Ti.ClientLogLevel]:{[Ri.None]:bi.Control,[Ri.Debug]:bi.TreatmentA}};class Ts{constructor(e){this.featureFlagValues=e}isActive(e){return this.experimentGroup(e)!==bi.Control}experimentGroup(e){return this.featureFlagValueExperimentGroup(e)}featureFlagValueExperimentGroup(e){var t=this.featureFlagValues[e];return Os[e][t]||bi.Control}}r(3108);class bs extends Error{constructor(e,t,r){super(`error loading script ${e}: ${t} ${r?r.toString():""}`),this.name="ScriptLoaderError",Object.setPrototypeOf(this,bs.prototype)}}const ws={};function Ps(e){delete ws[e],document.getElementById(e)?.remove()}function Rs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ns(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ds(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Ls(){var e;return e=function*(e,t,r){for(var n=arguments.length,i=new Array(n>3?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];try{var s=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rs(Object(r),!0).forEach((function(t){Ns(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rs(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({id:"square-payments-".concat(e,"-script")},t);return yield function(e,t){const r=t();if(void 0!==r)return Promise.resolve(r);if(e.id in ws)return ws[e.id];const n=document.createElement("script");for(const t in e){const r=e[t];void 0!==r&&n.setAttribute(t,r)}return ws[e.id]=new Promise(((r,i)=>{n.onload=()=>{const n=t();void 0===n?(Ps(e.id),i(new bs(e.src,"location returned undefined"))):r(n)},n.onerror=(t,r,n,o,s)=>{Ps(e.id),i(new bs(e.src,"Unknown error occurred",s))}})),document.body.appendChild(n),ws[e.id]}(s,(()=>{var e=window[r];if(i.length>0){if(void 0===e)return;return i.reduce(((e,t)=>e[t]),e)}return e}))}catch(e){throw new Un(e.message)}},Ls=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Ds(o,n,i,s,a,"next",e)}function a(e){Ds(o,n,i,s,a,"throw",e)}s(void 0)}))},Ls.apply(this,arguments)}var xs,ks={load:function(e,t,r){return Ls.apply(this,arguments)}};function Ms(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Us(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ms(Object(r),!0).forEach((function(t){Hs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ms(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hs(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function js(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var Bs=Si.hoursToMs(2);function Gs(e){var{applicationId:t,locationId:r}=e;return xs||(xs=ks.load("analytics-link",{src:d.ANALYTICS_PUBLIC_ENDPOINT,crossorigin:"anonymous"},"Square","Analytics").then((e=>new e(t,{locationId:r}))))}function qs(e){return function(e){return"region"in e||"country"in e||"countryName"in e}(e)?e:{addressLines:e.addressLines,familyName:e.familyName,givenName:e.givenName,email:e.email,country:e.countryCode,phone:e.phone,postalCode:e.postalCode,region:e.state,city:e.city}}function Fs(){var e;return e=function*(e){var t=yield Gs(e);return new Promise((e=>{t.getToken(e)}))},Fs=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){js(o,n,i,s,a,"next",e)}function a(e){js(o,n,i,s,a,"throw",e)}s(void 0)}))},Fs.apply(this,arguments)}var Vs={analyticsLibrary:Gs,getToken:function(e){return Fs.apply(this,arguments)},resetLibraryCache:function(){xs=void 0},verifyBuyer:function(e,t,r){var n=Us(Us({},r),{},{billingContact:qs(r.billingContact)});return new Promise(((r,i)=>{e.verifyBuyer(t,n,((e,t)=>{e?i(e):r(t)}))}))},toSqContact:qs};function zs(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Ys(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){zs(o,n,i,s,a,"next",e)}function a(e){zs(o,n,i,s,a,"throw",e)}s(void 0)}))}}var $s,Ks="LOCALE_CHANGED_EVENT";class Ws extends Is{constructor(e,t,r,n,i,o,s,a,c,u){super(e,t),this.session=n,this.localeStrings=o,this.paymentMethodSupportDetail=i,this.metricsHandler=r,this.eventTarget=s,this.featureFlagHandler=new Ts(a),this.featureFlagValues=a,this.isTestMerchant=c,this.analyticsManager=u}addLocaleChangedListener(e){this.eventTarget.addEventListener(Ks,e)}removeLocaleChangedListener(e){this.eventTarget.removeEventListener(Ks,e)}getSession(){return this.session.serialize()}getFeatureFlagValues(){return this.featureFlagValues}getLocaleString(){return this.localeStrings.getLocaleString()}setTranslationOverrides(e){this.localeStrings.setTranslationOverrides(e),this.session.setTranslationOverrides(e),this.eventTarget.dispatchEvent(Ks,this.localeStrings.getCurrentLocale()),this.messenger.sendOneWayMessage(Cs,{session:this.session.serialize()})}setLocale(e){var t=this.localeStrings.setLocale(e);if(t.previousLocale===t.newLocale)return t;var r=this.localeStrings.getCurrentLocale();return this.session.setLocale(r),this.eventTarget.dispatchEvent(Ks,r),this.messenger.sendOneWayMessage(Cs,{session:this.session.serialize()}),t}updateSession(e){var t=this;return Ys((function*(){if(t.session.setSessionId(e),t.errorLogger.setSessionId(e),t.featureFlagValues[Ti.AnalyticsBackend]===Pi.ScriptLoadLegacy){try{var r=yield Vs.getToken({applicationId:t.session.applicationId,locationId:t.session.locationId,websiteUrl:t.session.sourceUrl});t.session.setAnalyticsToken(r)}catch(e){t.session.locationId&&t.errorLogger.captureException(e)}yield t.messenger.sendOneWayMessage(Cs,{session:t.session.serialize()})}else t.analyticsManager.beginGenerateToken(),t.errorLogger.setSessionId(e),yield t.messenger.sendOneWayMessage(Cs,{session:t.session.serialize()})}))()}refreshWithCurrentAnalyticsToken(){var e=this;return Ys((function*(){if(e.featureFlagValues[Ti.AnalyticsBackend]!==Pi.ScriptLoadLegacy)try{var t=yield e.analyticsManager.retrieveCurrentToken();t&&(e.session.setAnalyticsToken(t),yield e.messenger.sendOneWayMessage(Cs,{session:e.session.serialize()}))}catch(t){e.session.locationId&&e.errorLogger.captureException(t)}}))()}setPaymentMethodTrackingId(e){this.metricsHandler.setPaymentMethodTrackingId(e)}getPaymentMethodTrackingId(){return this.metricsHandler.getPaymentMethodTrackingId()}}!function(e){e.APPLE_PAY_BROWSER_NOT_SUPPORTED="APPLE_PAY_BROWSER_NOT_SUPPORTED",e.APPLE_PAY_DEVICE_NOT_SUPPORTED="APPLE_PAY_DEVICE_NOT_SUPPORTED",e.APPLE_PAY_NOT_REGISTERED="APPLE_PAY_NOT_REGISTERED",e.GOOGLE_PAY_BROWSER_NOT_SUPPORTED="GOOGLE_PAY_BROWSER_NOT_SUPPORTED",e.INVALID_CONFIG="INVALID_CONFIG",e.UNKNOWN="UNKNOWN"}($s||($s={}));var Qs,Zs={message:"Apple Pay is only available on Safari.",type:"BROWSER_NOT_SUPPORTED"},Js={message:"Device does not support Apple Pay.\nSee: https://developer.squareup.com/docs/web-payments/apple-pay#prerequisites-and-assumptions",type:"DEVICE_NOT_SUPPORTED"},Xs={message:"Browser does not support Google Pay. \nSee: https://developer.squareup.com/docs/web-payments/google-pay#prerequisites-and-assumptions",type:"BROWSER_NOT_SUPPORTED"},ea={message:"Configuration is invalid.",type:"INVALID_CONFIG"},ta={message:"An unknown error has occurred.",type:"UNKNOWN"};!function(e){e.COUNTRY_NOT_SUPPORTED="COUNTRY_NOT_SUPPORTED",e.APPLICATION_DISABLED="APPLICATION_DISABLED",e.MISSING_LOCATION_ID="MISSING_LOCATION_ID",e.UNVERIFIED_DOMAIN="UNVERIFIED_DOMAIN",e.NOT_ONBOARDED="NOT_ONBOARDED",e.US_AND_UK_MERCHANT_ONLY="US_AND_UK_MERCHANT_ONLY",e.US_MERCHANT_ONLY="US_MERCHANT_ONLY",e.INTERNAL_ERROR="INTERNAL_ERROR",e.DOMAIN_NOT_REGISTERED="DOMAIN_NOT_REGISTERED"}(Qs||(Qs={}));var ra={APPLICATION_DISABLED:{message:"Wallet is disabled for your application.",type:"APPLICATION_DISABLED"},COUNTRY_NOT_SUPPORTED:{message:"Wallet is not available in this merchant country.",type:"COUNTRY_NOT_SUPPORTED"},MISSING_LOCATION_ID:{field:"locationId",message:"Missing locationId in the payment request configuration.\nSee: https://developer.squareup.com/reference/sdks/web/payments/objects/Payments",type:"MISSING_LOCATION_ID"},NOT_ONBOARDED:{message:"Your merchant account has not yet been onboarded for this payment method. Please visit the Seller Dashboard to enable the payment method",type:"NOT_ONBOARDED"},UNVERIFIED_DOMAIN:{message:"Your website's domain is not verified for use with Apple Pay. Please visit the Square Developer Dashboard at https://developer.squareup.com/ to register your domain for use with Apple Pay",type:"UNVERIFIED_DOMAIN"},US_AND_UK_MERCHANT_ONLY:{message:"Wallet is available for US and UK merchants only.",type:"US_AND_UK_MERCHANT_ONLY"},US_MERCHANT_ONLY:{message:"Wallet is available for US merchants only.",type:"US_MERCHANT_ONLY"},INTERNAL_ERROR:{message:"There was a temporary error determining your website's payment method status",type:"INTERNAL_ERROR"},DOMAIN_NOT_REGISTERED:{message:"Your website's domain is not registered for use with Apple Pay.\nSee: https://developer.squareup.com/docs/web-payments/apple-pay#production-configuration",type:"DOMAIN_NOT_REGISTERED"}};class na extends en{constructor(e,t,r){var n="".concat(e," was called with a missing or invalid parameter. '").concat(t,"' is required");r&&(n+=" and must be a(n) ".concat(r)),super("".concat(n,".")),this.name="InvalidFunctionArgumentError",Object.setPrototypeOf(this,na.prototype)}}class ia extends en{constructor(e){super("One or more of the arguments needed are missing or invalid."),this.argumentErrors=e,this.name="InvalidArgumentsError",Object.setPrototypeOf(this,ia.prototype)}}class oa{constructor(){this.listeners={}}addEventListener(e,t){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}removeEventListener(e,t){if(e in this.listeners)for(var r=this.listeners[e],n=0;n<r.length;n++)r[n]===t&&(r.splice(n,1),n--)}dispatchEvent(e,t){if(e in this.listeners)for(var r=new di(e,t),n=[...this.listeners[e]],i=0,o=n.length;i<o;i++)try{n[i](r)}catch(e){console.error(e)}}hasEventListener(e){return e in this.listeners&&this.listeners[e].length>0}}var sa,aa=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).slice(1)}return"".concat(e()+e(),"-").concat(e(),"-").concat(e(),"-").concat(e(),"-").concat(e()).concat(e()).concat(e())};class ca{constructor(e,t,r,n){this.metricsLogger=e,this.eventSource=r,this.session=t,this.paymentMethodTrackingId=n}logEvent(e,t,r){var n={event:e,eventSource:this.eventSource};t&&(n.eventConfigurationValues=t),r&&(n.internalConfigurationValues=r);var{instanceId:i,sessionId:o}=this.session.serialize();return this.metricsLogger.logEvent(n,i,o,this.paymentMethodTrackingId)}setPaymentMethodTrackingId(e){this.paymentMethodTrackingId=e}getPaymentMethodTrackingId(){return this.paymentMethodTrackingId}}r(5794),function(e){e[e.DETACHED=0]="DETACHED",e[e.ATTACHED=1]="ATTACHED",e[e.DESTROYED=2]="DESTROYED"}(sa||(sa={}));class ua{constructor(e){this.status=sa.DETACHED,this.eventTarget=new oa,this.eventBuffer={},this.context=e}get session(){return this.context.getSession()}get messenger(){return this.context.messenger}get metricsHandler(){return this.context.metricsHandler}get errorLogger(){return this.context.errorLogger}get featureFlagHandler(){return this.context.featureFlagHandler}addEventListener(e,t){this.eventTarget.addEventListener(e,t),e in this.eventBuffer&&this.eventBuffer[e].length>0&&(this.eventBuffer[e].forEach((t=>this.eventTarget.dispatchEvent(e,t))),this.eventBuffer[e]=[])}hasEventListener(e){return this.eventTarget.hasEventListener(e)}removeEventListener(e,t){this.eventTarget.removeEventListener(e,t)}destroy(){return Promise.resolve(!0)}detach(){return Promise.resolve(!0)}dispatchEvent(e,t){this.hasEventListener(e)?this.eventTarget.dispatchEvent(e,t):(e in this.eventBuffer||(this.eventBuffer[e]=[]),this.eventBuffer[e].push(t))}throwIfDestroyed(){if(this.status===sa.DESTROYED)throw new Ln(this.methodType)}throwIfDestroyedOrAlreadyAttached(){if(this.throwIfDestroyed(),this.status===sa.ATTACHED)throw new Nn(this.methodType)}throwIfDestroyedOrNotAttached(){if(this.throwIfDestroyed(),this.status!==sa.ATTACHED)throw new Dn(this.methodType)}}var la,da={message:"the tokenization request is already in process",type:"TOKENIZATION_IN_PROCESS"};function ha(e,t){var r=e;return e instanceof en||(r=new en,t.captureException(e)),{errors:[r],status:si.ERROR}}class pa{constructor(e){this.id=aa(),this.context=e}request(e,t){return this.context.messenger.request(e,{featureFlagValues:this.context.getFeatureFlagValues(),paymentMethodInstanceId:this.id,paymentMethodTrackingId:this.context.getPaymentMethodTrackingId(),session:this.context.getSession(),body:t})}initializeMessageBus(e){var t=this,r=function(e){t.context.messenger.onMessage({listener(t){e(t)},messageType:"".concat(n,":").concat(t.id)})};for(var[n,i]of Object.entries(e))r(i)}}function fa(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}!function(e){e.CREATE_OAUTH_PLAID_LINK_SESSION="CREATE_OAUTH_PLAID_LINK_SESSION",e.REQUEST_ACH_BANK_NONCE="REQUEST_ACH_BANK_NONCE"}(la||(la={}));var ga=new Set(["ITEM_ERROR"]),ma=new Set(["en","es"]),va=["US"];function ya(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Ea(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){ya(o,n,i,s,a,"next",e)}function a(e){ya(o,n,i,s,a,"throw",e)}s(void 0)}))}}var _a=(e,t)=>Ea((function*(){var r=e.getSession(),n=new pa(e),i=function(e,t,r,n){var i;function o(){var a;return a=function*(){var o=yield function(e,t){var r=e.getSession();if(!r.locationId)throw new Fn("locationId not defined when creating OAuth Plaid Link Session");var n=c.windowNavigationLanguage.slice(0,2),i={createOAuthPlaidLinkSessionRequest:{clientId:r.applicationId,locationId:r.locationId,redirectUri:"",languageCode:n}};return t.request(la.CREATE_OAUTH_PLAID_LINK_SESSION,i)}(t,r);return function(r){return new Promise(((o,a)=>{var u=c.windowNavigationLanguage.split("-")[0];ma.has(u)||(u="en");var{errorLogger:l,metricsHandler:h,isTestMerchant:p}=t,f="sandbox";d.env!==s.production||p||(f="production"),i=e.create({clientName:"Square, Inc.",countryCodes:va,env:f,language:u,onEvent:(e,t)=>{e!==zr.ERROR||ga.has(t.error_type)||l.captureException(new Ji("PlaidErrorEvent: ".concat(JSON.stringify(t)),ii.ACH)),n.onEvent(e,t)},onExit:(e,t)=>{e&&(h.logEvent(so.ExternalSessionError),ga.has(e.error_type)||l.captureException(new Ji("PlaidErrorOnExit: ".concat(JSON.stringify(e),", Metadata: ").concat(t),ii.ACH))),o({kind:"canceled"})},onSuccess:(e,t)=>{if(!t||!t.accounts||!t.accounts[0]){h.logEvent(so.ExternalSessionError);var n=new Error("No account selected but expected account, metadata: ".concat(JSON.stringify(t)));return l.captureException(n),void a(n)}h.logEvent(so.ExternalSessionOK),o({kind:"success",publicToken:e,selectedBankAccountId:t.accounts[0].id,gringottsSessionToken:r.gringottsSessionToken})},product:["auth"],token:r.plaidLinkToken}),h.logEvent(so.ExternalSessionStart),i.open()}))}(o)},o=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=a.apply(e,t);function o(e){fa(i,r,n,o,s,"next",e)}function s(e){fa(i,r,n,o,s,"throw",e)}o(void 0)}))},o.apply(this,arguments)}return{beginFlow:function(){return o.apply(this,arguments)},destroy:function(){i&&(i.exit({force:!0}),i.destroy(),i=void 0)}}}(yield ks.load("plaid-link",{src:"https://cdn.plaid.com/link/v2/stable/link-initialize.js"},"Plaid"),e,n,{onEvent:t});function o(){return o=Ea((function*(e){var t=yield i.beginFlow();if("success"===t.kind){var r=yield function(e,t,r,n){return a.apply(this,arguments)}(e.accountHolderName,t.publicToken,t.selectedBankAccountId,t.gringottsSessionToken);return r}return{status:si.CANCEL}})),o.apply(this,arguments)}function a(){return(a=Ea((function*(t,i,o,s){yield e.refreshWithCurrentAnalyticsToken();var a={accountHolderName:t,gringottsSessionToken:s,plaidPublicToken:i,selectedPlaidBankAccountId:o},c={bankNonceRequest:{clientId:r.applicationId,locationId:r.locationId,paymentMethodTrackingId:e.getPaymentMethodTrackingId(),plaidLinkData:a,sessionId:r.sessionId,websdkVersion:d.VERSION,websiteUrl:r.sourceUrl}};try{var u=yield n.request(la.REQUEST_ACH_BANK_NONCE,c);return yield e.updateSession(u.sessionId),e.setPaymentMethodTrackingId(u.paymentMethodTrackingId),{status:si.OK,bankNonce:u.bankNonce,accountDetails:u.accountDetails}}catch(e){throw e instanceof qn?e:new qn([Bi.UNKNOWN])}}))).apply(this,arguments)}return Object.freeze({run:function(e){return o.apply(this,arguments)},destroy:function(){i.destroy()}})}))();class Sa extends Error{constructor(e){super(e),this.name="InvalidAuthorizationParameter",Object.setPrototypeOf(this,Sa.prototype)}}class Aa extends Error{constructor(e,t){super(`The listener provided for event type ${e} threw an error: ${t}`),this.name="InvalidEventListenerError",Object.setPrototypeOf(this,Aa.prototype)}}class Ca{constructor(){this.listeners=new Map,this.eventBuffer=new Map}addEventListener(e,t){const r=this.listeners.get(e);void 0===r?this.listeners.set(e,[t]):r.push(t);const n=this.eventBuffer.get(e);n&&(n.forEach((e=>{this.dispatchEvent(e)})),this.eventBuffer.set(e,[]))}removeEventListener(e,t){const r=this.listeners.get(e);if(void 0!==r)for(let e=0;e<r.length;e++)r[e]===t&&(r.splice(e,1),e--)}hasEventListener(e){const t=this.listeners.get(e);return void 0!==t&&t.length>0}dispatchEvent(e){if(this.hasEventListener(e.type)){const t=[...this.listeners.get(e.type)];for(const r of t)try{r(e)}catch(t){throw new Aa(e.type,t.message)}}else{const t=this.eventBuffer.get(e.type);void 0===t?this.eventBuffer.set(e.type,[e]):t.push(e)}}}class Ia{constructor(){this.eventTarget=new Ca}addEventListener(e,t){this.eventTarget.addEventListener(e,(e=>{t(e.detail)}))}dispatchEvent(e){this.eventTarget.dispatchEvent(new CustomEvent(e.type,{detail:e}))}}const Oa={get IFRAME_NAME(){return"ach_authz"},get TEST_ENV(){return"test"},get DEV_ENV(){return"development"},get SANDBOX_ENV(){return"sandbox"},get PRODUCTION_ENV(){return"production"},getDebitAuthHostname(e){switch(e){case this.PRODUCTION_ENV:return"https://connect.squareup.com";case this.SANDBOX_ENV:return"https://connect.squareupsandbox.com";default:return"https://connect.squareupstaging.com"}},getSDKBaseUrlForEnv(e){switch(e){case"production":return"https://web.squarecdn.com";case"sandbox":return"https://sandbox.web.squarecdn.com";case"development":return"https://localhost:1779";default:return"https://staging.web.squarecdn.com"}}},Ta=function(e,t){const r=document.createElement("iframe");return new Promise(((n,i)=>{r.onerror=e=>{i(e)},r.onload=()=>{n(r)},r.setAttribute("id","ach-auth-enclave"),r.setAttribute("width","100%"),r.setAttribute("height","100%"),r.setAttribute("style","position: fixed; inset: 0px; z-index: 2147483647; border-width: 0px; display: block; overflow: hidden auto;"),r.setAttribute("src",`${Oa.getSDKBaseUrlForEnv(e)}${"development"===e?"":`/${t}`}/ach-authz-sdk/enclave.html`),document.body.append(r)}))},ba=function(e){e.parentElement?.removeChild(e)};class wa extends Error{constructor(e){super(e),this.name="IframeMessengerImplementationError",Object.setPrototypeOf(this,wa.prototype)}}class Pa extends Error{constructor(e){super(e),this.name="IframeMessengerInternalMessageError",Object.setPrototypeOf(this,Pa.prototype)}}class Ra extends Error{constructor(e,t,r){void 0!==r?(super(`Messenger has not received an acknowledgement of message ${e} with id ${t} from iframe id=${r} which ${null===document.getElementById(r)?"does not exist":"exists"}`),this.iframeID=r):super(`Messenger has not received an acknowledgement of message ${e} with id ${t}, no iframeID was set`),this.type=e,this.id=t,this.name="IframeMessengerTimeoutError",Object.setPrototypeOf(this,Ra.prototype)}}const Na="channel:connected",Da="channel:connecting",La="channel:close",xa="channel:error";class ka{constructor(e){this.receiveMessage=e=>{switch(e.data){case this.messageWithName(Da):this.handleConnecting(e);break;case this.messageWithName(Na):this.handleConnected();break;case this.messageWithName(La):this.close();break;case this.messageWithName(xa):break;default:this.handleMessage(e)}},this.connected=!1,this.listeners=[],this.messageBuffer=[],this.name=void 0!==e?`:${e}`:""}set onmessage(e){this.listeners.push(e)}close(){this.port&&(this.postMessage(this.messageWithName(La)),this.port.close(),this.port=void 0,this.connected||window.removeEventListener("message",this.receiveMessage)),this.connected=!1}connect(e){if(this.connected)throw new wa("message channel is already connected");if(e){if(void 0===e.origin)throw new wa("message channel remote.origin must be defined");if(null===e.window)throw new wa("message channel remote.window cannot be null");const t=new MessageChannel;this.setupPort(t.port1),e.window.postMessage(this.messageWithName(Da),e.origin,[t.port2])}else window.addEventListener("message",this.receiveMessage)}setErrorHandler(e){this.errorHandler=e}postMessage(e){this.port&&this.connected?this.port.postMessage(e):this.messageBuffer.push(e)}handleConnecting(e){if(this.connected)throw new wa("message channel should not be connecting because already connected");window.removeEventListener("message",this.receiveMessage),e.ports[0]&&(this.setupPort(e.ports[0]),this.postMessage(this.messageWithName(Na)),this.connectionEstablished())}handleConnected(){if(this.connected)throw new wa("message channel already connected");this.connectionEstablished()}connectionEstablished(){for(this.connected=!0;this.messageBuffer.length>0;)this.postMessage(this.messageBuffer.shift())}handleMessage(e){this.listeners.forEach((t=>{t(e)}))}setupPort(e){this.port=e,this.port.onmessage=this.receiveMessage,this.port.onmessageerror=e=>{this.postMessage(this.messageWithName(xa)),this.errorHandler&&this.errorHandler(new wa("message channel failed to deserialize message"),e)}}messageWithName(e){return e+this.name}}function Ma(){return`${Date.now()}${Math.floor(8e3*Math.random())}`}var Ua,Ha;!function(e){e.ACK="ack",e.OK="ok",e.ERROR="error"}(Ua||(Ua={}));class ja{constructor(e={}){this.messageListeners=new Map,this.channel=new ka(e.name),this.channel.onmessage=this.handleMessage.bind(this),void 0!==e.payloadSerializer&&(this.payloadSerializer=e.payloadSerializer),void 0!==e.errorSerializer&&(this.errorSerializer=e.errorSerializer)}setErrorHandler(e){this.errorHandler=e,this.channel.setErrorHandler(e)}sendOneWayMessage(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:Ma(),mustAcknowledge:!1,mustRespond:!1,payload:r,type:e})}sendMessage(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:Ma(),mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}request(e,t){let r=t;return void 0!==t&&void 0!==this.payloadSerializer&&(r=this.payloadSerializer.serialize(t)),this.message({id:Ma(),mustAcknowledge:!0,mustRespond:!0,payload:r,type:e})}respond(e,t){const r=`${e.type}:${Ua.OK}`;let n=t;return void 0!==this.payloadSerializer&&(n=this.payloadSerializer.serialize(t)),this.postResponse(r,e,n)}reject(e,t){const r=`${e.type}:${Ua.ERROR}`;let n=t;return void 0!==this.errorSerializer&&(n=this.errorSerializer.serialize(t)),this.postResponse(r,e,n)}onMessage(e,t=Ma()){return this.addMessageEventListener(e,t),t}connect(e,t){void 0!==t&&(this.iframeID=t),this.channel.connect(e)}close(){this.channel.close()}handleMessage(e){const t=this.messageListeners.get(e.data.type);void 0!==e.data.type&&"undefined"!==e.data.type?t?(e.data.mustAcknowledge&&this.acknowledge(e.data),t.forEach((t=>{t.forEach((t=>{t(e)}))}))):this.errorHandler&&this.errorHandler(new wa(`Listener does not exist for ${e.data.type}. Add one to your messenger instance:\n            messenger.onMessage({\n                    listener: (msg) => {},\n                    messageType: '${e.data.type}',\n                });\n          `),e):void 0!==this.errorHandler&&this.errorHandler(new Pa("Received a messenger message with an undefined type"),e)}logMessengerTimeout(e){const t=new Ra(e.type,e.id,this.iframeID);this.errorHandler&&this.errorHandler(t,new MessageEvent(e.type,{data:e}))}handleMessageContract(e){const{errorSerializer:t}=this,{payloadSerializer:r}=this;if(!e.mustAcknowledge)return new Promise((e=>{e({})}));let n;const i=()=>{[Ua.ACK,Ua.OK,Ua.ERROR].forEach((t=>{const r=this.messageListeners.get(`${e.type}:${t}`);void 0!==r&&r.delete(n)}))},o=window.setTimeout((()=>{this.logMessengerTimeout(e)}),1e4);return new Promise(((s,a)=>{n=this.onMessage({listener(){clearTimeout(o),e.mustRespond||(i(),s({}))},messageType:`${e.type}:${Ua.ACK}`}),this.onMessage({listener(e){i();const{payload:t}=e.data;if(void 0===r)s(t);else{const e=r.deserialize(t);s(e)}},messageType:`${e.type}:${Ua.OK}`},n),this.onMessage({listener(e){i();const{payload:r}=e.data;if(void 0===t)a(r);else{const e=t.deserialize(r);a(e)}},messageType:`${e.type}:${Ua.ERROR}`},n)}))}acknowledge(e){const t=`${e.type}:${Ua.ACK}`;return this.message({id:e.id,mustAcknowledge:!1,mustRespond:!1,payload:void 0,type:t})}postResponse(e,t,r){return this.message({id:t.id,mustAcknowledge:!0,mustRespond:!1,payload:r,type:e})}message(e){const t=this.handleMessageContract(e);return e.type&&"undefined"!==e.type||void 0===this.errorHandler||this.errorHandler(new Pa("attempting to send a messenger message with an undefined type")),this.channel.postMessage(e),t}addMessageEventListener(e,t){const{messageType:r,listener:n}=e,i=this.messageListeners.get(r);if(i){const e=i.get(t);e?e.push(n):i.set(t,[n])}else this.messageListeners.set(r,new Map([[t,[n]]]))}}!function(e){e.CAPTURE_AUTHORIZATION="CAPTURE_AUTHORIZATION"}(Ha||(Ha={}));const Ba=function(){const e={name:Oa.IFRAME_NAME};return new ja(e)},Ga=async function(e,t,r){const n=Oa.getSDKBaseUrlForEnv(r);e.connect({origin:n,window:t.contentWindow},t.id),await e.sendMessage("INITIALIZE",{env:r})},qa={build(e,t){const r=Ba(),n=new Ia;return Promise.resolve(Object.freeze({captureAuthorization:async function(i){let o;try{!function(e){if(!e.idempotencyKey)throw new Sa("idempotencyKey is invalid");if(!e.applicationId)throw new Sa("applicationId is invalid");if(!e.locationId)throw new Sa("locationId is invalid");if(!e.total)throw new Sa("total needs to be provided");if("number"!=typeof e.total.amount)throw new Sa("amount needs to be a number");if(!e.total.currencyCode)throw new Sa("total needs to be valid");if("CHARGE"===e.intent){if(!e.bankNonce&&!e.bankAccountId)throw new Sa("one of bankNonce or bankAccountId needs to be provided");if(e.bankNonce&&e.bankAccountId)throw new Sa("only one of bankNonce or bankAccountId needs to be provided")}else if("RECURRING_CHARGE"===e.intent){if(!e.bankAccountId)throw new Sa("bankAccountId needs to be provided for recurring payments");if("WEEKLY"!==e.cadence&&"MONTHLY"!==e.cadence)throw new Sa("Unsupported cadence. Must be one of: WEEKLY, MONTHLY");if(!e.startDate)throw new Sa("Invalid startDate")}}(i),o=await Ta(e,t),await Ga(r,o,e);const s=await r.request(Ha.CAPTURE_AUTHORIZATION,i);"success"===s.kind?n.dispatchEvent({type:"signed",token:s.token}):n.dispatchEvent({type:"canceled"})}catch(e){n.dispatchEvent({type:"error",error:e})}o&&ba(o)},addEventListener:function(e,t){n.addEventListener(e,t)}}))}};var Fa=["bankAccountDetails"];function Va(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function za(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ya(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var $a={build(e){var{env:t,transactionId:r,session:n,context:i,onSigned:o,onCanceled:s,onError:a}=e;function c(){var e;return e=function*(e){var c=yield qa.build(t,d.VERSION);i.metricsHandler.logEvent(oo.ACHAuthStart);var{bankAccountDetails:u}=e,l=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,Fa);c.addEventListener("signed",(function(e){o(e.token,u),i.metricsHandler.logEvent(oo.ACHAuthOk)})),c.addEventListener("canceled",(function(){i.metricsHandler.logEvent(oo.ACHAuthCanceled),s()})),c.addEventListener("error",(function(e){var t=e.error;a(t instanceof Sa?new vn(t.message):new Fn("authorizing the payment")),i.metricsHandler.logEvent(oo.ACHAuthError),i.errorLogger.captureException(t)})),yield c.captureAuthorization(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Va(Object(r),!0).forEach((function(t){za(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Va(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({idempotencyKey:r,applicationId:n.applicationId,locationId:n.locationId},l))},c=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Ya(o,n,i,s,a,"next",e)}function a(e){Ya(o,n,i,s,a,"throw",e)}s(void 0)}))},c.apply(this,arguments)}return Object.freeze({run:function(e){return c.apply(this,arguments)}})}},Ka=function(){var e=document.createElement("div");return e.setAttribute("style","position:fixed; top: 0; left: 0; width: 100vw; height: 100%; z-index: 3; background-color: ".concat("rgba(0, 0, 0, 0.8)","; opacity: 0;")),document.body.appendChild(e),e.style.transition="opacity ".concat("cubic-bezier(0.26, 0.1, 0.48, 1)"," ").concat("0.24s"),setTimeout((function(){e.style.opacity="1"})),new Promise((function(t){setTimeout((function(){t(e)}),240)}))},Wa=function(e){e&&(e.style.transition="opacity ".concat("cubic-bezier(0.52, 0, 0.74, 0)"," ").concat("0.16s"),setTimeout((function(){e.style.opacity="0"})),setTimeout((function(){e.remove()}),160))};function Qa(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Za(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Qa(o,n,i,s,a,"next",e)}function a(e){Qa(o,n,i,s,a,"throw",e)}s(void 0)}))}}class Ja extends ua{constructor(e,t){super(e),this.methodType=ii.ACH,this.tokenizeInProgress=!1,this.wasFirstInteractionCalled=!1;try{!function(e){if(e&&e.length>0){var t;try{t=new URL(e)}catch(t){throw new _n("redirectURI",e,"Must be a valid URI")}if([...t.searchParams.values()].length>0)throw new _n("redirectURI",e,"URI must not contain query parameters");return!0}throw new _n("redirectURI","".concat(e),"Must be a valid URI")}(null==t?void 0:t.redirectURI)}catch(e){this.metricsHandler.logEvent(co.InvalidRedirectURI,void 0,e.message),console.warn(e.message)}try{!function(e){if(e&&e.length>0){if(e.length>50)throw new _n("transactionId",e,"String must be between 1 and 50 characters");return!0}throw new _n("transactionId","".concat(e),"String must be between 1 and 50 characters")}(null==t?void 0:t.transactionId)}catch(e){console.warn(e.message)}this.transactionId=(null==t?void 0:t.transactionId)||aa()}initialize(){var e=this;return Za((function*(){var t=e.dispatchPlaidEvent.bind(e);e.plaidNonceFlow=yield _a(e.context,t),e.achAuthFlow=$a.build({env:d.env,transactionId:e.transactionId,session:e.session,context:e.context,onSigned:e.dispatchSuccessfulTokenResult.bind(e),onCanceled:e.dispatchCancelResult.bind(e),onError:e.dispatchError.bind(e)})}))()}tokenize(e){var t=this;return Za((function*(){try{if(t.throwIfDestroyed(),t.tokenizeInProgress)throw new qn([da]);if(!e||!e.accountHolderName.trim())throw new nn;var r=t.context.getFeatureFlagValues()[Ti.CanUseAchAuth];if(!function(e,t){switch(t){case wi.NoSupport:return ec(e);case wi.Supported:return!0;case wi.Required:return!ec(e);case wi.Legacy:return!0;default:return!1}}(e,r))throw new vn("Invalid parameter format for ACH tokenize");if(!t.hasEventListener(zr.ON_TOKENIZATION)){var n="Add event listener for '".concat(zr.ON_TOKENIZATION,"' before calling tokenize.");console.warn("".concat(n," This will result in an error when using the Plaid OAuth flow."))}if(void 0===t.achAuthFlow||void 0===t.plaidNonceFlow)throw new Fn("Must call initialize() before tokenize() call");if(t.tokenizeInProgress=!0,t.handleFirstInteraction(),function(e){return Xa(e)&&"RECURRING_CHARGE"===e.intent}(e))return t.veil=yield Ka(),void(yield t.achAuthFlow.run({intent:e.intent,bankAccountId:e.bankAccountId,total:e.total,cadence:e.cadence,startDate:e.startDate}));if(function(e){return Xa(e)&&"CHARGE"===e.intent}(e)&&e.bankAccountId)return t.veil=yield Ka(),void(yield t.achAuthFlow.run({bankAccountId:e.bankAccountId,total:e.total,intent:e.intent}));ec(e)||(t.veil=yield Ka());var i=yield t.plaidNonceFlow.run(e);if(ec(e)||r===wi.Legacy)switch(i.status){case si.OK:var o=t.buildSuccessfulTokenResult(i.bankNonce,i.accountDetails);return t.dispatchTokenizationEvent(o),t.resetFirstInteraction(),o;case si.CANCEL:var s=t.buildCancelTokenResult();return t.dispatchTokenizationEvent(s),s;default:throw new Fn("Unexpected tokenize flow status")}return void(yield t.runAchAuthFlowBasedOnPlaidResult(i,e))}catch(e){throw t.dispatchError(e),e}finally{t.tokenizeInProgress=!1,Wa(t.veil)}}))()}destroy(){var e;return this.status=sa.DESTROYED,this.metricsHandler.logEvent(ao.Destroyed),null===(e=this.plaidNonceFlow)||void 0===e||e.destroy(),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logEvent(ao.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}runAchAuthFlowBasedOnPlaidResult(e,t){var r=this;return Za((function*(){if(e.status===si.CANCEL)r.dispatchTokenizationEvent(r.buildCancelTokenResult());else switch(t.intent){case"CHARGE":yield r.achAuthFlow.run({intent:t.intent,bankNonce:e.bankNonce,total:t.total,bankAccountDetails:e.accountDetails});break;case"STORE":r.dispatchSuccessfulTokenResult(e.bankNonce,e.accountDetails);break;default:throw new vn("Unsupported intent ".concat(t.intent,". Must be one of: CHARGE, STORE, RECURRING_CHARGE"))}}))()}resetFirstInteraction(){this.wasFirstInteractionCalled=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(oo.FirstInteraction))}buildCancelTokenResult(){return{status:si.CANCEL}}buildSuccessfulTokenResult(e,t){var r={status:si.OK,token:e};return t&&(r.details={bankAccount:t,method:ii.ACH}),r}dispatchCancelResult(){this.dispatchTokenizationEvent(this.buildCancelTokenResult())}dispatchSuccessfulTokenResult(e,t){this.resetFirstInteraction();var r=this.buildSuccessfulTokenResult(e,t);this.dispatchTokenizationEvent(r)}dispatchError(e){this.dispatchEvent(zr.ON_TOKENIZATION,{error:e})}dispatchPlaidEvent(e,t){this.dispatchEvent(e,t)}dispatchTokenizationEvent(e){this.dispatchEvent(zr.ON_TOKENIZATION,{tokenResult:e})}}function Xa(e){return"intent"in e}function ec(e){return!("intent"in e)}r(9529),r(1235);var tc,rc,nc=[Hn,jn,Bn,Gn,Nn,Ln,Fn],ic=[Dn,Bn,Hn,jn,Gn],oc=[qn,Dn],sc=function(e,t){var r=document.createElement("iframe");return new Promise(((n,i)=>{r.onerror=e=>{i(e)},r.onload=()=>{n(r)},Object.entries(e).forEach((e=>{var[t,n]=e;r.setAttribute(t,n)})),t?t.appendChild(r):document.body.appendChild(r)}))},ac=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)};!function(e){e.CONFIGURE="configure",e.DESTROY="destroy",e.LOAD_CARDS_FORM="loadCardsForm",e.REQUEST_CARD_NONCE_IF_VALID_FORM="requestCardNonceIfValidForm",e.SET_FOCUS="setFocus",e.CLEAR="clear",e.SET_ERROR="setError"}(tc||(tc={})),function(e){e.CARD_BRAND_CHANGED="cardBrandChanged",e.ERROR_CLASS_ADDED="errorClassAdded",e.ERROR_CLASS_REMOVED="errorClassRemoved",e.FOCUS_CLASS_ADDED="focusClassAdded",e.FOCUS_CLASS_REMOVED="focusClassRemoved",e.POSTAL_CODE_CHANGED="postalCodeChanged",e.SET_POSTAL_COUNTRY="setPostalCountry",e.ESCAPE="escape",e.SUBMIT="submit"}(rc||(rc={}));var cc=new Set(["DIV","SPAN"]),uc=new Set(["DIV","SPAN"]),lc=new Set(["DIV","SPAN","BUTTON"]);function dc(e,t){var r;if(function(e){return"string"==typeof e}(e)){var n=document.querySelector(e);if(!n)throw new pn(e);r=n}else{if(!(e instanceof HTMLElement))throw new xn(e,t);if(r=e,!document.contains(r))throw new pn(r)}if(!t.has(r.nodeName))throw new xn(r,t);return r}function hc(e){return dc(e,cc)}function pc(e){return dc(e,lc)}var fc=["top","right","bottom","left"],gc="sq-focus",mc="sq-error",vc=".".concat(gc),yc=".".concat(mc),Ec=(r(8319),{ASPECT_RATIO:/^\d+\/\d+$/,HEX:/^#([\dA-Fa-f]{3}|[\dA-Fa-f]{6})$/,NEGATIVE_EM:/^-\d*\.?\d+em$/,NEGATIVE_PERCENT:/^\d*\.?\d+%$/,NEGATIVE_PT:/^-\d*\.?\d+pt$/,NEGATIVE_PX:/^-\d*\.?\d+px$/,POSITIVE_EM:/^\d*\.?\d+em$/,POSITIVE_PERCENT:/^\d*\.?\d+%$/,POSITIVE_PT:/^\d*\.?\d+pt$/,POSITIVE_PX:/^\d*\.?\d+px$/,POSITIVE_RESOLUTION:/^\d*\.?\d+(?:dpi|dpcm|dppx|x)$/,RGB:/^rgb\((\s*\d{1,3},){2}\s*\d{1,3}\)$/,RGBA:/^rgba\((\s*\d{1,3},){3}\s*(1|0*.\d*)\)$/}),_c=/\s(?![^(]*\))/,Sc=new Set(["screen","all","print","speech"]),Ac=new Set(["and"]),Cc=new Set(["not","only"]),Ic=new Set(["portrait","landscape"]),Oc=new Set(["xx-small","x-small","small","medium","large","x-large","xx-large"]),Tc=new Set(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","transparent","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"]),bc=new Set([100,200,300,400,500,600,700,800,900]),wc=new Set(["100","200","300","400","500","600","700","800","900","normal","bold","bolder","lighter"]),Pc=new Set(["normal"]),Rc=new Set(["smaller","larger"]),Nc=new Set(["andale mono","arial","arial black","arial narrow","arial rounded mt bold","avant garde","baskerville","big caslon","bodoni mt","book antiqua","brush script mt","calibri","calisto mt","cambria","candara","century gothic","charcoal","comic sans ms","consolas","copperplate","copperplate gothic light","courier","courier new","cursive","didot","fantasy","franklin gothic medium","futura","garamond","geneva","georgia","gill sans","goudy old style","helvetica","helvetica neue","hoefler text","impact","lucida bright","lucida console","lucida grande","lucida sans unicode","lucida sans typewriter","monaco","monospace","optima","palatino","palatino linotype","papyrus","perpetua","rockwell","rockwell extra bold","sans-serif","segoe ui","serif","square market","square sans text","tahoma","times","times new roman","trebuchet ms","verdana"]),Dc=new Set(["none","antialiased","subpixel-antialiased"]),Lc=new Set(["grayscale","auto"]),xc=new Set(["none"]);function kc(e){return null!=e&&e.split(/, ?(?![^(]*\))/).every((e=>function(e){if(null==e)return!1;if("none"===e)return!0;var t=e.split(/ (?![^(]*\))/),r=0;if("inset"===t[0]&&(t.shift(),r++),"inset"===t[t.length-1]){if(r>0)return!1;t.pop()}for(var n=0;n<2;n++){var i=t.shift();if(void 0===i||!Gc(i))return!1}switch(t.length){case 0:return!0;case 1:return Vc(t[0])||Fc(t[0]);case 2:return Fc(t[0])&&(Vc(t[1])||qc(t[1]));case 3:return Fc(t[0])&&qc(t[1])&&Vc(t[2]);default:return!1}}(e)))}function Mc(e){return["border-box","content-box"].includes(e)}function Uc(e){return e.split(" ").every((e=>function(e){return 0===Number(e)||ru(e)||ou(e)}(e)))}function Hc(e){var t=e.split(" ");return!(0===t.length||t.length>4)&&t.every(jc)}function jc(e){return 0===Number(e)||ru(e)||ou(e)}function Bc(e){return 0===Number(e)||ru(e)||ou(e)||nu(e)||su(e)}function Gc(e){return 0===Number(e)||tu(e)||iu(e)}function qc(e){return 0===Number(e)||tu(e)||iu(e)}function Fc(e){return 0===Number(e)||ru(e)||ou(e)}function Vc(e){return null!=e&&(function(e){return Tc.has(e.toLowerCase())}(e)||function(e){return Ec.HEX.test(e)}(e)||function(e){return Ec.RGB.test(e)}(e)||function(e){return Ec.RGBA.test(e)}(e))}function zc(e){return null!=e&&(function(e){return Oc.has(e.toLowerCase())}(e)||function(e){return Rc.has(e.toLowerCase())}(e)||ru(e)||au(e)||ou(e)||cu(e))}function Yc(e){return null!==e&&e.split(", ").every((e=>{return t=e.toLowerCase().trim().replace(/["']+/g,""),Nc.has(t);var t}))}function $c(e){var t=Number(e);return Number.isNaN(t)?wc.has(e.toLowerCase()):bc.has(t)}function Kc(e){return"normal"===e||iu(e)||function(e){return au(e)||function(e){return Ec.NEGATIVE_PT.test(e)}(e)}(e)||tu(e)}function Wc(e){var t=Number(e);return!Number.isNaN(t)&&t>=0||Pc.has(e)||ou(e)||ru(e)||au(e)||cu(e)}function Qc(e){return Dc.has(e)}function Zc(e){return Lc.has(e)}function Jc(e){return xc.has(e)}function Xc(e){if(null===e)return!1;var t=e.toString().split(" ");return!(t.length>4)&&t.every((e=>function(e){return ru(e)||ou(e)||cu(e)||0===Number(e)}(e)))}function eu(e){if(!e.startsWith("(")||!e.endsWith(")"))return!1;var t=e.slice(1,-1),[r,n]=t.split(/: */);switch(r){case"width":case"min-width":case"max-width":case"height":case"min-height":case"max-height":case"device-width":case"min-device-width":case"max-device-width":case"device-height":case"min-device-height":case"max-device-height":return ru(n)||ou(n)||cu(n);case"resolution":case"min-resolution":case"max-resolution":return function(e){return Ec.POSITIVE_RESOLUTION.test(e)}(n);case"aspect-ratio":case"min-aspect-ratio":case"max-aspect-ratio":case"device-aspect-ratio":case"min-device-aspect-ratio":case"max-device-aspect-ratio":return function(e){return Ec.ASPECT_RATIO.test(e)}(n);case"color":case"color-index":case"monochrome":return void 0===n;case"min-color":case"max-color":case"min-color-index":case"max-color-index":case"min-monochrome":case"max-monochrome":return function(e){return Number(e)>=0}(n);case"orientation":return function(e){return Ic.has(e)}(n);default:return!1}}function tu(e){return ru(e)||nu(e)}function ru(e){return Ec.POSITIVE_PX.test(e)}function nu(e){return Ec.NEGATIVE_PX.test(e)}function iu(e){return ou(e)||su(e)}function ou(e){return Ec.POSITIVE_EM.test(e)}function su(e){return Ec.NEGATIVE_EM.test(e)}function au(e){return Ec.POSITIVE_PT.test(e)}function cu(e){return Ec.POSITIVE_PERCENT.test(e)}var uu={sanitizeDeclarationValue:function(e,t){var r=(e=>{switch(e){case"border-color":case"background-color":case"color":case"-webkit-text-fill-color":return Vc;case"-webkit-box-shadow":case"box-shadow":return kc;case"box-sizing":return Mc;case"font-family":return Yc;case"font-size":return zc;case"font-weight":return $c;case"letter-spacing":return Kc;case"line-height":return Wc;case"padding":return Xc;case"-webkit-font-smoothing":return Qc;case"-moz-osx-font-smoothing":return Zc;case"display":return Jc;case"border-radius":return Uc;case"border-width":return Hc;case"top":case"bottom":case"left":case"right":return Bc;case"width":return function(e){return e};default:return}})(e);return r&&r(t)||function(e){return["unset","inherit","revert","initial"].includes(e)}(t)?t:""},validateMediaQuery:function(e){return!!(t=e).startsWith("@media")&&t.slice(7,t.length).split(/, */).every((e=>{var t=e.split(_c);if(0===t.length)return!1;var r=0;if(!t[0].startsWith("(")){var n=0;if(Cc.has(t[0])&&(n=1),t.length===n+1)return Sc.has(t[n]);if(!Sc.has(t[n])||!Ac.has(t[n+1]))return!1;r=2+n}if((t.length-r)%2==0)return!1;for(var[i,o]of Object.entries(t.slice(r)))if(!(Number(i)%2==0?eu(o):Ac.has(o)))return!1;return!0}));var t}};function lu(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r.length>0&&!r.includes(e))throw new Hn(e);var i=Ni.cssProperty(e),o=uu.sanitizeDeclarationValue(i,t);if(0===o.length)throw new jn(e,t);return n&&(o+=" !important"),Ni.formatCSSKeyValuePair(i,o)}function du(e,t,r){var n=[],i=[],o=new Set(e.excludeProperties||[]);for(var[s,a]of Object.entries(t))if(!o.has(s)){var c=a||"";try{n.push(lu(s,c,r))}catch(e){i.push(e)}}if(i.length>0)throw new Gn(i);return Object.fromEntries(e.toSelectors.map((function(e){return[e,n]})))}function hu(e,t,r){var n={},i=[];if(e.forEach((function(e){var{property:o,setAsImportant:s,toProperty:a,toSelectors:c,transformPropertyValue:u}=e,l=t[o];if(l){var d=u?u(l):l;try{var h=lu(null!=a?a:o,d,a?[...r,a]:r,s);c.forEach((e=>{n[e]||(n[e]=[]),n[e].push(h)}))}catch(e){i.push(e)}}})),i.length>0)throw new Gn(i);return n}var pu={borderChainToDirectionValue:function(e,t){var r=t.split(" ");switch(r.length){case 1:return r[0];case 2:switch(e){case"top":case"bottom":return r[0];default:return r[1]}case 3:switch(e){case"top":return r[0];case"bottom":return r[2];default:return r[1]}case 4:switch(e){case"top":return r[0];case"right":return r[1];case"bottom":return r[2];case"left":return r[3];default:return""}default:return""}},compileStyleString:function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=[],s=[...Object.keys(r.selectorMappings),...Object.keys(r.selectorPropertyMappings||{})],a=new Set(s),c=new Set(Object.values(n));Object.keys(t).forEach((e=>{c.has(e)||function(e,t){return!t&&uu.validateMediaQuery(e)}(e,i)||o.push(new Bn(e))}));var u={};function l(e){for(var[t,r]of Object.entries(e))u[t]||(u[t]=[]),u[t].push(...r)}for(var d of a){var h,p=t[d],f=r.allowedAttributes[d]||[],g=r.selectorMappings[d]||[],m=(null==r||null===(h=r.selectorPropertyMappings)||void 0===h?void 0:h[d])||[];if(p){try{l(du(g,p,f))}catch(e){e instanceof Gn&&o.push(...e.errors)}try{l(hu(m,p,f))}catch(e){e instanceof Gn&&o.push(...e.errors)}}}if(Object.keys(t).filter((e=>!a.has(e)&&uu.validateMediaQuery(e))).forEach((i=>{try{var s=e(t[i],r,n,!0);u[i]=[s]}catch(e){o.push(...e.errors)}})),o.length>0)throw new Gn(o);return function(e){var t=[];for(var[r,n]of Object.entries(e))n&&n.length>0&&t.push("\n      ".concat(r," { ").concat(n.join(" ")," }\n      "));return t.join("")}(u)}},fu="sq-card-iframe-container",gu="sq-card-wrapper",mu="sq-card-component",vu="sq-card-message",yu="sq-card-message-error",Eu="sq-card-message-no-error",_u="sq-visible",Su=".".concat(gu),Au=".".concat(mu),Cu=".".concat(fu),Iu="".concat(Su).concat(vc),Ou="".concat(Su).concat(yc),Tu="".concat(Su," ").concat(Au),bu="".concat(Su," ").concat(Cu),wu="".concat(Iu," ").concat(Cu),Pu="".concat(Ou," ").concat(Cu),Ru=".sq-card-message-error",Nu=".sq-card-message-error::before",Du=".sq-card-message-no-error",Lu=".sq-card-message-no-error::before",xu="".concat(Cu).concat("::before"),ku=["borderWidth"];function Mu(e){var t=["".concat(e).concat(yc," ").concat(xu),"".concat(e).concat(vc," ").concat(xu)];return fc.map((e=>{return{property:"borderWidth",toProperty:e,toSelectors:t,transformPropertyValue:(r=e,function(e){var t=pu.borderChainToDirectionValue(r,e);return"0"===t[0]?t:"-".concat(t)})};var r}))}function Uu(e,t){return pu.compileStyleString(e,function(e){var t="#".concat(e);return{allowedAttributes:{[Br.CARD_COMPONENT]:ai,[Br.CARD_COMPONENT_FOCUS]:ci,[Br.CARD_COMPONENT_ERROR]:ci,[Br.CARD_INPUT_HELPER_TEXT]:ui,[Br.CARD_INPUT_HELPER_ICON]:li,[Br.CARD_INPUT_ERROR_TEXT]:ui,[Br.CARD_INPUT_ERROR_ICON]:li},selectorMappings:{[Br.CARD_COMPONENT]:{toSelectors:["".concat(t).concat(bu)]},[Br.CARD_COMPONENT_FOCUS]:{excludeProperties:ku,toSelectors:["".concat(t).concat(wu)]},[Br.CARD_COMPONENT_ERROR]:{excludeProperties:ku,toSelectors:["".concat(t).concat(Pu)]},[Br.CARD_INPUT_HELPER_TEXT]:{toSelectors:["".concat(t," ").concat(Du)]},[Br.CARD_INPUT_HELPER_ICON]:{toSelectors:["".concat(t," ").concat(Lu)]},[Br.CARD_INPUT_ERROR_TEXT]:{toSelectors:["".concat(t," ").concat(Ru)]},[Br.CARD_INPUT_ERROR_ICON]:{toSelectors:["".concat(t," ").concat(Nu)]}},selectorPropertyMappings:{[Br.CARD_INPUT]:[{property:"backgroundColor",toSelectors:["".concat(t).concat(bu)]}],[Br.CARD_COMPONENT]:[{property:"borderRadius",toSelectors:["".concat(t," ").concat(xu),"".concat(t).concat(Tu)]},{property:"borderWidth",toProperty:"width",toSelectors:["".concat(t).concat(bu)],transformPropertyValue:e=>function(e){var t=["left","right"].map((t=>{var r=pu.borderChainToDirectionValue(t,e);return"0"===r&&(r="0px"),r})).join(" + ");return"calc(100% - (".concat(t,"))")}(e)},...Mu(t)],[Br.CARD_COMPONENT_ERROR]:[{property:"borderColor",toSelectors:["".concat(t).concat(yc," ").concat(xu)]},{property:"borderWidth",toSelectors:["".concat(t).concat(yc," ").concat(xu)]}],[Br.CARD_COMPONENT_FOCUS]:[{property:"borderColor",toSelectors:["".concat(t).concat(vc," ").concat(xu)]},{property:"borderWidth",toSelectors:["".concat(t).concat(vc," ").concat(xu)]}],[Br.CARD_INPUT_ERROR_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(Nu)]}],[Br.CARD_INPUT_HELPER_ICON]:[{property:"color",toProperty:"backgroundColor",toSelectors:["".concat(t," ").concat(Lu)]}]}}}(t),Br)}var Hu={addStyleElement:function(e,t,r,n){ju(e,t,document.head).then(r).catch(n)},addStyleElementToTarget:ju,hasExistingStyleElement:function(e){return Boolean(document.getElementById(e))}};function ju(e,t,r){return new Promise(((n,i)=>{if(Hu.hasExistingStyleElement(t))n();else{var o=document.createElement("link");o.onload=()=>{n()},o.onerror=()=>{i(new Error("Failed to load stylesheet at ".concat(e,". The onerror callback was invoked.")))},o.href=e,o.rel="stylesheet",o.type="text/css",o.id=t,r.appendChild(o)}}))}var Bu=Hu;function Gu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gu(Object(r),!0).forEach((function(t){Fu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gu(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fu(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vu(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function zu(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Vu(o,n,i,s,a,"next",e)}function a(e){Vu(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Yu="single-card-wrapper",$u="emptyMessage",Ku=[jr.CARD_NUMBER,jr.EXPIRATION_DATE,jr.CVV,jr.POSTAL_CODE];function Wu(e){return"".concat(Yu,"-").concat(e)}function Qu(e,t){var r=function(e){return"".concat("sq-single-card-custom-styles","-").concat(e)}(t),n=document.getElementById(r);null===n&&((n=document.createElement("style")).id=r,document.head.appendChild(n)),n.innerHTML=Uu(e,Wu(t))}var Zu=class extends ua{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.methodType=ii.CARD,this.postalCountry=Oo.US,this.onResize=this.onResize.bind(this),this.id=aa(),this.iframeName="".concat("single-card","-").concat(this.id),this.paymentMessenger=new pa(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(t.includeInputLabels),this.initializeMessageBus(),this.errorList=new Set,this.updateCardDetailText=this.updateCardDetailText.bind(this),this.context.addLocaleChangedListener(this.updateCardDetailText),this.validateOptions(t),this.initialOptions=t,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}configure(){var e=arguments,t=this;return zu((function*(){var r=e.length>0&&void 0!==e[0]?e[0]:{};t.throwIfDestroyedOrNotAttached(),t.validateOptions(r),t.metricsHandler.logEvent(ao.ConfigUpdated,r),void 0!==r.includeInputLabels&&(t.inputLabelsIncluded=Boolean(r.includeInputLabels),t.onResize()),void 0!==r.style&&Qu(r.style,t.id);try{yield t.paymentMessenger.request(tc.CONFIGURE,{includeInputLabels:t.inputLabelsIncluded,postalCode:r.postalCode,style:r.style,type:t.methodType})}catch(e){if(Ni.isInstanceOf(e,ic))throw e;throw t.errorLogger.captureException(e),new Fn("configuring the Card Element")}}))()}attach(e){var t=this;return zu((function*(){var r;t.throwIfDestroyedOrAlreadyAttached(),t.status=sa.ATTACHED,t.metricsHandler.logEvent(oo.AttachStart),t.metricsHandler.logEvent(ao.Configured,t.initialOptions);try{r=hc(e)}catch(e){throw t.metricsHandler.logEvent(oo.AttachError),t.status===sa.ATTACHED&&(t.status=sa.DETACHED),e}try{t.attachPromise=t.buildElementOnIframe(r),yield t.attachPromise,t.attachPromise=void 0,t.throwIfDestroyed(),t.element=r,window.addEventListener("resize",t.onResize),t.showCardElement(),t.onResize(),t.metricsHandler.logEvent(oo.AttachOK)}catch(e){if(t.status===sa.ATTACHED&&(t.status=sa.DETACHED),t.metricsHandler.logEvent(oo.AttachError),Ni.isInstanceOf(e,nc))throw e;throw t.errorLogger.captureException(e),new Fn("attaching the Card Element")}}))()}detach(){return this.throwIfDestroyed(),this.detachElement(sa.DETACHED,ao.Detached)}destroy(){var e=this;return zu((function*(){if(e.status===sa.DESTROYED)return!1;var t=yield e.detachElement(sa.DESTROYED,ao.Destroyed);return e.context.removeLocaleChangedListener(e.updateCardDetailText),t}))()}focus(e){var t=this;return zu((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(jr).includes(e))throw new yn(e);t.metricsHandler.logEvent(ao.Focused,e);try{return yield t.paymentMessenger.request(tc.SET_FOCUS,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}clear(){var e=this;return zu((function*(){e.throwIfDestroyedOrNotAttached();try{return yield e.paymentMessenger.request(tc.CLEAR)}catch(t){e.errorLogger.captureException(t)}return e.metricsHandler.logEvent(ao.Clear),!1}))()}addEventListener(e,t){this.throwIfDestroyed(),this.metricsHandler.logEvent(ao.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){this.throwIfDestroyed(),super.removeEventListener(e,t)}tokenize(){var e=this;return zu((function*(){if(e.throwIfDestroyedOrNotAttached(),e.tokenizeInProcess)throw new qn([da]);e.tokenizeInProcess=!0,yield e.context.refreshWithCurrentAnalyticsToken();try{var t=yield e.paymentMessenger.request(tc.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:e.methodType});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),yield e.context.updateSession(t.sessionId),function(e){var{card:t,billingContact:r,cardNonce:n}=e;return{details:{card:t,method:ii.CARD,billing:r},status:si.OK,token:n}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof qi)return{errors:t.errors,status:si.INVALID};throw Ni.isInstanceOf(t,oc)?t:(e.errorLogger.captureException(t),Fi())}}))()}recalculateSize(){this.throwIfDestroyedOrNotAttached(),this.metricsHandler.logEvent(ao.RecalculatedSize),this.onResize()}setError(e){var t=this;return zu((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(jr).includes(e))throw new yn(e);t.metricsHandler.logEvent(ao.SetError,e);try{return yield t.paymentMessenger.request(tc.SET_ERROR,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}buildElementOnIframe(e){var t=this;return zu((function*(){yield t.buildCardElement(e),yield t.paymentMessenger.request(tc.LOAD_CARDS_FORM,{configuration:qu(qu({},t.initialOptions),{},{type:t.methodType}),iframeName:t.iframeName}),yield t.stylesLoadedPromise}))()}validateOptions(e){var t={includeInputLabels:e=>"boolean"==typeof e,postalCode:e=>"string"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[r,n]=e;if(void 0===t[r])throw new En(r);if(t[r]&&!t[r](n))throw new _n(r,n)}))}buildErrorMessage(e){switch(e){case jr.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.errors.cardNumberError;case jr.CVV:return this.context.getLocaleString().paymentMethods.cards.errors.cvvError;case jr.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.errors.expirationDateError;case jr.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.errors.postalCodeErrors[this.postalCountry];default:return""}}buildHelperMessage(e){switch(e){case jr.CARD_NUMBER:return this.context.getLocaleString().paymentMethods.cards.helperText.cardNumber;case jr.CVV:return this.context.getLocaleString().paymentMethods.cards.helperText.cvv;case jr.EXPIRATION_DATE:return this.context.getLocaleString().paymentMethods.cards.helperText.expirationDate;case jr.POSTAL_CODE:return this.context.getLocaleString().paymentMethods.cards.helperText.postalCodes[this.postalCountry];default:return""}}updateCardDetailText(){var e,t,r;this.cardDetail&&(0===this.errorList.size?(e=null!==(r=this.focusedInput)&&void 0!==r?r:$u,t=this.buildHelperMessage(e),this.cardDetail.classList.remove(yu),this.cardDetail.classList.add(Eu)):(e=Ku.find((e=>this.errorList.has(e)))||$u,t=this.buildErrorMessage(e),this.cardDetail.classList.add(yu),this.cardDetail.classList.remove(Eu)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(_u):this.cardDetail.classList.remove(_u))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}removeFocusClass(){setTimeout((()=>{var e;this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(gc)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(mc))}handleInputEvent(e){var{data:t}=e,r=t.payload.body;switch(r.eventType){case Hr.ERROR_CLASS_ADDED:var n;this.addErrorMessage(r.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(mc);break;case Hr.ERROR_CLASS_REMOVED:this.removeErrorMessage(r.field),this.removeErrorClass();break;case Hr.FOCUS_CLASS_ADDED:var i;this.addFocusMessage(r.field),null===(i=this.wrapperElement)||void 0===i||i.classList.add(gc);break;case Hr.FOCUS_CLASS_REMOVED:this.removeFocusMessage(r.field),this.removeFocusClass()}super.dispatchEvent(r.eventType,r)}handleSetPostalCountry(e){var{data:t}=e;this.postalCountry=t.payload.body.postalCountry}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t=this.handleSetPostalCountry.bind(this),r={[rc.SET_POSTAL_COUNTRY]:t,[rc.FOCUS_CLASS_ADDED]:e,[rc.FOCUS_CLASS_REMOVED]:e,[rc.ERROR_CLASS_ADDED]:e,[rc.ERROR_CLASS_REMOVED]:e,[rc.CARD_BRAND_CHANGED]:e,[rc.POSTAL_CODE_CHANGED]:e,[rc.SUBMIT]:e,[rc.ESCAPE]:e};this.paymentMessenger.initializeMessageBus(r)}buildCardIframe(e){return sc({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:d.SINGLE_CARD_IFRAME,width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}buildCardElement(e){var t=this;return zu((function*(){var r;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=Wu(t.id),t.wrapperElement.classList.add(gu),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(vu),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(fu),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(mu),t.wrapperElement.appendChild(t.cardDetail),Bu.addStyleElement(d.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(r=t.initialOptions)&&void 0!==r&&r.style&&Qu(t.initialOptions.style,t.id)}))()}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&(this.lastResizeWidth=this.iframe.clientWidth,!this.currentResizeTimeout)){var t=e=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var t=this.inputLabelsIncluded?62:48;e<=482&&(t=2*t+1),this.iframeContainer.style.height="".concat(Math.round(t),"px"),this.iframe.height="".concat(Math.round(t),"px")}};t(this.lastResizeWidth||0),this.currentResizeTimeout=window.setTimeout((()=>{t(this.lastResizeWidth||0),this.currentResizeTimeout=void 0}),100)}}detachElement(e,t){var r=this;return zu((function*(){var n=r.status;if(r.attachPromise)try{yield r.attachPromise}catch(e){}try{var i=yield r.paymentMessenger.request(tc.DESTROY);return r.element&&(ac(r.element),window.removeEventListener("resize",r.onResize)),r.status=e,r.metricsHandler.logEvent(t),i}catch(e){throw r.status=n,e}}))()}};function Ju(e){return{detail:"Received an error in redirectURI coming back from Cash App",message:"Received an error in redirect from Cash App: ".concat(e),type:"UNKNOWN"}}r(3105);var Xu,el=function(e){window.localStorage&&window.localStorage.removeItem(e)},tl=function(e){if(window.localStorage){var t,r=window.localStorage.getItem(e);if(!r)return null;try{t=JSON.parse(r)}catch(e){return null}return{key:e,value:t}}return null},rl=function(e){window.localStorage&&window.localStorage.setItem(e.key,JSON.stringify(e.value))};!function(e){e.REQUEST_CASH_APP_AUTH="REQUEST_CASH_APP_AUTH",e.REQUEST_CASH_APP_CUSTOMER="REQUEST_CASH_APP_CUSTOMER",e.REQUEST_CASH_APP_CREATE_WALLET_TOKEN="REQUEST_CASH_APP_CREATE_WALLET_TOKEN"}(Xu||(Xu={}));var nl=["state","code","access_token"],il=new Set(["iPhone Simulator","iPod Simulator","iPhone","iPod"]),ol={CASH_APP_OAUTH_PARAMS:nl,extractCashAppParamsFromURI:function(e,t){var r=new URL(e),n=0,i=[];nl.forEach((e=>{r.searchParams.get(e)&&(n++,i.push(e),r.searchParams.delete(e))}));var o=r.searchParams.get("error");return o&&r.searchParams.delete("error"),!o&&n>0&&n!==nl.length&&t.captureException(new Qi("redirectURI: removed [".concat(i.toString(),"] but not all of Cash App OAuth params [").concat(nl.toString(),"]"))),r.toString()},findAndRemoveQueryParams:function(e,t){var r={};if(!window.URLSearchParams)return r;var n=new URLSearchParams(e),i=t.length,o=0;if(t.forEach((e=>{r[e]=n.get(e),r[e]&&o++})),i===o){var s=new URLSearchParams(e);t.forEach((e=>{s.delete(e)}));var a="?".concat(s.toString()),u=c.windowHash;u&&(a+="".concat(u)),c.replaceWindowState(a)}return r},isIOS:function(){return il.has(window.navigator.platform)||/iPhone|iPod/.test(navigator.userAgent)&&"ontouchend"in document}};class sl extends en{constructor(){super("Cash Client: QR Code Image URL is not valid"),this.name="InvalidQrCodeUrlError",Object.setPrototypeOf(this,sl.prototype)}}function al(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function cl(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){al(o,n,i,s,a,"next",e)}function a(e){al(o,n,i,s,a,"throw",e)}s(void 0)}))}}var ul="".concat(d.ASSET_URL,"/cash.css");class ll{constructor(){this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t})),Bu.addStyleElement(ul,"sq-cash-app-styles",this.resolveStylePromise,this.rejectStylePromise)}createCashAppButton(e){var t=this;return cl((function*(){yield t.stylesLoadedPromise;var r,n=document.createElement("button"),i=document.createElement("img");return i.setAttribute("src",(r=e.theme===$n.DARK?"fff":"000","data:image/svg+xml,%3Csvg width='143' height='22' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M13.027 2c2.008 0 3.012 0 4.092.342a4.247 4.247 0 012.54 2.539C20 5.96 20 6.965 20 8.973v6.054c0 2.008 0 3.012-.342 4.092a4.247 4.247 0 01-2.539 2.54C16.04 22 15.035 22 13.027 22H6.973c-2.008 0-3.012 0-4.092-.342A4.247 4.247 0 01.34 19.12C0 18.04 0 17.035 0 15.027V8.973c0-2.008 0-3.012.342-4.092A4.248 4.248 0 012.88 2.34C3.96 2 4.965 2 6.973 2h6.054z' fill='%2300D64F'/%3E%3Cg clip-path='url(%23clip0)'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M10.411 8.757c.967 0 1.894.391 2.5.929a.38.38 0 00.525-.01l.72-.732a.376.376 0 00-.017-.547 5.695 5.695 0 00-1.931-1.086l.226-1.076a.377.377 0 00-.37-.455h-1.392a.377.377 0 00-.369.299l-.204.957C8.25 7.128 6.68 8.05 6.68 9.946c0 1.64 1.298 2.344 2.668 2.83 1.297.487 1.982.667 1.982 1.352 0 .703-.684 1.117-1.694 1.117-.92 0-1.885-.303-2.633-1.04a.376.376 0 00-.528-.002l-.774.764a.38.38 0 00.002.542c.604.586 1.368 1.01 2.24 1.248l-.212.997a.378.378 0 00.366.456l1.395.01a.377.377 0 00.372-.3l.201-.958c2.216-.137 3.572-1.341 3.572-3.104 0-1.622-1.351-2.307-2.992-2.866-.937-.343-1.748-.577-1.748-1.28 0-.684.757-.955 1.514-.955z' fill='%23fff'/%3E%3C/g%3E%3Cpath d='M37.316 8.99l.942-.592c.296-.192.365-.436.156-.715-1.167-1.585-2.858-2.352-4.775-2.352-3.572 0-6.03 2.631-6.03 6.43 0 3.834 2.458 6.466 6.083 6.466 2.091 0 3.677-.89 4.792-2.458.192-.296.122-.54-.174-.714l-.959-.558c-.278-.157-.522-.104-.714.157-.662.924-1.603 1.499-2.928 1.499-2.283 0-3.694-1.795-3.694-4.392 0-2.561 1.394-4.356 3.66-4.356 1.202 0 2.195.47 2.91 1.429.209.261.453.33.731.156zm8.91 9.01h1.045c.331 0 .523-.192.523-.523v-5.855c0-2.144-1.516-3.032-3.677-3.032-1.255 0-2.474.33-3.415.836-.297.157-.349.418-.21.715l.332.68c.156.313.4.365.714.208.767-.383 1.673-.592 2.405-.592.75 0 1.638.209 1.638.976 0 .871-1.133.958-2.457 1.15-1.238.174-3.242.558-3.242 2.806 0 1.812 1.308 2.84 3.19 2.84 1.272 0 2.073-.453 2.63-1.185v.488c0 .314.193.488.524.488zm-.645-4.548v1.045c0 1.377-.993 1.97-2.056 1.97-.854 0-1.447-.384-1.447-1.203 0-.889.697-1.098 1.499-1.255.819-.14 1.586-.244 2.004-.557zm4.651 2.248l-.505.592c-.209.262-.209.523.052.75.924.749 2.179 1.167 3.643 1.167 2.422 0 3.955-1.185 3.955-3.102 0-1.812-1.394-2.44-3.59-2.823-1.028-.174-2.056-.314-2.056-1.046 0-.662.732-.906 1.569-.906.906 0 1.742.297 2.335.715.261.209.523.209.732-.053l.488-.575c.226-.261.226-.522-.053-.731-.784-.593-1.934-1.098-3.415-1.098-1.987 0-3.73.854-3.73 2.875 0 1.934 1.639 2.492 3.329 2.788 1.603.28 2.265.418 2.265 1.116 0 .766-.732 1.08-1.707 1.08-.872 0-1.813-.227-2.562-.802-.279-.209-.54-.209-.75.053zM59.76 18h1.167c.331 0 .523-.192.523-.523v-4.67c0-1.394.906-2.23 2.091-2.23 1.255 0 1.569.888 1.569 1.864v5.036c0 .331.191.523.522.523H66.8c.331 0 .523-.192.523-.523v-5.542c0-1.969-1.133-3.345-3.067-3.345-1.22 0-2.214.54-2.806 1.359V6.08c0-.33-.192-.523-.523-.523H59.76c-.332 0-.523.192-.523.523v11.397c0 .331.191.523.523.523zm23.533 0h1.498c.384 0 .558-.244.419-.61L80.992 5.976c-.104-.297-.296-.419-.592-.419h-1.865c-.296 0-.488.122-.592.419L73.708 17.39c-.14.366.035.61.418.61h1.412c.296 0 .505-.14.592-.418l.907-2.667h4.757l.906 2.667c.087.279.296.418.593.418zM79.44 7.579l1.76 5.402h-3.59l1.83-5.402zm9.05 1.22h-1.167c-.331 0-.523.191-.523.523v11.187c0 .331.192.523.523.523h1.168c.33 0 .522-.192.522-.523v-3.694c.645.941 1.69 1.394 2.841 1.394 2.51 0 4.13-2.091 4.13-4.827 0-2.719-1.62-4.792-4.13-4.792-1.133 0-2.196.435-2.84 1.376v-.644c0-.332-.192-.523-.523-.523zm.523 4.583c0-1.586.802-2.858 2.37-2.858 1.534 0 2.283 1.29 2.283 2.858 0 1.586-.749 2.893-2.282 2.893-1.551 0-2.37-1.29-2.37-2.893zm10.544-4.583H98.39c-.331 0-.523.191-.523.523v11.187c0 .331.192.523.523.523h1.168c.33 0 .522-.192.522-.523v-3.694c.645.941 1.691 1.394 2.841 1.394 2.509 0 4.13-2.091 4.13-4.827 0-2.719-1.621-4.792-4.13-4.792-1.133 0-2.196.435-2.841 1.376v-.644c0-.332-.191-.523-.522-.523zm.522 4.583c0-1.586.802-2.858 2.37-2.858 1.534 0 2.283 1.29 2.283 2.858 0 1.586-.749 2.893-2.283 2.893-1.551 0-2.37-1.29-2.37-2.893zm16.199.122h2.962c2.841 0 4.462-1.569 4.462-3.973 0-2.388-1.638-3.974-4.462-3.974h-4.757c-.331 0-.523.192-.523.523v11.397c0 .331.192.523.523.523h1.272c.331 0 .523-.192.523-.523v-3.973zm2.945-2.109h-2.945V7.666h2.945c1.377 0 2.126.662 2.126 1.847 0 1.203-.749 1.882-2.126 1.882zM130.979 18h1.045c.332 0 .523-.192.523-.523v-5.855c0-2.144-1.516-3.032-3.677-3.032-1.255 0-2.474.33-3.415.836-.297.157-.349.418-.21.715l.332.68c.156.313.4.365.714.208.767-.383 1.673-.592 2.405-.592.749 0 1.638.209 1.638.976 0 .871-1.133.958-2.457 1.15-1.237.174-3.241.558-3.241 2.806 0 1.812 1.307 2.84 3.189 2.84 1.272 0 2.073-.453 2.631-1.185v.488c0 .314.192.488.523.488zm-.645-4.548v1.045c0 1.377-.993 1.97-2.056 1.97-.854 0-1.447-.384-1.447-1.203 0-.889.697-1.098 1.499-1.255.819-.14 1.586-.244 2.004-.557zm4.588 6.238l-.21.785c-.087.33.018.575.332.644.244.053.557.087.941.087 1.533 0 2.387-.644 3.311-3.084l3.311-8.713c.139-.366-.035-.61-.419-.61h-1.272c-.296 0-.488.14-.592.418l-2.057 5.977-2.073-5.977c-.105-.279-.297-.418-.593-.418h-1.394c-.383 0-.54.244-.401.61l3.311 8.452c-.418 1.115-.749 1.498-1.411 1.498-.105 0-.227 0-.331-.035-.209-.052-.366.053-.453.366z' fill='%23".concat(r,"'/%3E%3C/svg%3E"))),n.classList.add("sq-cash-button",function(e){switch(e){case Kn.ROUNDED:return"sq-cash-button-rounded";case Kn.SEMIROUNDED:return"sq-cash-button-semi-rounded";default:return"sq-cash-button-squared"}}(e.shape),function(e){return e===$n.DARK?"sq-cash-button-dark":"sq-cash-button-light"}(e.theme)),n.appendChild(i),n}))()}createQrCodeContainer(e){var t=this;return cl((function*(){if(yield t.stylesLoadedPromise,!Ni.isValidUrl(e))throw new sl;var r=new URL(e);r.searchParams.set("rounded","0");var n=document.createElement("div");n.classList.add("sq-cash-qr-container");var i=document.createElement("div");i.classList.add("col-left");var o=document.createElement("div");o.classList.add("col-right");var s=document.createElement("div");s.classList.add("sq-cash-qr-instruction"),s.innerHTML="<div><h3>Cash App Pay</h3><span>Scan the QR Code to check out</span></div>";var a=document.createElement("div"),c=document.createElement("img");a.classList.add("sq-cash-qr-guide"),c.setAttribute("src","data:image/svg+xml,%3Csvg width='133' height='109' viewBox='0 0 133 109' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cg clip-path='url(%23clip0)'%3E%3Crect x='6.51207' y='2.51207' width='122.976' height='125.976' rx='14.9276' fill='%2300B843' stroke='black' stroke-width='4.97585'/%3E%3Cg clip-path='url(%23clip1)'%3E%3Cpath d='M59.7669 79.5683C60.3043 79.5683 60.6028 79.2399 60.6028 78.6727V78.1054C64.7527 77.8069 67.1112 75.0602 67.1112 71.7164C67.1112 67.5964 63.5883 66.1037 60.6028 65.3275V59.5953C61.7373 59.8341 62.633 60.3118 63.4391 61.1179C63.8272 61.506 64.2451 61.5956 64.693 61.297L65.8872 60.5506C66.3947 60.2521 66.5141 59.7744 66.126 59.3266C64.693 57.595 62.6927 56.6695 60.6028 56.4306V55.6843C60.6028 55.2066 60.3043 54.9677 59.7669 54.9677C59.2295 54.9677 58.9011 55.2961 58.9011 55.8634V56.3709C55.1692 56.5202 52.4524 58.7892 52.4524 62.4315C52.4524 66.7008 56.244 68.104 58.9011 68.7309V75.0005C57.5277 74.8512 56.1544 74.284 55.1095 72.8509C54.7512 72.3434 54.393 72.224 53.8854 72.5524L52.4822 73.4182C51.9747 73.7466 51.8553 74.1646 52.1837 74.6423C53.6764 76.6724 56.0051 77.9263 58.9011 78.1353V78.8518C58.9011 79.2996 59.2295 79.5683 59.7669 79.5683ZM56.035 62.133C56.035 60.4312 57.3486 59.5953 58.9011 59.4759V64.9095C57.2889 64.4617 56.035 63.775 56.035 62.133ZM63.6182 72.0449C63.6182 73.7167 62.5434 74.8811 60.6028 75.0602V69.1489C62.4837 69.6863 63.6182 70.3431 63.6182 72.0449Z' fill='white'/%3E%3Cpath d='M84.4025 67.1785C84.4025 61.4761 82.4619 56.1022 76.8491 56.1022C71.2065 56.1022 69.2958 61.4761 69.2958 67.1785C69.2958 72.8509 71.2065 78.195 76.8491 78.195C82.4619 78.195 84.4025 72.8509 84.4025 67.1785ZM80.372 67.1486C80.372 71.5672 79.5361 74.9408 76.8491 74.9408C74.1025 74.9408 73.2964 71.5672 73.2964 67.1486C73.2964 62.7301 74.1025 59.3863 76.8491 59.3863C79.5361 59.3863 80.372 62.7301 80.372 67.1486Z' fill='white'/%3E%3C/g%3E%3Cg filter='url(%23filter0_d)'%3E%3Ccircle cx='21.7048' cy='28.7714' r='21.7048' fill='%2300D64F'/%3E%3C/g%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M15.6143 24.2473C15.5832 24.6287 15.5824 25.1239 15.5824 25.8616V26.8927H13.6492V25.8616V25.8224C13.6492 25.134 13.6492 24.5594 13.6875 24.0899C13.7275 23.6003 13.814 23.1407 14.0355 22.706C14.3753 22.0391 14.9175 21.4969 15.5844 21.1571C16.0191 20.9356 16.4787 20.8491 16.9683 20.8091C17.4378 20.7708 18.0123 20.7708 18.7007 20.7708L18.7008 20.7708L18.74 20.7708H19.7711V22.704H18.74C18.0023 22.704 17.5071 22.7048 17.1258 22.7359C16.7557 22.7662 16.5788 22.8201 16.4621 22.8796C16.1589 23.0341 15.9125 23.2805 15.758 23.5836C15.6985 23.7004 15.6446 23.8773 15.6143 24.2473ZM24.239 22.704C24.9768 22.704 25.472 22.7048 25.8533 22.7359C26.2233 22.7662 26.4003 22.8201 26.517 22.8796C26.8201 23.0341 27.0666 23.2805 27.221 23.5836C27.2805 23.7004 27.3345 23.8773 27.3647 24.2473C27.3959 24.6287 27.3966 25.1239 27.3966 25.8616V26.8927H29.3299V25.8616L29.3299 25.8224V25.8223V25.8223V25.8223C29.3299 25.1339 29.3299 24.5593 29.2915 24.0899C29.2515 23.6003 29.165 23.1407 28.9436 22.706C28.6038 22.0391 28.0616 21.4969 27.3947 21.1571C26.96 20.9356 26.5003 20.8491 26.0107 20.8091C25.5413 20.7708 24.9667 20.7708 24.2782 20.7708H24.239H23.208V22.704H24.239ZM27.3966 31.3606C27.3966 32.0984 27.3959 32.5935 27.3647 32.9749C27.3345 33.3449 27.2805 33.5219 27.221 33.6386C27.0666 33.9417 26.8201 34.1882 26.517 34.3426C26.4003 34.4021 26.2233 34.4561 25.8533 34.4863C25.472 34.5175 24.9768 34.5182 24.239 34.5182H23.208V36.4514H24.239L24.2782 36.4514H24.2784H24.2784H24.2784C24.9667 36.4515 25.5413 36.4515 26.0107 36.4131C26.5003 36.3731 26.96 36.2866 27.3947 36.0651C28.0616 35.7253 28.6038 35.1831 28.9436 34.5162C29.165 34.0816 29.2515 33.6219 29.2915 33.1323C29.3299 32.6629 29.3299 32.0883 29.3299 31.3999V31.3999V31.3998V31.3998L29.3299 31.3606V30.3295H27.3966V31.3606ZM18.74 34.5182C18.0023 34.5182 17.5071 34.5175 17.1258 34.4863C16.7557 34.4561 16.5788 34.4021 16.4621 34.3426C16.1589 34.1882 15.9125 33.9417 15.758 33.6386C15.6986 33.5219 15.6446 33.3449 15.6143 32.9749C15.5832 32.5935 15.5824 32.0984 15.5824 31.3606L15.5824 30.3295H13.6492V31.3606V31.3998V31.3999C13.6492 32.0883 13.6492 32.6629 13.6875 33.1323C13.7275 33.6219 13.814 34.0816 14.0355 34.5162C14.3753 35.1831 14.9175 35.7253 15.5844 36.0651C16.0191 36.2866 16.4787 36.3731 16.9683 36.4131C17.4378 36.4515 18.0124 36.4515 18.7008 36.4514H18.7008L18.74 36.4514H19.7711V34.5182L18.74 34.5182Z' fill='white'/%3E%3Cpath d='M35.4841 2.48792C56.4982 2.48792 83.1989 2.48792 104.213 2.48792V4.97658C103.975 4.97854 103.824 4.98566 103.693 5.0117C102.953 5.15894 102.375 5.73757 102.227 6.47776C102.192 6.65801 102.192 6.87476 102.192 7.30828C102.192 7.36349 102.192 7.41522 102.192 7.46377C102.191 7.84292 102.188 8.06738 102.173 8.26281C101.932 11.4847 99.3708 14.0459 96.1488 14.2873C95.9051 14.3056 95.6164 14.3056 95.0388 14.3056H44.6583C44.0807 14.3056 43.7919 14.3056 43.5483 14.2873C40.3263 14.0459 37.7652 11.4847 37.5238 8.26281C37.5091 8.06738 37.5062 7.84292 37.5054 7.46377L37.5055 7.30828C37.5055 6.87476 37.5055 6.65801 37.4697 6.47776C37.3224 5.73757 36.7438 5.15894 36.0036 5.0117C35.8727 4.98566 35.7225 4.97854 35.4841 4.97658V2.48792Z' fill='black'/%3E%3C/g%3E%3Cdefs%3E%3Cfilter id='filter0_d' x='-2.01905' y='6.05713' width='47.4476' height='47.4476' filterUnits='userSpaceOnUse' color-interpolation-filters='sRGB'%3E%3CfeFlood flood-opacity='0' result='BackgroundImageFix'/%3E%3CfeColorMatrix in='SourceAlpha' type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0'/%3E%3CfeOffset dy='1.00952'/%3E%3CfeGaussianBlur stdDeviation='1.00952'/%3E%3CfeColorMatrix type='matrix' values='0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.06 0'/%3E%3CfeBlend mode='normal' in2='BackgroundImageFix' result='effect1_dropShadow'/%3E%3CfeBlend mode='normal' in='SourceGraphic' in2='effect1_dropShadow' result='shape'/%3E%3C/filter%3E%3CclipPath id='clip0'%3E%3Crect width='133' height='109' fill='white'/%3E%3C/clipPath%3E%3CclipPath id='clip1'%3E%3Crect x='11.5378' y='4.97597' width='116.622' height='252.524' rx='12.4396' fill='white'/%3E%3C/clipPath%3E%3C/defs%3E%3C/svg%3E"),a.appendChild(c),i.appendChild(s),i.appendChild(a);var u=document.createElement("img");return u.classList.add("sq-cash-qr-code"),u.setAttribute("src",r.toString()),o.appendChild(u),n.appendChild(i),n.appendChild(o),n}))()}}function dl(e,t,r){return{details:{cashApp:{cashtag:e,transactionId:t},method:ii.CASH_APP},status:si.OK,token:r}}function hl(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function pl(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){hl(o,n,i,s,a,"next",e)}function a(e){hl(o,n,i,s,a,"throw",e)}s(void 0)}))}}var fl="sq-cash-app-redirect-payment-method-tracking-id";class gl extends ua{constructor(e,t){if(super(e),this.methodType=ii.CASH_APP,this.preloadedQRImage=new Image,this.authTimeoutId=-1,this.elements={button:null,qrCode:null},this.isCashAppNativePlatform=c.isAndroid()||ol.isIOS(),this.wasFirstInteractionCalled=!1,this.paymentMethodMessenger=new pa(this.context),this.cashAppClient=new ll,!this.session.locationId)throw new vn("locationId must be provided for Cash App");if(this.locationId=this.session.locationId,function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.redirectURI)throw new vn("redirectURI missing");if(!e.transactionId)throw new vn("transactionId missing");if(t){if(!e.totalTransactionAmount)throw new vn("totalTransactionAmount required");if(!Number.isInteger(e.totalTransactionAmount.amount)||e.totalTransactionAmount.amount<=0)throw new vn("totalTransactionAmount.amount must be a positive integer")}}(t),t.transactionId.length>50)throw new vn("transactionId too long. Should be less than ".concat(50," characters."));var r=ol.extractCashAppParamsFromURI(t.redirectURI,e.errorLogger);this.fetchAuthURLs(this.locationId,r,t.transactionId,t.totalTransactionAmount)}get willRedirect(){return this.isCashAppNativePlatform}destroy(){return this.metricsHandler.logEvent(ao.Destroyed),window.clearTimeout(this.authTimeoutId),Promise.resolve(!0)}attachAll(e,t){var r=this;return pl((function*(){r.metricsHandler.logEvent(oo.AttachStart);try{if(e.button){var n=yield r.cashAppClient.createCashAppButton(Object.assign({shape:Kn.ROUNDED,theme:$n.DARK},null==t?void 0:t.button));r.elements.button=r.validateAndQuerySelector(e.button),r.elements.button.appendChild(n)}r.elements.qrCode=r.validateAndQuerySelector(e.qrCode),r.metricsHandler.logEvent(oo.AttachOK)}catch(e){throw r.metricsHandler.logEvent(oo.AttachError),e}}))()}tokenize(){var e=this;return pl((function*(){e.handleFirstInteraction();var{qrCode:t}=e.elements;if(!t)throw new Dn(e.methodType);try{var r,n=yield br((()=>e.fetchAuthURLsPromise),Si.minutesToMs(1),new Ji("Precondition failed",e.methodType));if(n.error)throw n.error;if(!e.transactionId)throw new Ji("expected transactionId to exist at tokenization",e.methodType);if(yield e.context.refreshWithCurrentAnalyticsToken(),e.willRedirect){var i={paymentMethodTrackingId:e.context.getPaymentMethodTrackingId(),transactionId:e.transactionId};return rl({key:fl,value:i}),c.redirectTo(n.redirectURL),new Promise((()=>{}))}var o=yield e.cashAppClient.createQrCodeContainer(n.qrURL);t.appendChild(o);var{token:s,cashtag:a,paymentMethodTrackingId:u,sessionId:l}=yield e.paymentMethodMessenger.request(Xu.REQUEST_CASH_APP_CREATE_WALLET_TOKEN,{expiresAt:Date.now()+Si.secondsToMs(n.expiresIn),requestBody:{analytics_token:null!==(r=e.session.analyticsToken)&&void 0!==r?r:"",client_id:e.session.applicationId,location_id:e.locationId,payment_method_tracking_id:e.context.getPaymentMethodTrackingId(),session_id:e.session.sessionId,transaction_id:e.transactionId,websdk_version:d.VERSION,website_url:e.session.sourceUrl}});return yield e.context.updateSession(l),e.context.setPaymentMethodTrackingId(u),dl(a,e.transactionId,s)}catch(t){return t instanceof sl&&e.errorLogger.captureException(t),ha(t,e.errorLogger)}}))()}getRedirectResult(){var e=this;return pl((function*(){var t,{error:r}=ol.findAndRemoveQueryParams(window.location.search,["error"]);if(r){var n=new qn([Ju(r)]);return e.errorLogger.captureException(n),ha(n,e.errorLogger)}var i,o,s,a,{state:c,code:u,access_token:l}=ol.findAndRemoveQueryParams(window.location.search,ol.CASH_APP_OAUTH_PARAMS);if(!c||!u||!l)return null;try{o=function(e){var{transaction_id:t}=JSON.parse(e);if(void 0===t)throw new Qi("Malformed state in redirect query params: ".concat(e));return t}(c);var d=function(e){var t=e.split(":");if(t.length<3)throw new Qi("Invalid transaction ID: could not separate");return t}(o);i=d[0],s=d[1]}catch(t){return ha(t,e.errorLogger)}var h=tl(fl);null!==h&&o===(null===(t=h.value)||void 0===t?void 0:t.transactionId)&&(a=h.value.paymentMethodTrackingId),el(fl);var p=t=>{e.context.metricsHandler.metricsLogger.logEvent({event:t,eventSource:e.context.metricsHandler.eventSource},e.session.instanceId,i,a)};p(oo.NonceStart);try{var f=yield e.messenger.request(Xu.REQUEST_CASH_APP_CUSTOMER,{session:Object.assign({},e.session,{paymentMethodTrackingId:a,sessionId:i}),body:l}),g=e.generateWalletToken(i,u,o,a);return p(oo.NonceOK),dl(f,s,g)}catch(t){return p(oo.NonceError),ha(t,e.errorLogger)}}))()}validateAndQuerySelector(e){if("string"!=typeof e)throw new TypeError("selector should be a string: ".concat(e));var t=document.querySelector(e);if(null===t)throw new pn(e);return t}fetchAuthURLs(e,t,r,n){var i=this;this.fetchAuthURLsPromise=pl((function*(){var o,s={expiresIn:-1,qrURL:"",redirectURL:""},a=1e3,c=i.willRedirect?t:void 0,u=n?{amount:n.amount,currency_code:n.currencyCode}:void 0,l={client_id:i.session.applicationId,location_id:e,redirect_uri:c,total_transaction_amount:u,transaction_id:r};try{var{expires_in:d,qr_url:h,redirect_url:p,transaction_id:f}=yield i.paymentMethodMessenger.request(Xu.REQUEST_CASH_APP_AUTH,l);i.transactionId=f,s.expiresIn=d,s.qrURL=h,s.redirectURL=p,o=d,a=Math.max(Si.secondsToMs(o)-Si.minutesToMs(1),Si.minutesToMs(1)),i.willRedirect||(i.preloadedQRImage.src=h),s.expiresIn<2147483647?i.authTimeoutId=window.setTimeout((()=>{i.errorLogger.captureException(new Ji("Cash App Auth URLS expired unexpectedly with expiry of ".concat(a,"ms"),ii.CASH_APP))}),a):i.errorLogger.captureException(new Ji("Cash App Auth URLS expires_in larger than 32 bit integer ".concat(s.expiresIn,"ms"),ii.CASH_APP))}catch(e){s.error=e}return s}))()}generateWalletToken(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return"wnon:".concat(window.btoa(JSON.stringify({analytics_token:this.session.analyticsToken,client_id:this.session.applicationId,entry_method:"REDIRECT",location_id:this.locationId,payment_method_tracking_id:n,session_id:e,tender:{brand:"CASH_APP",preauth_idempotency_key:t,transaction_id:r},websdk_version:d.VERSION,website_url:this.session.sourceUrl})))}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(oo.FirstInteraction))}}var ml,vl=[Hn,jn,Bn,Gn,Nn,Fn];function yl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function El(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yl(Object(r),!0).forEach((function(t){_l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _l(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sl(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Al(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Sl(o,n,i,s,a,"next",e)}function a(e){Sl(o,n,i,s,a,"throw",e)}s(void 0)}))}}!function(e){e.CLEAR="giftCardClear",e.CONFIGURE="giftCardConfigure",e.DESTROY="giftCardDestroy",e.LOAD_GIFT_CARDS_FORM="loadGiftCardsForm",e.REQUEST_CARD_NONCE_IF_VALID_FORM="giftCardRequestCardNonceIfValidForm",e.SET_FOCUS="giftCardSetFocus",e.SET_ERROR="giftCardSetError"}(ml||(ml={}));var Cl,Il="gift-card-wrapper",Ol=[Gr.GIFT_CARD_NUMBER];class Tl extends ua{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this.methodType=ii.GIFT_CARD,this.onResize=this.onResize.bind(this),this.id=aa(),this.iframeName="".concat("gift-card","-").concat(this.id),this.paymentMessenger=new pa(this.context),this.tokenizeInProcess=!1,this.inputLabelsIncluded=Boolean(null==t?void 0:t.includeInputLabels),this.initializeMessageBus(),this.validateOptions(t),this.initialOptions=t||{},this.errorList=new Set,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t}))}attach(e){var t=this;return Al((function*(){var r;t.throwIfDestroyedOrAlreadyAttached(),t.status=sa.ATTACHED,t.metricsHandler.logEvent(oo.AttachStart),t.metricsHandler.logEvent(ao.Configured,t.initialOptions);try{r=hc(e)}catch(e){throw t.metricsHandler.logEvent(oo.AttachError),t.status===sa.ATTACHED&&(t.status=sa.DETACHED),e}try{t.attachPromise=t.buildElementOnIframe(r),yield t.attachPromise,t.attachPromise=void 0,t.throwIfDestroyed(),t.element=r,window.addEventListener("resize",t.onResize),t.showCardElement(),t.onResize(),t.metricsHandler.logEvent(oo.AttachOK)}catch(e){if(t.status===sa.ATTACHED&&(t.status=sa.DETACHED),t.metricsHandler.logEvent(oo.AttachError),Ni.isInstanceOf(e,vl))throw e;throw t.errorLogger.captureException(e),new Fn("attaching the Gift Card Element")}}))()}detach(){return this.throwIfDestroyed(),this.detachElement(sa.DETACHED,ao.Detached)}destroy(){return this.status===sa.DESTROYED?Promise.resolve(!1):this.detachElement(sa.DESTROYED,ao.Destroyed)}configure(e){var t=this;return Al((function*(){t.throwIfDestroyedOrNotAttached(),t.validateOptions(e),void 0!==(null==e?void 0:e.includeInputLabels)&&(t.inputLabelsIncluded=Boolean(null==e?void 0:e.includeInputLabels),t.onResize()),void 0!==e.style&&wl(e.style,t.id),t.metricsHandler.logEvent(ao.ConfigUpdated,e);try{yield t.paymentMessenger.request(ml.CONFIGURE,{includeInputLabels:t.inputLabelsIncluded,style:e.style,type:t.methodType})}catch(e){if(Ni.isInstanceOf(e,ic))throw e;throw t.errorLogger.captureException(e),new Fn("configuring the Gift Card Element")}}))()}focus(e){var t=this;return Al((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(Gr).includes(e))throw new yn(e);t.metricsHandler.logEvent(ao.Focused,e);try{return yield t.paymentMessenger.request(ml.SET_FOCUS,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}clear(){var e=this;return Al((function*(){e.throwIfDestroyedOrNotAttached();try{return yield e.paymentMessenger.request(ml.CLEAR)}catch(t){e.errorLogger.captureException(t)}return e.metricsHandler.logEvent(ao.Clear),!1}))()}addEventListener(e,t){this.throwIfDestroyed(),this.metricsHandler.logEvent(ao.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){this.throwIfDestroyed(),super.removeEventListener(e,t)}tokenize(){var e=this;return Al((function*(){if(e.throwIfDestroyedOrNotAttached(),e.tokenizeInProcess)throw new qn([da]);e.tokenizeInProcess=!0,yield e.context.refreshWithCurrentAnalyticsToken();try{var t=yield e.paymentMessenger.request(ml.REQUEST_CARD_NONCE_IF_VALID_FORM,{type:e.methodType});return e.tokenizeInProcess=!1,e.context.setPaymentMethodTrackingId(t.paymentMethodTrackingId),yield e.context.updateSession(t.sessionId),function(e){var{card:t,cardNonce:r}=e;return{details:{giftCard:t,method:ii.GIFT_CARD},status:si.OK,token:r}}(t)}catch(t){if(e.tokenizeInProcess=!1,t instanceof qi)return{errors:t.errors,status:si.INVALID};throw Ni.isInstanceOf(t,oc)?t:(e.errorLogger.captureException(t),Fi())}}))()}setError(e){var t=this;return Al((function*(){if(t.throwIfDestroyedOrNotAttached(),!Object.values(Gr).includes(e))throw new yn(e);t.metricsHandler.logEvent(ao.SetError,e);try{return yield t.paymentMessenger.request(ml.SET_ERROR,{field:e})}catch(e){t.errorLogger.captureException(e)}return!1}))()}buildElementOnIframe(e){var t=this;return Al((function*(){yield t.buildCardElement(e),yield t.paymentMessenger.request(ml.LOAD_GIFT_CARDS_FORM,{configuration:El(El({},t.initialOptions),{},{type:t.methodType}),iframeName:t.iframeName}),yield t.stylesLoadedPromise}))()}validateOptions(e){var t={includeInputLabels:e=>"boolean"==typeof e,style:e=>"object"==typeof e};Object.entries(e).forEach((e=>{var[r,n]=e;if(void 0===t[r])throw new En(r);if(t[r]&&!t[r](n))throw new _n(r,n)}))}buildCardElement(e){var t=this;return Al((function*(){var r;t.wrapperElement=document.createElement("div"),t.wrapperElement.id=bl(t.id),t.wrapperElement.classList.add(gu),t.hideCardElement(),t.cardDetail=document.createElement("span"),t.cardDetail.classList.add(vu),e.appendChild(t.wrapperElement),t.iframeContainer=document.createElement("div"),t.iframeContainer.classList.add(fu),t.wrapperElement.appendChild(t.iframeContainer),t.iframe=yield t.buildCardIframe(t.iframeContainer),t.iframe.classList.add(mu),t.wrapperElement.appendChild(t.cardDetail),Bu.addStyleElement(d.SINGLE_CARD_WRAPPER_STYLES,"sq-single-card-styles",t.resolveStylePromise,t.rejectStylePromise),null!==(r=t.initialOptions)&&void 0!==r&&r.style&&wl(t.initialOptions.style,t.id)}))()}buildCardIframe(e){return sc({frameborder:"0",height:"0px",name:this.iframeName,scrolling:"no",src:d.GIFT_CARD_IFRAME,width:"100%"},e)}hideCardElement(){this.wrapperElement&&this.wrapperElement.setAttribute("style","display: none;")}showCardElement(){this.wrapperElement&&this.wrapperElement.removeAttribute("style")}onResize(e){if(this.iframe&&this.wrapperElement&&this.iframeContainer&&!this.currentResizeTimeout){var t=()=>{if(this.wrapperElement&&this.iframe&&this.iframeContainer){var e=this.inputLabelsIncluded?62:48;e+=2,this.iframe.style.height="".concat(e,"px"),this.iframeContainer.style.height="".concat(Math.round(e),"px")}};t(),this.currentResizeTimeout=window.setTimeout((()=>{t(),this.currentResizeTimeout=void 0}),100)}}updateCardDetailText(){var e,t,r;this.cardDetail&&(0===this.errorList.size?(e=null!==(r=this.focusedInput)&&void 0!==r?r:"emptyMessage",t=this.buildHelperMessage(e),this.cardDetail.classList.remove(yu),this.cardDetail.classList.add(Eu)):(e=Ol.find((e=>this.errorList.has(e)))||Ol[0],t=this.buildErrorMessage(e),this.cardDetail.classList.add(yu),this.cardDetail.classList.remove(Eu)),this.cardDetail.textContent!==t&&(this.cardDetail.textContent=t),t.length>0?this.cardDetail.classList.add(_u):this.cardDetail.classList.remove(_u))}addErrorMessage(e){this.errorList.add(e),this.updateCardDetailText()}removeErrorMessage(e){this.errorList.has(e)&&(this.errorList.delete(e),this.updateCardDetailText())}addFocusMessage(e){this.focusedInput=e,this.updateCardDetailText()}removeFocusMessage(e){this.focusedInput===e&&(this.focusedInput=null),setTimeout((()=>{null===this.focusedInput&&this.updateCardDetailText()}),50)}handleInputEvent(e){var{data:t}=e,r=t.payload.body;switch(r.eventType){case qr.ERROR_CLASS_ADDED:var n;this.addErrorMessage(r.field),null===(n=this.wrapperElement)||void 0===n||n.classList.add(mc);break;case qr.ERROR_CLASS_REMOVED:this.removeErrorMessage(r.field),this.removeErrorClass();break;case qr.FOCUS_CLASS_ADDED:var i;this.addFocusMessage(r.field),null===(i=this.wrapperElement)||void 0===i||i.classList.add(gc);break;case qr.FOCUS_CLASS_REMOVED:this.removeFocusMessage(r.field),this.removeFocusClass()}super.dispatchEvent(r.eventType,r)}removeFocusClass(){setTimeout((()=>{var e;this.focusedInput||null===(e=this.wrapperElement)||void 0===e||e.classList.remove(gc)}),50)}removeErrorClass(){var e;0===this.errorList.size&&(null===(e=this.wrapperElement)||void 0===e||e.classList.remove(mc))}initializeMessageBus(){var e=this.handleInputEvent.bind(this),t={[rc.FOCUS_CLASS_ADDED]:e,[rc.FOCUS_CLASS_REMOVED]:e,[rc.ERROR_CLASS_ADDED]:e,[rc.ERROR_CLASS_REMOVED]:e,[rc.CARD_BRAND_CHANGED]:e,[rc.SUBMIT]:e,[rc.ESCAPE]:e};this.paymentMessenger.initializeMessageBus(t)}buildErrorMessage(e){return e===Gr.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.errors.giftCardNumberError:""}buildHelperMessage(e){return e===Gr.GIFT_CARD_NUMBER?this.context.getLocaleString().paymentMethods.giftCards.helperText.giftCardNumber:""}detachElement(e,t){var r=this;return Al((function*(){var n=r.status;if(r.attachPromise)try{yield r.attachPromise}catch(e){}try{var i=yield r.paymentMessenger.request(ml.DESTROY);return r.element&&(ac(r.element),window.removeEventListener("resize",r.onResize)),r.status=e,r.metricsHandler.logEvent(t),i}catch(e){throw r.status=n,e}}))()}}function bl(e){return"".concat(Il,"-").concat(e)}function wl(e,t){var r=function(e){return"".concat("sq-gift-card-custom-styles","-").concat(e)}(t),n=document.getElementById(r);null===n&&((n=document.createElement("style")).id=r,document.head.appendChild(n)),n.innerHTML=Uu(e,bl(t))}!function(e){e.REQUEST_GOOGLE_PAY_CARD_NONCE="REQUEST_GOOGLE_PAY_CARD_NONCE",e.GENERATE_GOOGLE_PAY_AUTH_TOKEN="GENERATE_GOOGLE_PAY_AUTH_TOKEN"}(Cl||(Cl={}));class Pl extends en{constructor(e){super("The event listener for ".concat(e," timed out (30 seconds). If you've returned a promise, ensure it is resolving")),this.name="EventListenerTimeoutError",Object.setPrototypeOf(this,Pl.prototype)}}function Rl(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}class Nl extends oa{constructor(){super(),this.listeners={},this.listeners={}}dispatchEvent(e,t,r){var n,i=this;return(n=function*(){if(e in i.listeners)for(var n=new di(e,t),o=[...i.listeners[e]],s=function*(){var t,i;try{t=o[a](n)}catch(t){throw new mn(e,t.message)}if(t instanceof Promise)try{i=yield br((()=>t),3e4,new Pl(e))}catch(t){if(t instanceof Pl)throw t;throw new mn(e,t.message)}else i=t;r&&r(i)},a=0,c=o.length;a<c;a++)yield*s()},function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function s(e){Rl(o,r,i,s,a,"next",e)}function a(e){Rl(o,r,i,s,a,"throw",e)}s(void 0)}))})()}}function Dl(e,t){if("object"!=typeof e)return{isValid:!1,missingFields:[]};var r=[];return{isValid:Object.entries(t).map((n=>{var[i,o]=n;if("object"==typeof o){var{isValid:s,missingFields:a}=Dl("object"==typeof e[i]?e[i]:{},t[i]);return a.forEach((e=>{var[t,n]=e;r.push(["".concat(i,".").concat(t),n])})),s}return i in e&&typeof e[i]===o||(r.push([i,o]),!1)})).every(Boolean),missingFields:r}}function Ll(e,t,r){if(!Array.isArray(e))return{isValid:!1,missingFields:[[t,"Array"]]};var n=e.reduce(((e,n)=>{var i=Dl({[t]:n},{[t]:r}),o=Object.fromEntries(i.missingFields);return{isValid:e.isValid&&i.isValid,missingFieldsMap:Object.assign({},e.missingFieldsMap,o)}}),{isValid:!0,missingFieldsMap:{}});return{isValid:n.isValid,missingFields:Object.entries(n.missingFieldsMap)}}var xl,kl,Ml,Ul,Hl,jl,Bl,Gl,ql={amount:"string",label:"string"},Fl={amount:"string",id:"string",label:"string"},Vl={amount:"string",label:"string"},zl={};function Yl(e,t){var{lineItems:r,taxLineItems:n,discounts:i,shippingLineItems:o}=e,s=!1,a=[],c=r,u=n,l=o,d=$l(i);return void 0===t||void 0===r&&void 0===n&&void 0===o&&void 0===d||(c||(c=t.lineItems),u||(u=t.taxLineItems),d||(d=$l(t.discounts)),l||(l=t.shippingLineItems)),[c,u,d,l].forEach((e=>{void 0!==e&&(s=!0,a.push(...e))})),s?a:void 0}function $l(e){return void 0===e?e:e.map((e=>Object.assign({},e,{amount:"-".concat(e.amount)})))}function Kl(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Wl(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Kl(o,n,i,s,a,"next",e)}function a(e){Kl(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Ql(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Zl(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.UPDATE="update"}(xl||(xl={}));class Jl{constructor(e,t,r){this.eventTarget=new Nl,this.metricsBuffer=[],this.localeStrings=t,this._requestBillingContact=Boolean(e.requestBillingContact),this._requestShippingContact=Boolean(e.requestShippingContact),this._countryCode=e.countryCode,this._currencyCode=e.currencyCode,this._lineItems=e.lineItems,this._shippingLineItems=e.shippingLineItems,this._taxLineItems=e.taxLineItems,this._discounts=e.discounts,this._total=e.total,this._shippingOptions=e.shippingOptions,this._shippingContact=e.shippingContact,this._pickupContact=e.pickupContact,this.updateLock=r;var{isValid:n,missingFields:i}=ed(this);if(!n)throw new fn(i)}get requestBillingContact(){return this._requestBillingContact}get requestShippingContact(){return this._requestShippingContact}get countryCode(){return this._countryCode}get currencyCode(){return this._currencyCode}get lineItems(){return this._lineItems}get pickupContact(){return this._pickupContact}get shippingLineItems(){return this._shippingLineItems}get taxLineItems(){return this._taxLineItems}get discounts(){return this._discounts}get total(){return this._total}get shippingOptions(){return this._shippingOptions}get shippingContact(){return this._shippingContact}update(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ql(Object(r),!0).forEach((function(t){Zl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ql(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({countryCode:this.countryCode,currencyCode:this.currencyCode,lineItems:this.lineItems,shippingLineItems:this.shippingLineItems,taxLineItems:this.taxLineItems,discounts:this.discounts,pickupContact:this.pickupContact,requestBillingContact:this.requestBillingContact,requestShippingContact:this.requestShippingContact,shippingContact:this.shippingContact,shippingOptions:this.shippingOptions,total:this.total},e),r=new Jl(t,this.localeStrings,this.updateLock),{isValid:n,missingFields:i}=ed(r);if(!n)throw new fn(i);return!this.updateLock.isLocked&&(void 0!==e.requestBillingContact&&(this._requestBillingContact=Boolean(e.requestBillingContact)),void 0!==e.requestShippingContact&&(this._requestShippingContact=Boolean(e.requestShippingContact)),e.countryCode&&(this._countryCode=e.countryCode),e.currencyCode&&(this._currencyCode=e.currencyCode),e.lineItems&&(this._lineItems=e.lineItems),e.shippingLineItems&&(this._shippingLineItems=e.shippingLineItems),e.taxLineItems&&(this._taxLineItems=e.taxLineItems),e.discounts&&(this._discounts=e.discounts),e.total&&(this._total=e.total),e.pickupContact&&(this._pickupContact=e.pickupContact),e.shippingOptions&&(this._shippingOptions=e.shippingOptions),e.shippingContact&&(this._shippingContact=e.shippingContact),this.eventTarget.dispatchEvent(xl.UPDATE,r),this.logMetrics(ao.ConfigUpdated,t),!0)}addEventListener(e,t){switch(Ni.enumValues(oi).includes(e)&&this.logMetrics(ao.EventListenerAdded,e),e){case oi.SHIPPING_CONTACT_CHANGED:this.shippingContactEventListener(t);break;case oi.SHIPPING_OPTION_CHANGED:this.shippingOptionEventListener(t);break;case xl.UPDATE:this.updateEventListener(t);break;case Xr.AFTERPAY_SHIPPING_ADDRESS_CHANGED:this.afterpayShippingContactEventListener(t);break;case Xr.AFTERPAY_SHIPPING_OPTION_CHANGED:this.afterpayShippingOptionEventListener(t);break;default:throw new na("PaymentRequest.addEventListener","event","PaymentRequestEvent")}}dispatchEvent(e,t,r){return this.eventTarget.dispatchEvent(e,t,(t=>{if(Ni.enumValues(Xr).includes(e)){var n=function(e){if(void 0!==e.error)return{isValid:!0,missingFields:[]};if(void 0!==e.shippingErrors)return{isValid:!0,missingFields:[]};if(void 0===e.shippingOptions)return{isValid:!1,missingFields:[["paymentRequestUpdate.shippingOptions","array"]]};var t=Ll(e.shippingOptions,"shippingOptions",{id:"string",label:"string",amount:"string",total:"object"});if(!t.isValid)return t;for(var r of e.shippingOptions){if(!(t=Dl({"shippingOptions.total":r.total},{"shippingOptions.total":Vl})).isValid)return t;if(void 0!==r.taxLineItems&&!(t=Ll(r.taxLineItems,"shippingOptions.taxLineItems",ql)).isValid)return t}return{isValid:!0,missingFields:[]}}(t);if(!n.isValid)throw new gn(n.missingFields);r(t)}else{var i=function(e){var{lineItems:t,discounts:r,taxLineItems:n,shippingLineItems:i,shippingErrors:o,shippingOptions:s,error:a,total:c}=e;if(t){var u=Ll(t,"lineItem",ql);if(!u.isValid)return u}if(r){var l=Ll(r,"discounts",ql);if(!l.isValid)return l}if(n){var d=Ll(n,"taxLineItems",ql);if(!d.isValid)return d}if(i){var h=Ll(i,"shippingLineItems",ql);if(!h.isValid)return h}if(s){var p=Ll(s,"shippingOption",Fl);if(!p.isValid)return p}if(c){var f=Dl({total:c},{total:Vl});if(!f.isValid)return f}if(a&&"string"!=typeof a)return{isValid:!1,missingFields:[["error","string"]]};if(o){var g=Dl(o,zl);if(!g.isValid)return g}return{isValid:!0,missingFields:[]}}(t);if(!i.isValid)throw new gn(i.missingFields);r(t)}}))}hasEventListener(e){return this.eventTarget.hasEventListener(e)}setMetricsHandler(e){this.metricsHandler=e,this.metricsBuffer.length>0&&(this.metricsBuffer.forEach((t=>{var[r,n]=t;e.logEvent(r,n)})),this.metricsBuffer=[])}shippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(oi.SHIPPING_CONTACT_CHANGED,function(){var r=Wl((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("ShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}shippingOptionEventListener(e){var t=this;this.eventTarget.addEventListener(oi.SHIPPING_OPTION_CHANGED,function(){var r=Wl((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("ShippingOptionUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}afterpayShippingContactEventListener(e){var t=this;this.eventTarget.addEventListener(Xr.AFTERPAY_SHIPPING_ADDRESS_CHANGED,function(){var r=Wl((function*(r){var{contactOrOption:n}=r.detail;try{return yield e(n)}catch(e){return console.error("AfterpayShippingContactUpdateError",e),{error:t.localeStrings.getLocaleString().paymentMethods.wallets.callbackErrors.optionsError}}}));return function(e){return r.apply(this,arguments)}}())}afterpayShippingOptionEventListener(e){this.eventTarget.addEventListener(Xr.AFTERPAY_SHIPPING_OPTION_CHANGED,(t=>{e(t.detail.contactOrOption)}))}updateEventListener(e){this.eventTarget.addEventListener(xl.UPDATE,(t=>{e(t.detail)}))}logMetrics(e,t){this.metricsHandler?this.metricsHandler.logEvent(e,t):this.metricsBuffer.push([e,t])}}function Xl(e){return Boolean(e.shippingOptions&&e.shippingOptions.length>0)}function ed(e){return Dl(e,{countryCode:"string",currencyCode:"string",total:{amount:"string",label:"string"}})}function td(e,t){return Intl.NumberFormat(c.windowNavigationLanguage,{currency:t,style:"currency"}).format(Number.parseFloat(e))}!function(e){e.Final="FINAL",e.Estimated="ESTIMATED",e.Unknown="NOT_CURRENTLY_KNOWN"}(kl||(kl={})),function(e){e.INITIALIZE="INITIALIZE",e.PAYMENT_AUTHORIZATION="PAYMENT_AUTHORIZATION",e.SHIPPING_ADDRESS="SHIPPING_ADDRESS",e.SHIPPING_OPTION="SHIPPING_OPTION"}(Ml||(Ml={})),function(e){e.FULL="FULL",e.MIN="MIN"}(Ul||(Ul={})),function(e){e.CARD="CARD"}(Hl||(Hl={})),function(e){e.PAYMENT_GATEWAY="PAYMENT_GATEWAY"}(jl||(jl={})),function(e){e.SUCCESS="SUCCESS"}(Bl||(Bl={})),function(e){e.TEST="TEST",e.PRODUCTION="PRODUCTION"}(Gl||(Gl={}));var rd=["PAN_ONLY","CRYPTOGRAM_3DS"],nd=["AMEX","DISCOVER","JCB","MASTERCARD","VISA"],id="LINE_ITEM";function od(e){return{label:e.label,price:e.amount,status:e.pending?kl.Estimated:kl.Final,type:id}}function sd(e,t){var r=null!=t?t:e;return r?r.map((e=>od(e))):[]}function ad(e,t){return t.map((t=>function(e,t){return{description:td(t.amount,e),id:t.id,label:t.label}}(e,t)))}function cd(e,t,r,n){var i=null!=n?n:r;if(i&&i.length>0){var o={shippingOptions:ad(e,i)};return i.some((e=>(null==e?void 0:e.id)===t))&&(o.defaultSelectedOptionId=t),o}}function ud(e,t){return null==t?void 0:t.find((t=>t.id===e))}function ld(e,t,r,n,i,o){var{countryCode:s,currencyCode:a,total:c,lineItems:u,taxLineItems:l,discounts:d,requestBillingContact:h,requestShippingContact:p,shippingOptions:f}=t,g=Xl(t),m=Boolean(p||g),v=Object.assign({},e,{emailRequired:Boolean(h),merchantInfo:i,shippingAddressRequired:m,shippingOptionRequired:g,transactionInfo:{countryCode:s,currencyCode:a,totalPrice:c.amount,totalPriceLabel:c.label,totalPriceStatus:n}});if(u&&u.length>0&&(v.transactionInfo.displayItems=sd([],Yl({lineItems:u,taxLineItems:l,discounts:d},t))),m&&(v.shippingAddressParameters={phoneNumberRequired:!0}),g){var y=cd(a,o,[],f);y&&(v.shippingOptionParameters=y)}return r.length>0&&(v.callbackIntents=r),v}function dd(e,t){var r=[];return e.error&&r.push({intent:t,message:e.error,reason:ni.SHIPPING_ADDRESS_UNSERVICEABLE}),e.shippingErrors&&Object.entries(e.shippingErrors).forEach((e=>{var[n,i]=e;r.push({intent:t,message:"".concat(n,": ").concat(i),reason:ni.SHIPPING_ADDRESS_INVALID})})),r}function hd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hd(Object(r),!0).forEach((function(t){fd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fd(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gd(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function md(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){gd(o,n,i,s,a,"next",e)}function a(e){gd(o,n,i,s,a,"throw",e)}s(void 0)}))}}var vd=["#google"];class yd extends ua{constructor(e,t,r,n,i){var o;super(r),this.methodType=ii.GOOGLE_PAY,this.shippingOptions=void 0,this.wasFirstInteractionCalled=!1,this.validateConfiguration(),this.paymentRequestLockController=i,this.req=t,this.merchantInfo=n,this.element=null,this.paymentMethodMessenger=new pa(r),Xl(this.req)&&(this.shippingOptions=this.req.shippingOptions,this.selectedShippingOptionId=null===(o=this.req.shippingOptions)||void 0===o?void 0:o[0].id),this.callbackIntents=function(e,t){var r=[],n=Xl(e)&&t.includes(oi.SHIPPING_OPTION_CHANGED),i=e.requestShippingContact&&t.includes(oi.SHIPPING_CONTACT_CHANGED);return n?r.push(Ml.SHIPPING_ADDRESS,Ml.SHIPPING_OPTION):i&&r.push(Ml.SHIPPING_ADDRESS),(!c.isAndroid()||n||i)&&r.push(Ml.PAYMENT_AUTHORIZATION),r}(this.req,this.handlers);var a,u,l,h,p=function(e,t,r,n){var i=Gl.TEST;d.env!==s.production||e.isTestMerchant||(i=Gl.PRODUCTION);var o={environment:i,merchantInfo:n},a=t.includes(Ml.SHIPPING_OPTION)||t.includes(Ml.SHIPPING_ADDRESS);if(!c.isAndroid()||a){var u={onPaymentAuthorized:()=>({transactionState:Bl.SUCCESS})};a&&(u.onPaymentDataChanged=r),o.paymentDataCallbacks=u}return o}(r,this.callbackIntents,this.onPaymentDataChanged.bind(this),this.merchantInfo);this.googlePayClient=new e.api.PaymentsClient(p),this.isReadyToPayRequest=(a=this.session.applicationId,u=this.req.requestBillingContact,l=this.featureFlagHandler,h=[...nd],null!=l&&l.isActive(Ti.CanUseInterac)&&h.push("INTERAC"),{allowedPaymentMethods:[{parameters:{allowedAuthMethods:rd,allowedCardNetworks:h,billingAddressParameters:{format:u?Ul.FULL:Ul.MIN,phoneNumberRequired:Boolean(u)},billingAddressRequired:!0},tokenizationSpecification:{parameters:{gateway:"square",gatewayMerchantId:a},type:jl.PAYMENT_GATEWAY},type:Hl.CARD}],apiVersion:2,apiVersionMinor:0})}get handlers(){var e=[];return this.req.hasEventListener(oi.SHIPPING_OPTION_CHANGED)&&e.push(oi.SHIPPING_OPTION_CHANGED),this.req.hasEventListener(oi.SHIPPING_CONTACT_CHANGED)&&e.push(oi.SHIPPING_CONTACT_CHANGED),e}attach(e,t){var r=this;return md((function*(){var n,i,o;r.throwIfDestroyedOrAlreadyAttached(),r.status=sa.ATTACHED;var s=null!==(n=null==t?void 0:t.buttonColor)&&void 0!==n?n:ei.DEFAULT,a=null!==(i=null==t?void 0:t.buttonSizeMode)&&void 0!==i?i:ti.STATIC,c=null!==(o=null==t?void 0:t.buttonType)&&void 0!==o?o:ri.LONG;r.metricsHandler.logEvent(oo.AttachStart),r.metricsHandler.logEvent(ao.Configured,t);try{r.element=pc(e)}catch(e){throw r.status===sa.ATTACHED&&(r.status=sa.DETACHED),r.metricsHandler.logEvent(oo.AttachError),e}r.isReadyToPay=yield r.checkIfReadyToPay(oo.AttachError);try{var u=r.googlePayClient.createButton({buttonColor:s,buttonSizeMode:a,buttonType:c,onClick:()=>{}});r.element.appendChild(u),r.metricsHandler.logEvent(oo.AttachOK)}catch(e){throw r.status===sa.ATTACHED&&(r.status=sa.DETACHED),r.errorLogger.captureException(e),r.metricsHandler.logEvent(oo.AttachError),r.status=sa.DETACHED,new Rn(ta,e)}}))()}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(sa.DETACHED,ao.Detached),Promise.resolve(!0)}destroy(){return this.status===sa.DESTROYED?Promise.resolve(!1):(this.detachElement(sa.DESTROYED,ao.Destroyed),Promise.resolve(!0))}tokenize(){var e=this;return md((function*(){var t;e.throwIfDestroyed(),e.handleFirstInteraction(),e.metricsHandler.logEvent(so.ExternalSessionStart),e.isReadyToPay=e.isReadyToPay||(yield e.checkIfReadyToPay(so.ExternalSessionError)),e.paymentRequestLockController.lock(e);try{t=yield e.loadPaymentData(),delete e.googlePayTokenDeferred,e.metricsHandler.logEvent(so.ExternalSessionOK)}catch(t){if(delete e.googlePayTokenDeferred,e.paymentRequestLockController.unlock(e),"CANCELED"===t.statusCode)return e.metricsHandler.logEvent(so.ExternalSessionCancel),{status:si.CANCEL};if(e.metricsHandler.logEvent(so.ExternalSessionError),t instanceof Error)throw e.errorLogger.captureException(t),t;throw e.errorLogger.captureException(new Ji(JSON.stringify(t),e.methodType)),new Fn("tokenizing Google Pay.")}var{token:r,details:n}=yield e.requestGooglePayCardNonce(t);return{details:n,status:si.OK,token:r}}))()}validateConfiguration(){var e=vd.join(", ");if(document.querySelectorAll(e).length>0)throw new kn(this.methodType,e)}checkIfReadyToPay(e){var t=this;return md((function*(){var r=!1;try{var{result:n}=yield t.googlePayClient.isReadyToPay(t.isReadyToPayRequest);r=n}catch(e){t.errorLogger.captureException(e)}if(r){var i=t.callbackIntents.length>0?kl.Unknown:kl.Final;return t.googlePayClient.prefetchPaymentData(ld(t.isReadyToPayRequest,t.req,t.callbackIntents,i,t.merchantInfo,t.selectedShippingOptionId)),r}throw t.metricsHandler.logEvent(e),new Rn(Xs)}))()}loadPaymentData(){return this.googlePayTokenDeferred||(this.googlePayTokenDeferred=this.googlePayClient.loadPaymentData(ld(this.isReadyToPayRequest,this.req,this.callbackIntents,kl.Final,this.merchantInfo,this.selectedShippingOptionId))),this.googlePayTokenDeferred}onPaymentDataChanged(e){switch(e.callbackTrigger){case Ml.INITIALIZE:case Ml.SHIPPING_ADDRESS:return this.onPaymentDataChangedShippingAddress(e);case Ml.SHIPPING_OPTION:return this.onPaymentDataChangedShippingOption(e);default:return this.errorLogger.captureException(new Ji("Unknown callbackTrigger: ".concat(e.callbackTrigger),ii.GOOGLE_PAY)),Promise.resolve({})}}onPaymentDataChangedShippingOption(e){var t=this;return md((function*(){var r;t.selectedShippingOptionId=null===(r=e.shippingOptionData)||void 0===r?void 0:r.id;var{updatedOptionRequest:n,optionErrors:i}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,t.shippingOptions);return t.paymentDataChangedComplete(n,i)}))()}dispatchShippingOptionChanged(e,t){var r=this,n={optionErrors:[],updatedOptionRequest:{}};if(!this.handlers.includes(oi.SHIPPING_OPTION_CHANGED))return Promise.resolve(n);var i=ud(e,t);return i?this.status===sa.DESTROYED?Promise.resolve({optionErrors:[{intent:Ml.SHIPPING_OPTION,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:ni.PAYMENT_METHOD_DESTROYED}],updatedOptionRequest:{}}):new Promise((e=>{this.req.dispatchEvent(oi.SHIPPING_OPTION_CHANGED,{contactOrOption:i},(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r.metricsHandler.logEvent(ao.EventListenerOnCompleteResponse,pd(pd({},t),{},{eventName:oi.SHIPPING_OPTION_CHANGED})),r.metricsHandler.logEvent(so.ShippingOptionChangeOK),e({optionErrors:dd(t,Ml.SHIPPING_OPTION),updatedOptionRequest:t})}))})):Promise.resolve(n)}onPaymentDataChangedShippingAddress(e){var t=this;return md((function*(){var{updatedContactRequest:r,contactErrors:n}=yield t.dispatchShippingContactChanged(e);if(void 0===t.req.shippingOptions||0===t.req.shippingOptions.length)return t.paymentDataChangedComplete(r,n);var i,o=t.shippingOptions;r.shippingOptions?(o=r.shippingOptions,t.selectedShippingOptionId=r.shippingOptions[0].id):t.selectedShippingOptionId=null===(i=t.shippingOptions)||void 0===i?void 0:i[0].id;var{updatedOptionRequest:s,optionErrors:a}=yield t.dispatchShippingOptionChanged(t.selectedShippingOptionId,o),c=Object.assign({},r,s),u=[...n,...a];return t.paymentDataChangedComplete(c,u)}))()}dispatchShippingContactChanged(e){var t=this,r={contactErrors:[],updatedContactRequest:{}};return new Promise((n=>{var i;void 0!==e.shippingAddress&&this.handlers.includes(oi.SHIPPING_CONTACT_CHANGED)?this.status!==sa.DESTROYED?this.req.dispatchEvent(oi.SHIPPING_CONTACT_CHANGED,{contactOrOption:(i=e.shippingAddress,{city:i.locality,countryCode:i.countryCode,postalCode:i.postalCode,state:i.administrativeArea})},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.metricsHandler.logEvent(ao.EventListenerOnCompleteResponse,pd(pd({},e),{},{eventName:oi.SHIPPING_CONTACT_CHANGED})),t.metricsHandler.logEvent(so.ShippingAddressChangeOK),n({contactErrors:dd(e,Ml.SHIPPING_ADDRESS),updatedContactRequest:e})})):n({contactErrors:[{intent:Ml.SHIPPING_ADDRESS,message:"An error occurred when attempting to submit payment, please close this window and try again.",reason:ni.PAYMENT_METHOD_DESTROYED}],updatedContactRequest:{}}):n(r)}))}paymentDataChangedComplete(e,t){e.shippingOptions&&e.shippingOptions.length>0&&(this.shippingOptions=e.shippingOptions);var r=function(e,t,r,n){var i,{total:o,countryCode:s,currencyCode:a}=t,c=r,u=od(null!==(i=e.total)&&void 0!==i?i:o),l={totalPrice:u.price,totalPriceLabel:u.label,totalPriceStatus:u.status},d=Object.assign({},{countryCode:s,currencyCode:a},l),h=sd(Yl(t),Yl(e,t));h.length>0&&(d.displayItems=h);var p={newTransactionInfo:d},f=cd(a,n,c,e.shippingOptions);return f&&(p.newShippingOptionParameters=f),p}(e,this.req,this.shippingOptions,this.selectedShippingOptionId);return t.length>0&&(r.error=t[0]),r}requestGooglePayCardNonce(e){var t=this;return md((function*(){var r=ud(t.selectedShippingOptionId,t.shippingOptions);yield t.context.refreshWithCurrentAnalyticsToken();try{var n=yield t.paymentMethodMessenger.request(Cl.REQUEST_GOOGLE_PAY_CARD_NONCE,e);return t.context.setPaymentMethodTrackingId(n.paymentMethodTrackingId),yield t.context.updateSession(n.sessionId),t.wasFirstInteractionCalled=!1,t.paymentRequestLockController.unlock(t),function(e,t){var{card:r,cardNonce:n,shippingContact:i,billingContact:o}=e,s={details:{card:r,method:ii.GOOGLE_PAY},token:n};return i&&(s.details.shipping={contact:i},t&&(s.details.shipping.option=t)),o&&(s.details.card&&(s.details.card.billing=o),s.details.billing=o),s}(n,r)}catch(e){throw t.paymentRequestLockController.unlock(t),e instanceof qn||t.errorLogger.captureException(e),e}}))()}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(oo.FirstInteraction))}detachElement(e,t){this.element&&(this.element.innerHTML=""),this.status=e,this.metricsHandler.logEvent(t)}}function Ed(){return Ed=md((function*(e,t){return{authJwt:(yield e.request(Cl.GENERATE_GOOGLE_PAY_AUTH_TOKEN,{session:t})).token,merchantId:"05498866192997955200",merchantName:t.merchantName}})),Ed.apply(this,arguments)}var _d,Sd,Ad=function(e){var t=function(e,t){return Ed.apply(this,arguments)}(e.messenger,e.getSession()),r=ks.load("google-link",{src:"https://pay.google.com/gp/p/js/pay.js"},"google","payments");return Promise.all([r,t])};class Cd{constructor(){this.lockSet=new Set}get isLocked(){return this.lockSet.size>0}lock(e){this.lockSet.add(e)}unlock(e){this.lockSet.delete(e)}}!function(e){e.REQUEST_HYDRATION="REQUEST_HYDRATION"}(_d||(_d={})),function(e){e.ANALYTICS_TOKEN="_analyticsToken",e.LOCALE="_locale",e.SESSION_ID="_sessionId",e.TRANSLATION_OVERRIDES="_translationOverrides"}(Sd||(Sd={}));class Id{constructor(e){var{applePayMerchantIdentifier:t,cashAppPayMerchantIdentifier:r,merchantName:n,applicationId:i,avt:o,hostname:s,locationId:a,instanceId:c,sessionId:u,sourceUrl:l,locale:d}=e;this.applicationId=i,this.locationId=a,this._sessionId=u,this.instanceId=c,this.applePayMerchantIdentifier=t,this.cashAppPayMerchantIdentifier=r,this.merchantName=n,this.hostname=s,this.sourceUrl=l,this._locale=d,this.avt=o}get analyticsToken(){return this._analyticsToken}get sessionId(){return this._sessionId}setSessionId(e){this.setAttribute(Sd.SESSION_ID,e)}setTranslationOverrides(e){this.setAttribute(Sd.TRANSLATION_OVERRIDES,e)}setLocale(e){this.setAttribute(Sd.LOCALE,e)}setAnalyticsToken(e){this.setAttribute(Sd.ANALYTICS_TOKEN,e)}serialize(){return this.serialized||(this.serialized={applePayMerchantIdentifier:this.applePayMerchantIdentifier||"",cashAppPayMerchantIdentifier:this.cashAppPayMerchantIdentifier||"",merchantName:this.merchantName,applicationId:this.applicationId,avt:this.avt,hostname:this.hostname,instanceId:this.instanceId,locale:this._locale,locationId:this.locationId,sessionId:this._sessionId,sourceUrl:this.sourceUrl},this._analyticsToken&&(this.serialized.analyticsToken=this._analyticsToken),this._translationOverrides&&(this.serialized.translationOverrides=this._translationOverrides)),this.serialized}setAttribute(e,t){(this.isValueString(t)||e===Sd.TRANSLATION_OVERRIDES)&&(this[e]=t),this.serialized=void 0}isValueString(e){return"string"==typeof e}}var Od=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URL(d.IFRAME_SRC);return Object.entries(e).forEach((e=>{var[r,n]=e;t.searchParams.set(r,n)})),t.toString()}(e);return sc({frameborder:"0",height:"0",scrolling:"no",src:t,style:"border: none !important; display: block !important; visibility: hidden !important",width:"0"})},Td=function(e){var t=new(mo[e.name]||en);return t.fromSerializedError(e),t},bd=function(e){return{_isSerializedError:!0,errors:e.errors,message:e.message,name:e.name}};class wd extends ja{constructor(e){super({name:e,errorSerializer:{serialize:e=>e instanceof en?bd(e):e,deserialize:e=>e instanceof Error?e:Td(e)}})}setErrorLogger(e,t){this.setErrorHandler((function(r,n){var i,o,s,a;void 0!==n&&(i=null===(s=n.data.payload)||void 0===s||null===(s=s.session)||void 0===s?void 0:s.instanceId,o=null===(a=n.data.payload)||void 0===a||null===(a=a.session)||void 0===a?void 0:a.sessionId),r instanceof Ra?t.logEvent({event:co.IframeMessengerTimeoutError,eventSource:fo.App,internalConfigurationValues:r.message},i,o):e.captureException(r)}))}}function Pd(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Rd(){var e;return e=function*(e,t,r,n,i){var o=new wd(i);return o.setErrorLogger(t,r),o.connect({origin:d.ASSET_URL,window:e.contentWindow},e.id),yield o.sendMessage("INITIALIZE",n),o},Rd=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Pd(o,n,i,s,a,"next",e)}function a(e){Pd(o,n,i,s,a,"throw",e)}s(void 0)}))},Rd.apply(this,arguments)}var Nd={build:function(e,t,r,n,i){return Rd.apply(this,arguments)}};function Dd(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Ld(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Dd(o,n,i,s,a,"next",e)}function a(e){Dd(o,n,i,s,a,"throw",e)}s(void 0)}))}}function xd(){return xd=Ld((function*(e,t,r,n){var{applicationId:i,locationId:o,hostname:s,sourceUrl:a}=e;t.logEvent({event:oo.InitializeStart,eventSource:fo.App});var c,u,l=n.getCurrentLocale();try{c=yield Od({applicationId:i,hostname:s})}catch(e){if(t.logEvent({event:oo.InitializeError,eventSource:fo.App}),r.captureException(e),io(e))throw new Fn("initializing the payment method");throw e}try{u=yield Nd.build(c,r,t,{applicationId:i,hostname:s,locale:l,locationId:o})}catch(e){if(t.logEvent({event:oo.InitializeError,eventSource:fo.App}),r.captureException(e),io(e))throw new Fn("initializing the payment method");throw e}try{var{avt:d,sessionId:h,applePartnerInternalMerchantIdentifier:p,cashAppPayMerchantIdentifier:f,merchantName:g,instanceId:m,paymentMethodSupportDetail:v,featureFlagValues:y,isTestMerchant:E}=yield u.request(_d.REQUEST_HYDRATION,{body:{applicationId:i,hostname:s,locationId:o}});t.setAvt(d);var _=new Id({applePayMerchantIdentifier:p,cashAppPayMerchantIdentifier:f,merchantName:g,applicationId:i,avt:d,hostname:s,instanceId:m,locale:l,locationId:o,sessionId:h,sourceUrl:a});return t.logEvent({event:oo.InitializeOK,eventSource:fo.App,internalConfigurationValues:y},m,h),{featureFlagValues:y,localeStrings:n,messenger:u,paymentMethodSupportDetail:v,session:_,isTestMerchant:E}}catch(e){if(t.logEvent({event:oo.InitializeError,eventSource:fo.App}),io(e))throw new Fn("initializing the payment method");throw e}})),xd.apply(this,arguments)}function kd(){return(kd=Ld((function*(e,t,r){var{applicationId:n,locationId:i,sourceUrl:o}=e.serialize();try{var s=yield Vs.getToken({applicationId:n,locationId:i,websiteUrl:o});e.setAnalyticsToken(s)}catch(e){e instanceof Un&&t.captureException(e),r&&window.clearInterval(r)}}))).apply(this,arguments)}var Md,Ud,Hd={initializeAnalytics:function(e,t,r){return kd.apply(this,arguments)},initializePayment:function(e,t,r,n){return xd.apply(this,arguments)},validateVerificationDetails:function(e,t){var r=[];return e.billingContact&&"object"==typeof e.billingContact||r.push(new na(t,"details.billingContact","object")),e.intent&&"string"==typeof e.intent&&["CHARGE","STORE","CHARGE_AND_STORE"].includes(e.intent)||r.push(new na(t,"details.intent","string")),"CHARGE"!==e.intent&&"CHARGE_AND_STORE"!==e.intent||(e.amount&&"string"==typeof e.amount||r.push(new na(t,"details.amount","string")),e.currencyCode&&"string"==typeof e.currencyCode||r.push(new na(t,"details.currencyCode","string"))),r}};!function(e){e.REQUEST_APPLE_PAY_CARD_NONCE="REQUEST_APPLE_PAY_CARD_NONCE",e.REQUEST_APPLE_PAY_MERCHANT_VALIDITY="REQUEST_APPLE_PAY_MERCHANT_VALIDITY"}(Md||(Md={})),function(e){e.SUCCESS="SUCCESS",e.CANCEL="CANCEL"}(Ud||(Ud={}));var jd,Bd={AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua And Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AX:"Finland",AZ:"Azerbaijan",BA:"Bosnia And Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria (rep.)",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barthelemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia",BQ:"Bonaire, Sint Eustatius, And Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CC:"Cocos (keeling) Islands",CD:"Congo (dem. Rep.)",CF:"Central African Republic",CG:"Congo (rep.)",CH:"Switzerland",CI:"Cote D'ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CV:"Cape Verde",CW:"Curacao",CX:"Christmas Island",CY:"Cyprus",CZ:"Czech Rep.",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Rep.",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (malvinas)",FM:"Micronesia (federated State Of)",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada (west Indies)",GE:"Georgia",GF:"French Guiana",GG:"Channel Islands",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia",GT:"Guatemala",GU:"Guam",GW:"Guinea-bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard And Mcdonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary (rep.)",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle Of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran",IS:"Iceland",IT:"Italy",JE:"Channel Islands",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts And Nevis",KR:"South Korea",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao (people's Dem. Rep.)",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Rep. Moldova",ME:"Montenegro",MF:"Saint Martin",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NF:"Norfolk Island",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru Central Pacific",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama (rep.)",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"St. Pierre And Miquelon",PN:"Pitcairn",PR:"Puerto Rico",PS:"Palestinian Territory",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"Reunion",RO:"Romania",RS:"Republic Of Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SE:"Sweden",SG:"Rep. Of Singapore",SH:"Saint Helena",SI:"Slovenia",SJ:"Svalbard And Jan Mayen Islands",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome And Principe",SV:"El Salvador",SX:"Sint Maarten",SZ:"Swaziland",TC:"Turks And Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad And Tobago",TV:"Tuvalu",TW:"Taiwan",TZ:"Tanzania (united Rep.)",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Vatican",VC:"Saint Vincent And The Grenadines (antilles)",VE:"Venezuela",VG:"Virgin Islands (british)",VI:"Virgin Islands (u.s.)",VN:"Viet Nam",VU:"Vanuatu",WF:"Wallis And Futuna Islands",WS:"Samoa",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function Gd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gd(Object(r),!0).forEach((function(t){Fd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fd(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){e.PENDING="pending",e.FINAL="final"}(jd||(jd={}));var Vd,zd,Yd,$d,Kd={addressLines:"addressLines",city:"locality",country:"countryCode",postalCode:"postalCode",state:"administrativeArea"},Wd=["visa","masterCard","jcb","discover","amex"];function Qd(e){return{amount:e.amount,label:e.label,type:e.pending?jd.PENDING:jd.FINAL}}function Zd(e){return{amount:e.amount,detail:"",identifier:e.id,label:e.label}}function Jd(e,t){return t?Qd(t):e}function Xd(e,t){return t?t.map(Qd):e}function eh(e,t){return t?t.map(Zd):e}function th(){for(var e=3;e>0&&!window.ApplePaySession.supportsVersion(e);)e--;return e}function rh(e){var{addressLines:t,locality:r,administrativeArea:n,postalCode:i,countryCode:o,givenName:s,familyName:a,emailAddress:c,phoneNumber:u}=e;return{addressLines:t,city:r,countryCode:o&&o.toUpperCase(),email:c,familyName:a,givenName:s,phone:u,postalCode:i,state:n}}function nh(e){var{amount:t,identifier:r,label:n}=e;return{amount:t,id:r,label:n}}function ih(e,t,r){return{errors:(n=e,i=[],n.error&&i.push(new window.ApplePayError("addressUnserviceable","postalAddress",n.error)),n.shippingErrors&&Object.entries(n.shippingErrors).forEach((e=>{var[t,r]=e,n=Kd[t]||"postalAddress";i.push(new window.ApplePayError("shippingContactInvalid",n,r))})),i),newLineItems:Xd(t.lineItems,Yl(e,r)),newShippingMethods:eh(t.shippingMethods,e.shippingOptions),newTotal:Jd(t.total,e.total)};var n,i}function oh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oh(Object(r),!0).forEach((function(t){ah(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ah(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ch(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function uh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){ch(o,n,i,s,a,"next",e)}function a(e){ch(o,n,i,s,a,"throw",e)}s(void 0)}))}}class lh extends ua{constructor(e,t,r){if(super(t),this.methodType=ii.APPLE_PAY,this.sessionInProgress=!1,this.wasFirstInteractionCalled=!1,this.paymentMethodMessenger=new pa(this.context),this.paymentRequestLockController=r,this.req=e,void 0===window.ApplePaySession)throw new Rn(Zs);if(!window.ApplePaySession.canMakePayments())throw new Rn(Js);this.validateConfiguration()}get applePaySession(){if(!this.sessionHandler){var e="Apple Pay Session is expected to exist when it does not.";throw this.errorLogger.captureException(new Ji(e,"Apple Pay")),new Fn(e)}return this.sessionHandler}set applePaySession(e){this.sessionHandler=e}tokenize(){var e=this;return uh((function*(){if(e.handleFirstInteraction(),e.throwIfDestroyed(),e.sessionInProgress)throw new qn([da]);e.applePayPaymentRequest=function(e,t){var r=[...Wd];null!=t&&t.isActive(Ti.CanUseInterac)&&r.push("interac");var n,i={countryCode:e.countryCode,currencyCode:e.currencyCode,lineItems:Xd([],Yl(e)),merchantCapabilities:["supports3DS"],requiredBillingContactFields:["postalAddress"],shippingMethods:eh([],e.shippingOptions),supportedNetworks:r,total:Qd(e.total)};return e.shippingContact&&(i.shippingContact={addressLines:(n=e.shippingContact).addressLines,administrativeArea:n.state,country:Bd[n.countryCode],countryCode:n.countryCode,emailAddress:n.email,familyName:n.familyName,givenName:n.givenName,locality:n.city,phoneNumber:n.phone,postalCode:n.postalCode}),e.requestBillingContact&&(i.requiredShippingContactFields=["email","name","phone"]),e.requestShippingContact&&(i.requiredShippingContactFields=["postalAddress","name","email","phone"]),i}(e.req,e.featureFlagHandler),e.applePaySession=new window.ApplePaySession(th(),e.applePayPaymentRequest);var t=e.shippingContactChanged.bind(e);e.applePaySession.onshippingcontactselected=r=>{t(r.shippingContact,e.applePayPaymentRequest)};var r=e.shippingOptionChanged.bind(e);e.applePaySession.onshippingmethodselected=t=>{r(t.shippingMethod,e.applePayPaymentRequest)};var n=new Promise((t=>{e.applePaySession.oncancel=()=>{e.metricsHandler.logEvent(so.ExternalSessionCancel),e.deleteApplePaySession(),t({status:Ud.CANCEL})}})),i=new Promise(((t,r)=>{e.applePaySession.onvalidatemerchant=function(){var n=uh((function*(n){try{var i=yield e.requestApplePayMerchantValidity(n.validationURL,e.applePayPaymentRequest);t(i)}catch(e){r(e)}}));return function(e){return n.apply(this,arguments)}}()})),o=new Promise(((t,r)=>{e.applePaySession.onpaymentauthorized=function(){var n=uh((function*(n){try{var i=yield e.requestApplePayCardNonce(n);e.deleteApplePaySession(),t(i)}catch(t){e.deleteApplePaySession(),r(t)}}));return function(e){return n.apply(this,arguments)}}()}));e.sessionInProgress=!0,e.paymentRequestLockController.lock(e),e.metricsHandler.logEvent(so.ExternalSessionStart),e.applePaySession.begin();try{var s=yield i;e.applePaySession.completeMerchantValidation(s);var{status:a,token:c,details:u}=yield Promise.race([o,n]);return e.metricsHandler.logEvent(so.ExternalSessionOK),a===Ud.SUCCESS?{details:u,status:si.OK,token:c}:{status:si.CANCEL}}catch(t){throw e.metricsHandler.logEvent(so.ExternalSessionError),t}}))()}destroy(){return this.sessionHandler&&(this.sessionHandler.abort(),this.deleteApplePaySession()),this.status=sa.DESTROYED,this.metricsHandler.logEvent(ao.Destroyed),Promise.resolve(!0)}validateConfiguration(){var e=this.session;if(!e.applePayMerchantIdentifier)throw new Rn(ea,"applePayMerchantIdentifier");if(!e.locationId)throw new Rn(ea,"locationId")}requestApplePayCardNonce(e){var t=this;return uh((function*(){yield t.context.refreshWithCurrentAnalyticsToken();var r={applepayData:e.payment},n=t.selectedShippingMethod||t.getDefaultShippingMethod();try{var i=yield t.paymentMethodMessenger.request(Md.REQUEST_APPLE_PAY_CARD_NONCE,r);return t.applePaySession.completePayment(window.ApplePaySession.STATUS_SUCCESS),t.context.setPaymentMethodTrackingId(i.paymentMethodTrackingId),t.wasFirstInteractionCalled=!1,yield t.context.updateSession(i.sessionId),function(e,t){var{card:r,cardNonce:n,shippingContact:i,billingContact:o}=e,s={details:{card:r,method:ii.APPLE_PAY},status:Ud.SUCCESS,token:n};if(i){var a={contact:i};t&&(a.option=nh(t)),s.details.shipping=a}return o&&(s.details.card&&(s.details.card.billing=o),s.details.billing=o),s}(i,n)}catch(e){throw t.applePaySession.completePayment(window.ApplePaySession.STATUS_FAILURE),e instanceof qn||t.errorLogger.captureException(e),e}}))()}requestApplePayMerchantValidity(e,t){var r=this;return uh((function*(){var n,i=t&&t.total?t.total.label:null,o=r.session,s={clientId:o.applicationId,locationId:o.locationId,merchantName:i,sourceUrl:o.sourceUrl,validationUrl:e};try{n=yield r.paymentMethodMessenger.request(Md.REQUEST_APPLE_PAY_MERCHANT_VALIDITY,s)}catch(e){throw r.applePaySession.abort(),r.deleteApplePaySession(),e}try{return JSON.parse(n.session)}catch(e){throw r.applePaySession.abort(),r.deleteApplePaySession(),r.errorLogger.captureException(new Ji(e.message,r.methodType)),new Fn("parsing Apple Pay merchant validity")}}))()}shippingContactChanged(e,t){var r=th()>=3?this.updateApplePayShippingContactV3(t):this.updateApplePayShippingContactLegacy(t);this.req.hasEventListener(oi.SHIPPING_CONTACT_CHANGED)?this.req.dispatchEvent(oi.SHIPPING_CONTACT_CHANGED,{contactOrOption:rh(e)},(e=>{this.metricsHandler.logEvent(ao.EventListenerOnCompleteResponse,sh(sh({},e),{},{eventName:oi.SHIPPING_CONTACT_CHANGED})),this.handleShippingContactUpdate(r,e)})):this.handleShippingContactUpdate(r)}handleShippingContactUpdate(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null===(t=r.shippingOptions)||void 0===t?void 0:t[0],i=this.getDefaultShippingMethod();void 0===n&&null!==i&&(n=nh(i)),void 0!==n&&this.req.hasEventListener(oi.SHIPPING_OPTION_CHANGED)?(this.selectedShippingMethod=Zd(n),this.req.dispatchEvent(oi.SHIPPING_OPTION_CHANGED,{contactOrOption:n},(t=>{this.metricsHandler.logEvent(ao.EventListenerOnCompleteResponse,sh(sh({},t),{},{eventName:oi.SHIPPING_OPTION_CHANGED})),e(Object.assign({},r,t))}))):e(r)}shippingOptionChanged(e,t){this.selectedShippingMethod=e;var r=th()>=3?this.updateApplePayShippingMethodV3(t):this.updateApplePayShippingMethodLegacy(t);this.req.hasEventListener(oi.SHIPPING_OPTION_CHANGED)?this.req.dispatchEvent(oi.SHIPPING_OPTION_CHANGED,{contactOrOption:nh(e)},r):r()}updateApplePayPaymentRequest(e){e.newTotal&&(this.applePayPaymentRequest.total=e.newTotal),e.newLineItems&&(this.applePayPaymentRequest.lineItems=e.newLineItems),e.newShippingMethods&&(this.applePayPaymentRequest.shippingMethods=e.newShippingMethods)}updateApplePayShippingContactV3(e){var t=this;return function(){var r=ih(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e,t.req);t.updateApplePayPaymentRequest(r),t.metricsHandler.logEvent(so.ShippingAddressChangeOK),t.applePaySession.completeShippingContactSelection(r)}}updateApplePayShippingContactLegacy(e){var t=this;return function(){var r,n,i,o,s=(r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e,i=t.req,o=ih(r,n,i),qd({status:window.ApplePaySession.STATUS_SUCCESS},o));t.updateApplePayPaymentRequest(s),t.metricsHandler.logEvent(so.ShippingAddressChangeOK),t.applePaySession.completeShippingContactSelection(s.status,s.newShippingMethods,s.newTotal,s.newLineItems)}}updateApplePayShippingMethodV3(e){var t=this;return function(){var r,n,i,o=(r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e,i=t.req,{newLineItems:Xd(n.lineItems,Yl(r,i)),newTotal:Jd(n.total,r.total)});t.updateApplePayPaymentRequest(o),t.metricsHandler.logEvent(so.ShippingOptionChangeOK),t.applePaySession.completeShippingMethodSelection(o)}}updateApplePayShippingMethodLegacy(e){var t=this;return function(){var r,n,i,o,s=(r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e,i=t.req,o=ih(r,n,i),qd({status:window.ApplePaySession.STATUS_SUCCESS},o));t.updateApplePayPaymentRequest(s),t.metricsHandler.logEvent(so.ShippingOptionChangeOK),t.applePaySession.completeShippingMethodSelection(s.status,s.newTotal,s.newLineItems)}}getDefaultShippingMethod(){var e=this.applePayPaymentRequest.shippingMethods;return e&&e.length>0?this.applePayPaymentRequest.shippingMethods[0]:null}deleteApplePaySession(){delete this.sessionHandler,this.paymentRequestLockController.unlock(this),this.sessionInProgress=!1}handleFirstInteraction(){this.wasFirstInteractionCalled||(this.metricsHandler.logEvent(oo.FirstInteraction),this.wasFirstInteractionCalled=!0)}}!function(e){e.SHIPPING_ADDRESS_UNRECOGNIZED="SHIPPING_ADDRESS_UNRECOGNIZED",e.SHIPPING_ADDRESS_UNSUPPORTED="SHIPPING_ADDRESS_UNSUPPORTED",e.SERVICE_UNAVAILABLE="SERVICE_UNAVAILABLE"}(Vd||(Vd={})),function(e){e.BADGE="badge",e.LOCKUP="lockup"}(zd||(zd={})),function(e){e.BLACK="black",e.WHITE="white",e.MINT="mint"}(Yd||(Yd={})),function(e){e.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN="REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN",e.REQUEST_AFTERPAY_CHECKOUT_HANDLER="REQUEST_AFTERPAY_CHECKOUT_HANDLER"}($d||($d={}));var dh="".concat(d.ASSET_URL,"/afterpay.css"),hh="sq-afterpay-styles",ph={[Yr.BLACK]:{[$r.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Black-White.svg",[$r.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Black-White.svg",[$r.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Black-White.svg"},[Yr.MINT]:{[$r.CheckoutWithAfterpay]:"afterpay-buttons/Afterpay_Checkout_Button_Mint-Black.svg",[$r.BuyNowWithAfterpay]:"afterpay-buttons/Afterpay_BuyNow_Button_Mint-Black.svg",[$r.PlaceOrderWithAfterpay]:"afterpay-buttons/Afterpay_PlaceOrder_Button_Mint-Black.svg"}},fh={[Yr.BLACK]:{[$r.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Black-White.svg",[$r.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Black-White.svg",[$r.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Black-White.svg"},[Yr.MINT]:{[$r.CheckoutWithAfterpay]:"afterpay-buttons/Clearpay_Checkout_Button_Mint-Black.svg",[$r.BuyNowWithAfterpay]:"afterpay-buttons/Clearpay_BuyNow_Button_Mint-Black.svg",[$r.PlaceOrderWithAfterpay]:"afterpay-buttons/Clearpay_PlaceOrder_Button_Mint-Black.svg"}},gh=new Set(["US","CA","AU","NZ"]);function mh(e,t){var r=0;return e.forEach((e=>{r+=Ni.paymentRequestAmountToMoneyAmount(e,t)})),Ni.moneyAmountToPaymentRequestAmount(r,t)}function vh(e,t){return mh(e.map((e=>e.amount)),t)}var yh=function(e,t){return e.map((e=>({name:e.label,quantity:1,sku:e.id,price:{amount:e.amount,currency:t},imageUrl:e.imageUrl,pageUrl:e.productUrl})))},Eh=function(e,t){return e.map((e=>({displayName:e.label,amount:{amount:e.amount,currency:t}})))},_h=function(e){return{area1:e.city,countryCode:e.countryCode,line1:e.addressLines[0],line2:e.addressLines[1],name:"".concat(e.givenName," ").concat(e.familyName),phoneNumber:e.phone,postcode:e.postalCode,region:e.state}},Sh=function(e){if(e.requestShippingContact&&void 0!==e.lineItems&&e.lineItems.length>0){var t=vh(e.lineItems,e.currencyCode);if(e.discounts)t=mh([t,(r=e.discounts,n=e.currencyCode,"-".concat(vh(r,n)))],e.currencyCode);return{amount:t,currency:e.currencyCode}}var r,n;return{amount:mh([e.total.amount],e.currencyCode),currency:e.currencyCode}},Ah=function(e,t){return e.shippingOptions.map((e=>({description:"",id:e.id,name:e.label,shippingAmount:{amount:e.amount,currency:t.currencyCode},orderAmount:{amount:e.total.amount,currency:t.currencyCode},taxAmount:{amount:vh(e.taxLineItems||[],t.currencyCode),currency:t.currencyCode}})))},Ch=function(e){var t,r,n=[];return[e.address1,e.address2].forEach((e=>{void 0!==e&&n.push(e)})),e.name&&([t,r]=e.name.split(/\s(?=\S+$)/)),{givenName:t,familyName:r,city:e.suburb,state:e.state,postalCode:e.postcode,countryCode:e.countryCode,phone:e.phoneNumber,addressLines:n}},Ih=function(e){return{amount:e.shippingAmount.amount,id:e.id,label:e.name}};function Oh(e,t){return Dl({[t]:e},{[t]:{city:"string",countryCode:"string",addressLines:"object",postalCode:"string",state:"string",givenName:"string",familyName:"string"}})}var Th=function(e){return Oh(e,"shippingContact")};function bh(e){var t=e.split("-")[1];return gh.has(t)}var wh=function(e,t){return bh(t)?ph[e]:fh[e]},Ph=function(e){return bh(e)?"afterpay-brand.svg":"clearpay-brand.svg"},Rh=[qn],Nh=[an,cn];function Dh(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var Lh=[25,50,75,100];class xh{constructor(e,t){this.attached=!1,this.req=e,this.stylesLoadedPromise=new Promise(((e,t)=>{this.resolveStylePromise=e,this.rejectStylePromise=t})),this.context=t,this.locale=this.context.getSession().locale,this.currencyCode=this.req.currencyCode;var r=this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.weeks;this.PERIOD_TEXT=[this.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.today,"2 ".concat(r),"4 ".concat(r),"6 ".concat(r)],t.addLocaleChangedListener((()=>{this.locale=this.context.getSession().locale,this.update()})),e.addEventListener(xl.UPDATE,(()=>{this.update()}))}attach(e,t){var r,n=this;return(r=function*(){n.element=e,Bu.addStyleElement(dh,hh,n.resolveStylePromise,n.rejectStylePromise);try{yield n.stylesLoadedPromise}catch(e){throw new Fn("attaching the Afterpay Checkout Widget")}var r=n.buildAmounts().map((e=>Ni.moneyAmountToInternationalizedCurrency(e,n.currencyCode,n.locale))),i=!1;t&&t.includeBranding&&(i=!0);var o=Ph(n.locale),s='\n      <div class="sq-ap__checkout-widget-container">\n        '.concat(i?'<div class="sq-ap__wordmark">\n                <img id="ap-wordmark-image" src="'.concat(d.STATIC_ASSET(o),'"/>\n              </div>'):"",'\n        <p class="sq-ap__checkout-title">').concat(n.context.getLocaleString().paymentMethods.afterpay.checkoutWidget.title,'</p>\n        <div class="sq-ap__payment-container">\n          ').concat(r.map(((e,t)=>'\n              <div id="ap-payment-container-'.concat(t,'" class="sq-ap__individual-payment">\n                <div class="sq-ap__harvey-ball-container">\n                  ').concat(function(e){var t=12,r=2*Math.PI*6,n=r*Lh[e]/100;return'\n      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 '.concat(24," ").concat(24,'" class="sq-ap__harvey-ball">\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="white"\n        />\n        <circle\n          r="').concat(6,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke="').concat("#B2FCE4",'"\n          stroke-width="').concat(t,'"\n          stroke-dasharray="').concat(n," ").concat(r,'"\n          transform="rotate(-90) translate(-').concat(24,')"\n        />\n        <circle\n          r="').concat(t,'"\n          cx="').concat(t,'"\n          cy="').concat(t,'"\n          fill="none"\n          stroke-width="2"\n          stroke="black"\n       />\n      </svg>\n    ')}(t),'\n                </div>\n                <p id="ap-payment-amount-').concat(t,'" class="sq-ap__amount">').concat(e,'</p>\n                <p class="sq-ap__period">').concat(n.PERIOD_TEXT[t],"</p>\n              </div>\n            "))).join(""),"\n        </div>\n      </div>\n    ");n.element.insertAdjacentHTML("afterbegin",s),n.attached=!0},function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function s(e){Dh(o,n,i,s,a,"next",e)}function a(e){Dh(o,n,i,s,a,"throw",e)}s(void 0)}))})()}update(){if(this.attached&&this.element){var e=document.getElementById("ap-wordmark-image");if(e){var t=Ph(this.locale);e.src=d.STATIC_ASSET(t)}this.buildAmounts().map((e=>Ni.moneyAmountToInternationalizedCurrency(e,this.currencyCode,this.locale))).forEach(((e,t)=>{var r,n=null===(r=this.element)||void 0===r?void 0:r.querySelector("#ap-payment-amount-".concat(t));n&&(n.innerHTML=e)}))}}buildAmounts(){var e=Ni.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode),t=e/4;switch(e%4){case 0:return kh(t,0);case 1:return kh(t,1);case 2:return kh(t,-2);case 3:return kh(t,-1);default:return[]}}}function kh(e,t){var r=Array.from({length:3}).fill(Math.round(e));return r.push(e+t),r}function Mh(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Uh(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Mh(o,n,i,s,a,"next",e)}function a(e){Mh(o,n,i,s,a,"throw",e)}s(void 0)}))}}var Hh=new Set(["en_US","en_CA","fr_CA","en_AU","en_NZ","en_GB","fr_FR","es_ES","it_IT"]),jh=new Set(["AUD","GBP","USD","CAD","EUR"]),Bh={[Yr.BLACK]:"#000",[Yr.MINT]:"#b2fce4"};class Gh extends ua{constructor(e,t,r,n,i){if(super(n),this.methodType=ii.AFTERPAY_CLEARPAY,this.onTokenizeCallbacks=[],this.tokenizationBuffer=[],this.wasFirstInteractionCalled=!1,this.onTokenizeHandlerAdded=!1,this.transferOptions={},this.buyNowOption=!1,this.afterpayLibrary=e,this.afterpayMessagingLibrary=t,this.req=r,this.paymentRequestLockController=i,this.paymentMessenger=new pa(this.context),this.total=this.totalMoney(),!this.session.locationId)throw new Rn(ea,"locationId");this.locationID=this.session.locationId,this.req.addEventListener("update",(()=>{delete this.checkoutTokenResponse,this.element&&this.initializeAfterpayPopup(this.element),this.total=this.totalMoney()}))}attach(e,t){var r=this;return Uh((function*(){var n,i;r.throwIfDestroyedOrAlreadyAttached(),r.status=sa.ATTACHED,r.metricsHandler.logEvent(oo.AttachStart),r.metricsHandler.logEvent(ao.Configured,t);try{n=pc(e)}catch(e){throw r.metricsHandler.logEvent(oo.AttachError),r.status===sa.ATTACHED&&(r.status=sa.DETACHED),e}if(!t||!t.useCustomButton){var o=document.createElement("div");n.appendChild(o);var s=o.attachShadow({mode:"open"});try{yield Bu.addStyleElementToTarget(dh,hh,s)}catch(e){throw r.status===sa.ATTACHED&&(r.status=sa.DETACHED),new Fn("attaching Afterpay")}var a=(null==t?void 0:t.buttonColor)||Yr.BLACK,c=(null==t?void 0:t.buttonType)||$r.BuyNowWithAfterpay,u=wh(a,r.session.locale);if(!u)throw r.status===sa.ATTACHED&&(r.status=sa.DETACHED),new _n("buttonColor",a);var l=u[c];if(!l)throw r.status===sa.ATTACHED&&(r.status=sa.DETACHED),new _n("buttonType",c);var h=document.createElement("button");h.setAttribute("type","button"),h.setAttribute("class","sq-ap__button"),h.setAttribute("style","background-color: ".concat(Bh[a],"; background-image: url(").concat(d.STATIC_ASSET(l),");")),s.append(h)}r.buyNowOption=(null==t?void 0:t.finalCtaButtonType)===Kr.BUY_NOW,r.initializeAfterpayPopup(n),r.metricsHandler.logEvent(oo.AttachOK),r.element=n,r.onTokenizeHandlerAdded&&(null===(i=r.element)||void 0===i||i.addEventListener("click",Uh((function*(){yield r.openPaymentModal()}))))}))()}attachMessaging(e,t){return this.throwIfDestroyed(),function(e){dc(e,uc)}(e),this.afterpayMessagingLibrary.createPlacements({targetSelector:e,attributes:{amount:Number(this.req.total.amount),badgeTheme:null==t?void 0:t.badgeTheme,currency:this.req.currencyCode,locale:this.session.locale,modalLinkStyle:null==t?void 0:t.modalLinkStyle,modalTheme:null==t?void 0:t.modalTheme,size:null==t?void 0:t.size}}),Promise.resolve()}attachCheckoutWidget(e,t){var r=this;return Uh((function*(){if(!jh.has(r.req.currencyCode))throw new dn("Currency is not supported by Afterpay. Valid currencies are: ".concat([...jh].join(", ")));var n=new xh(r.req,r.context),i=pc(e);yield n.attach(i,t)}))()}displayInformationModal(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ni.convertLocaleToUnderscore(this.session.locale);Hh.has(t)||(t="en_US"),this.afterpayMessagingLibrary.launchModal(Object.assign({},e,{locale:t}))}onTokenize(e){var t,r=this;this.throwIfDestroyed(),this.onTokenizeCallbacks.push(e),1===this.onTokenizeCallbacks.length&&(this.tokenizationBuffer.forEach((e=>{var{result:t,error:r}=e;this.emitTokenizationResult(t,r)})),this.tokenizationBuffer=[]),this.onTokenizeHandlerAdded||void 0===this.element||null===(t=this.element)||void 0===t||t.addEventListener("click",Uh((function*(){yield r.openPaymentModal()}))),this.onTokenizeHandlerAdded=!0}tokenize(){var e=this;return Uh((function*(){if(e.throwIfDestroyedOrNotAttached(),e.onTokenizeHandlerAdded)throw new on;var t,r,n=new Promise(((e,n)=>{t=e,r=n}));return e.onTokenizeCallbacks=[function(e,n){void 0===n?void 0!==e?t(e):r(new qn([Ui.UNKNOWN])):r(n)}],yield e.openPaymentModal(),n}))()}destroy(){return this.status===sa.DESTROYED?Promise.resolve(!1):(this.detachElement(sa.DESTROYED,ao.Destroyed),Promise.resolve(!0))}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(sa.DETACHED,ao.Detached),Promise.resolve(!0)}internalSetCheckoutToken(){var e=this;return Uh((function*(){try{var t=yield e.paymentMessenger.request($d.REQUEST_AFTERPAY_CHECKOUT_HANDLER,e.buildCheckoutPayload());return e.checkoutTokenResponse=t,e.checkoutTokenResponse.token}catch(t){var r=t;throw Ni.isInstanceOf(t,[...Nh,fn,dn])||(e.errorLogger.captureException(t),r=new Fn("tokenizing with Afterpay")),r}}))()}commenceCheckout(e){var t=this;return Uh((function*(){if(t.wasFirstInteractionCalled||(t.wasFirstInteractionCalled=!0,t.metricsHandler.logEvent(oo.FirstInteraction)),t.metricsHandler.logEvent(so.ExternalSessionStart),t.paymentRequestLockController.lock(t),void 0!==t.checkoutTokenResponse&&new Date(t.checkoutTokenResponse.expires)>new Date)e.resolve(t.checkoutTokenResponse.token);else try{var r=yield t.internalSetCheckoutToken();e.resolve(r)}catch(r){t.paymentRequestLockController.unlock(t),t.metricsHandler.logEvent(so.ExternalSessionError),t.emitTokenizationResult(void 0,r),e.reject(r.message)}}))()}completeCheckout(e){var t=this;return Uh((function*(){try{if(function(e){return"SUCCESS"===e.status&&void 0!==e.orderToken}(e)){var r;yield t.context.refreshWithCurrentAnalyticsToken();var n=yield t.paymentMessenger.request($d.REQUEST_AFTERPAY_INSTANT_WALLET_TOKEN,t.buildInstantWalletTokenPayload(e.orderToken,t.total));t.context.updateSession(n.sessionID),t.metricsHandler.logEvent(so.ExternalSessionOK);var i={details:{method:ii.AFTERPAY_CLEARPAY,shipping:{contact:{email:null==n||null===(r=n.afterpayData)||void 0===r?void 0:r.email}}},status:si.OK,token:n.token};null!=n&&n.billingContact&&(i.details.billing=null==n?void 0:n.billingContact),null!=n&&n.shippingContact&&(i.details.shipping={contact:null==n?void 0:n.shippingContact}),delete t.checkoutTokenResponse,t.emitTokenizationResult(i)}else t.metricsHandler.logEvent(so.ExternalSessionCancel),t.emitTokenizationResult({status:si.CANCEL})}catch(e){var o=e;t.metricsHandler.logEvent(so.ExternalSessionError),Ni.isInstanceOf(e,Rh)||(t.errorLogger.captureException(e),o=new Fn("tokenizing Afterpay")),t.emitTokenizationResult(void 0,o)}t.paymentRequestLockController.unlock(t)}))()}onShippingOptionChange(e){this.metricsHandler.logEvent(so.ShippingOptionChangeOK),this.total.amount=Ni.paymentRequestAmountToMoneyAmount(e.orderAmount.amount,this.req.currencyCode),this.req.dispatchEvent(Xr.AFTERPAY_SHIPPING_OPTION_CHANGED,{contactOrOption:Ih(e)},(e=>{}))}onShippingAddressChange(e,t){if(!this.req.hasEventListener(Xr.AFTERPAY_SHIPPING_ADDRESS_CHANGED))return this.emitTokenizationResult(void 0,new sn("PaymentRequest",Xr.AFTERPAY_SHIPPING_ADDRESS_CHANGED)),t.reject(Vd.SERVICE_UNAVAILABLE),void this.afterpayLibrary.close();var r=this.req;this.metricsHandler.logEvent(so.ShippingAddressChangeOK),this.req.dispatchEvent(Xr.AFTERPAY_SHIPPING_ADDRESS_CHANGED,{contactOrOption:Ch(e)},(e=>{if(e.error)t.reject(Vd.SHIPPING_ADDRESS_UNSUPPORTED);else if(e.shippingErrors)t.reject(Vd.SHIPPING_ADDRESS_UNRECOGNIZED);else{var n=Ah(e,r);t.resolve(n)}}))}emitTokenizationResult(e,t){0===this.onTokenizeCallbacks.length?this.tokenizationBuffer.push({result:e,error:t}):this.onTokenizeCallbacks.forEach((r=>{r(e,t)}))}buildInstantWalletTokenPayload(e,t){return{paymentMethodTrackingID:this.context.getPaymentMethodTrackingId(),analyticsToken:this.session.analyticsToken,afterpayData:{afterpayToken:e,buyerAmount:t},clientID:this.session.applicationId,locationID:this.locationID,sessionID:this.session.sessionId,websdkVersion:d.VERSION,websiteURL:this.session.sourceUrl,requestBillingContact:this.req.requestBillingContact,requestShippingContact:this.req.requestShippingContact}}buildCheckoutPayload(){var e,t={applicationID:this.session.applicationId,discounts:[],locationID:this.locationID,popupOriginUrl:this.session.sourceUrl,amount:Sh(this.req)};if(this.req.lineItems&&(t.items=yh(this.req.lineItems,this.req.currencyCode)),this.req.discounts&&(t.discounts=Eh(this.req.discounts,this.req.currencyCode)),this.req.requestShippingContact?e=this.req.shippingContact:this.req.pickupContact&&(e=this.req.pickupContact),void 0!==e){var r=Th(e);if(!r.isValid)throw new fn(r.missingFields);t.shipping=_h(e)}return t}totalMoney(){return{amount:Ni.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode),currency:this.req.currencyCode}}openPaymentModal(){var e=this;return Uh((function*(){e.afterpayLibrary.open();var t=yield new Promise(((t,r)=>{e.commenceCheckout({resolve:t,reject:r})}));e.afterpayLibrary.transfer(Object.assign({token:t},e.transferOptions))}))()}initializeAfterpayPopup(e){var t=this.commenceCheckout.bind(this),r=this.completeCheckout.bind(this),n=document.createElement("div");n.id="sq-afterpay-dummy-element-".concat(aa()),n.style.visibility="hidden",e.appendChild(n),this.transferOptions={buyNow:this.buyNowOption,shippingOptionRequired:this.req.requestShippingContact},this.req.requestShippingContact||this.req.pickupContact||(this.transferOptions.addressMode="NO_ADDRESS");var i,o,s={countryCode:this.req.countryCode,onCommenceCheckout:(o=Uh((function*(e){yield t(e)})),function(e){return o.apply(this,arguments)}),onComplete:(i=Uh((function*(e){var{data:t}=e;yield r(t)})),function(e){return i.apply(this,arguments)}),target:"#".concat(n.id),shippingOptionRequired:this.req.requestShippingContact,addressMode:this.transferOptions.addressMode};this.req.requestShippingContact?(s.onShippingAddressChange=this.onShippingAddressChange.bind(this),s.onShippingOptionChange=this.onShippingOptionChange.bind(this)):this.req.pickupContact&&(this.transferOptions.pickup=!0),this.afterpayLibrary.initializeForPopup(s),e.removeChild(n)}detachElement(e,t){this.afterpayLibrary.close(),this.element&&(this.element.innerHTML=""),this.element=null,this.tokenizationBuffer=[],this.onTokenizeCallbacks=[],this.status=e,this.metricsHandler.logEvent(t)}}var qh,Fh,Vh=function(e){var t="b8a38183b2e5959390488e48f9b109f6a73fd53c",r="https://portal.sandbox.afterpay.com/afterpay.js?merchant_key=".concat(t);return d.env===s.staging&&(r="https://portal.stage.afterpay-beta.com/afterpay.js?merchant_key=".concat(t)),d.env!==s.production||e.isTestMerchant||(r="https://portal.afterpay.com/afterpay.js?merchant_key=".concat(t)),Promise.all([ks.load("afterpay",{src:r},"AfterPay"),ks.load("afterpay-messaging",{src:"https://js.afterpay.com/afterpay-1.x.js"},"Afterpay")])};!function(e){e.CUSTOMER_INTERACTION="CUSTOMER_INTERACTION",e.CUSTOMER_DISMISSED="CUSTOMER_DISMISSED",e.CUSTOMER_REQUEST_APPROVED="CUSTOMER_REQUEST_APPROVED",e.CUSTOMER_REQUEST_DECLINED="CUSTOMER_REQUEST_DECLINED",e.CUSTOMER_REQUEST_FAILED="CUSTOMER_REQUEST_FAILED"}(qh||(qh={})),function(e){e.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN="REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN"}(Fh||(Fh={}));class zh extends en{constructor(){super("A grant was not returned from CashApp and is required for tokenization"),this.name="CashAppPayGrantIsUndefinedError",Object.setPrototypeOf(this,zh.prototype)}}function Yh(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function $h(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Yh(o,n,i,s,a,"next",e)}function a(e){Yh(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Kh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kh(Object(r),!0).forEach((function(t){Qh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qh(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Zh=new Set(["USD"]),Jh="cash_app_pay_v1_element";class Xh extends ua{constructor(e,t,r,n,i){if(super(n),this.methodType=ii.CASH_APP_PAY,this.wasFirstInteractionCalled=!1,this.isMobile=!1,this.CashAppPayInstance=e,this.req=t,this.context=n,this.paymentRequestLockController=i,this.paymentMessenger=new pa(this.context),this.tokenizeValidator=function(){return Promise.resolve(!0)},this.clickEventHandler=()=>{this.beginAuthorizationFlow()},!this.session.locationId)throw new Rn(ea,"locationId");if(!this.session.cashAppPayMerchantIdentifier)throw new Rn(ea,"merchantId");if(!Zh.has(this.req.currencyCode))throw new Cn("".concat(this.req.currencyCode," is not supported by CashAppPay. Valid currencies are: ").concat([...Zh].join(", ")));var o=Ni.paymentRequestAmountToMoneyAmount(this.req.total.amount,this.req.currencyCode);if(o<1)throw new Cn("".concat(this.req.total.amount," is an invalid payment amount. Total amount should be greater than 0"));if(!r.redirectURL)throw new In;var s=Wh({actions:{payment:{amount:{currency:this.req.currencyCode,value:o},scopeId:this.session.cashAppPayMerchantIdentifier}}},r);e.customerRequest(s).catch((e=>{this.errorLogger.captureException(e),this.customerRequestFailedEvent()})),this.cashAppEventHandler={[qh.CUSTOMER_INTERACTION]:e=>this.registerExternalEventStart(e),[qh.CUSTOMER_DISMISSED]:()=>{this.dispatchEvent("customerDismissed",null)},[qh.CUSTOMER_REQUEST_APPROVED]:e=>this.customerRequestApprovedEvent(e),[qh.CUSTOMER_REQUEST_DECLINED]:()=>this.customerRequestDeclinedEvent(),[qh.CUSTOMER_REQUEST_FAILED]:()=>this.customerRequestFailedEvent()},Object.keys(qh).forEach((e=>this.CashAppPayInstance.addEventListener(e,this.cashAppEventHandler[e]))),this.paymentRequestLockController.lock(this)}attach(e,t,r){var n=this;return $h((function*(){n.throwIfDestroyedOrAlreadyAttached();var i=t,o=!1===i;i&&i.values&&(i.theme||(i.theme=i.values));var s=function(e){if(void 0===e||!1===e)return{isValid:!0,missingFields:[]};var t={};return Object.keys(e).forEach((function(e){Vo.has(e)&&(t[e]="string")})),Dl(e,t)}(i);if(!s.isValid)throw new Sn(s.missingFields);var a=function(e){var t=[],r=!0;if(void 0===e||!1===e)return{isValid:r,missingFields:t};var n={shape:rs,size:ts,theme:ns,width:is},i=JSON.parse(cs(e));return Object.entries(i).forEach((function(e){var[i,o]=e;o===ko&&(r=!1,t.push([i,[...n[i]].join(",")]))})),{isValid:r,missingFields:t}}(i);if(!a.isValid)throw new An(a.missingFields);if(r&&(n.tokenizeValidator=r),"function"!=typeof n.tokenizeValidator)throw new On;n.metricsHandler.logEvent(oo.AttachStart),i&&n.metricsHandler.logEvent(ao.Configured,i),n.status=sa.ATTACHED,n.element=o?pc(e):hc(e);try{var c=document.createElement("div");c.id=Jh,o?n.element.before(c):n.element.appendChild(c);var u="#".concat(Jh);n.renderController=yield n.CashAppPayInstance.render(u,{button:i,manage:!1}),n.element.addEventListener("click",n.clickEventHandler),n.metricsHandler.logEvent(oo.AttachOK)}catch(e){throw n.metricsHandler.logEvent(oo.AttachError),n.status===sa.ATTACHED&&(n.status=sa.DETACHED),e}}))()}destroy(){return this.status===sa.DESTROYED?Promise.resolve(!1):(this.detachElement(sa.DESTROYED,ao.Destroyed),this.paymentRequestLockController.unlock(this),this.CashAppPayInstance.restart(),Object.keys(qh).forEach((e=>this.CashAppPayInstance.removeEventListener(e,this.cashAppEventHandler[e]))),Promise.resolve(!0))}detach(){return this.throwIfDestroyedOrNotAttached(),this.detachElement(sa.DETACHED,ao.Detached),Promise.resolve(!0)}addEventListener(e,t){this.metricsHandler.logEvent(ao.EventListenerAdded,e),super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}customerRequestApprovedEvent(e){var t=this;return $h((function*(){var r=yield t.createNonce(e);t.dispatchEvent("ontokenization",{tokenResult:r})}))()}customerRequestDeclinedEvent(){var e={status:si.CANCEL};this.metricsHandler.logEvent(so.ExternalSessionCancel),this.dispatchEvent("ontokenization",{tokenResult:e})}customerRequestFailedEvent(){var e={status:si.ERROR,errors:[new Fn("tokenizing Cash App Pay")]};this.metricsHandler.logEvent(so.ExternalSessionError),this.dispatchEvent("ontokenization",{tokenResult:e})}createNonce(e){var t=this;return $h((function*(){var{customerProfile:r,grants:n,referenceId:i}=e,o=r.cashtag,s=n.payment,a=t.req.total.amount,c=t.req.currencyCode;try{if(!s)throw new zh;yield t.context.refreshWithCurrentAnalyticsToken();var u=yield t.paymentMessenger.request(Fh.REQUEST_CASH_APP_PAY_INSTANT_WALLET_TOKEN,{paymentMethodTrackingID:t.context.getPaymentMethodTrackingId(),analyticsToken:t.session.analyticsToken,clientID:t.session.applicationId,locationID:t.session.locationId,sessionID:t.session.sessionId,websdkVersion:d.VERSION,websiteURL:t.session.sourceUrl,requestBillingContact:t.req.requestBillingContact,requestShippingContact:t.req.requestShippingContact,applicationId:t.session.applicationId,cashAppPayData:{referenceId:i,grantId:s.grantId,cashtag:o,totalAmount:{amount:a,currency:c},isMobile:t.isMobile}});return t.context.updateSession(u.sessionID),t.metricsHandler.logEvent(so.ExternalSessionOK),{details:{cashAppPay:{cashtag:o,referenceId:i},method:ii.CASH_APP_PAY},status:si.OK,token:u.token}}catch(e){var l=e;return t.metricsHandler.logEvent(so.ExternalSessionError),Ni.isInstanceOf(e,[qn])||(t.errorLogger.captureException(e),l=new Fn("tokenizing CashAppPay")),{status:si.ERROR,errors:[l]}}}))()}beginAuthorizationFlow(){var e=this;return $h((function*(){if(e.throwIfDestroyedOrNotAttached(),!e.renderController)throw new Fn("Could not begin Cash App Pay authorization flow");e.metricsHandler.logEvent(oo.CashAppPayClickValidating);try{(yield e.tokenizeValidator())?(e.renderController.begin(),e.metricsHandler.logEvent(oo.CashAppPayAuthStart)):e.metricsHandler.logEvent(oo.CashAppPayClickInvalid)}catch(t){throw e.metricsHandler.logEvent(oo.CashAppPayClickError),t}}))()}registerExternalEventStart(e){this.metricsHandler.logEvent(so.ExternalSessionStart),this.wasFirstInteractionCalled||(this.wasFirstInteractionCalled=!0,this.metricsHandler.logEvent(oo.FirstInteraction)),this.isMobile=e.isMobile,this.dispatchEvent("customerInteraction",Wh({},e))}detachElement(e,t){this.renderController&&this.renderController.destroy();var r=document.getElementById(Jh);r&&r.remove(),this.element&&this.element.removeEventListener("click",this.clickEventHandler),this.status=e,this.metricsHandler.logEvent(t)}}function ep(){return(ep=$h((function*(e){var t,r="https://sandbox.kit.cash.app/v1/pay.js";d.env!==s.production||e.isTestMerchant||(r="https://kit.cash.app/v1/pay.js");try{t=yield ks.load("cash-app-pay",{src:r},"CashApp")}catch(t){throw e.errorLogger.captureException(t),t}var n="CAS-CI_SQ_SELLER_STAGING";return d.env===s.sandbox||d.env===s.production&&e.isTestMerchant?n="CAS-CI_SQ_SELLER_SANDBOX":d.env===s.production&&(n="CA-CI_SQ_SELLER"),t.pay({clientId:n})}))).apply(this,arguments)}var tp={initialize:function(e){return ep.apply(this,arguments)}},rp=function(e,t,r,n,i){return new Gh(e,t,r,n,i)},np=function(e,t,r){return new lh(e,t,r)},ip=function(e,t,r,n,i){return new Xh(e,t,r,n,i)},op=function(e,t,r,n,i){return new yd(e,t,r,n,i)};function sp(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}var ap={build(e){var t,r,n;function i(){t=e.generateFreshToken().catch((t=>(e.captureException(t),void 0!==r&&(clearInterval(r),r=void 0),n)))}function o(){var e;return e=function*(){return void 0===t?null:n=yield t},o=function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){sp(o,n,i,s,a,"next",e)}function a(e){sp(o,n,i,s,a,"throw",e)}s(void 0)}))},o.apply(this,arguments)}return Object.freeze({beginGenerateToken:i,retrieveCurrentToken:function(){return o.apply(this,arguments)},setupAutoRefresh:function(){void 0===r&&(r=setInterval((()=>{i()}),arguments.length>0&&void 0!==arguments[0]?arguments[0]:Bs))},verifyBuyer:function(t,r){return e.verifyBuyer(t,r)}})}};let cp,up;const lp=[],dp={};let hp,pp=e=>{lp.push(e)};const fp=()=>window.location.toString();function gp(e){if(e.origin!==up)return;const t=e.data;if("object"==typeof t&&"string"==typeof t.instanceId){const e=dp[t.instanceId];"function"==typeof e&&e(t)}}function mp(e){hp?.contentWindow&&hp.contentWindow.postMessage(e,up)}function vp(){let e;for(window.addEventListener("message",gp,!1);e=lp.shift();)mp(e);pp=mp}function yp(){hp=document.createElement("iframe"),hp.setAttribute("width","0"),hp.setAttribute("height","0"),hp.setAttribute("src",`${cp}/payments/data/frame.html?referer=${encodeURIComponent(fp())}`),hp.setAttribute("style","border: none !important; display: block !important; visibility: hidden !important"),hp.setAttribute("sandbox","allow-scripts allow-same-origin"),hp.addEventListener("load",vp),document.body.appendChild(hp)}const Ep=Boolean(window.document.documentElement.doScroll),_p={documentReady:()=>"loading"!==document.readyState,init(e,t){cp=e,up=t,void 0===hp&&(_p.documentReady()?yp():Ep?window.addEventListener("load",yp):document.addEventListener("DOMContentLoaded",yp))},listenFor(e,t){dp[e]=t},send(e){pp(e)}};var Sp,Ap,Cp=_p;!function(e){e.AUTHENTICATED="Y",e.AUTHENTICATION_ATTEMPTED="A",e.CHALLENGE_REQUIRED="C",e.DECOUPLED_CHALLENGE_REQUIRED="D",e.NOT_AUTHENTICATED="N",e.AUTHENTICATION_COULD_NOT_BE_PERFORMED="U",e.INFORMATIONAL_ONLY="I",e.REJECTED="R"}(Sp||(Sp={}));class Ip{constructor(e){this.iframeInputs=e,this.eventListenerReference=this.handleResponse.bind(this)}async handle(){const e=new Promise(((e,t)=>{this.threeDSPromiseResolve=e,this.threeDSPromiseReject=t}));return this.build(),this.submit(),e}build(){void 0!==this.iframeInputs.iframeSelector&&document.querySelector(this.iframeInputs.iframeSelector)?this.iframe=document.querySelector(this.iframeInputs.iframeSelector):this.buildDefault();const e=`${this.iframeInputs.baseID}-form`;if(document.getElementById(e))this.form=document.getElementById(e);else{this.form=document.createElement("form"),this.form.setAttribute("id",e),this.form.setAttribute("name",`${this.iframeInputs.baseName}Form`),this.form.setAttribute("method","POST"),this.form.setAttribute("action",this.iframeInputs.notificationURL),this.form.setAttribute("target",this.iframe.name);const t=document.createElement("input");t.setAttribute("name",this.iframeInputs.notificationData.name),t.setAttribute("value",this.iframeInputs.notificationData.data),t.setAttribute("type","hidden"),this.form.appendChild(t),document.body.appendChild(this.form)}window.addEventListener("message",this.eventListenerReference)}buildDefault(){const e=`${this.iframeInputs.baseID}-modal`;document.getElementById(e)?this.modal=document.getElementById(e):(this.modal=document.createElement("div"),this.modal.id=e,this.modal.classList.add("squareThreedsModal"),document.body.appendChild(this.modal));const t=`${this.iframeInputs.baseID}-iframe`,r=document.getElementById(t);r&&this.modal.contains(r)?this.iframe=document.getElementById(t):(this.iframe=document.createElement("iframe"),this.iframe.id=t,this.iframe.name=`${this.iframeInputs.baseName}Iframe`,this.iframe.setAttribute("frameBorder","0"),this.iframe.setAttribute("width",this.iframeInputs.width),this.iframe.setAttribute("height",this.iframeInputs.height),this.iframe.setAttribute("sandbox","allow-forms allow-scripts allow-same-origin allow-pointer-lock"),this.iframe.setAttribute("style","visibility: hidden"),this.iframe.setAttribute("allowpaymentrequest","false"),this.iframe.setAttribute("allowfullscreen","false"),this.iframe.setAttribute("allow","payment *;publickey-credentials-get *"),this.iframe.classList.add("square_threeds_iframe"),this.modal.appendChild(this.iframe))}handleResponse(e){const t=e.data;if("object"==typeof t&&t.type===this.iframeInputs.listenerMessageType){this.destroy();const e=this.iframeInputs.validateMessage(t);if(e.isValid)this.threeDSPromiseResolve(t);else{const r={message:e.message??`Square 3DS Iframe received event: ${JSON.stringify(t)}`,type:e.type??"THREEDS_IFRAME_INVALID_RESPONSE_MESSAGE"};this.threeDSPromiseReject(r)}}}submit(){this.form.isConnected?(this.form.submit(),void 0!==this.iframeInputs.onShow&&this.iframeInputs.onShow(this.iframe,this.modal),void 0!==this.iframeInputs.timeoutSeconds&&(this.timeoutID=window.setTimeout(this.timedOut.bind(this),1e3*this.iframeInputs.timeoutSeconds))):(this.destroy(),this.threeDSPromiseReject(this.iframeInputs.getErrorMessage("SQUARE_3DS_IFRAME_FORM_DISCONNECTED")))}timedOut(){this.destroy(),this.threeDSPromiseReject(this.iframeInputs.getErrorMessage("SQUARE_3DS_IFRAME_TIMEOUT"))}destroy(){void 0!==this.timeoutID&&window.clearTimeout(this.timeoutID),window.removeEventListener("message",this.eventListenerReference),void 0!==this.iframeInputs.onDestroy&&this.iframeInputs.onDestroy(this.iframe),this.form.isConnected&&this.form.remove(),void 0!==this.modal&&this.modal.isConnected&&(this.iframe.isConnected&&this.iframe.remove(),this.modal.remove())}}function Op(e){switch(e){case"SQUARE_3DS_IFRAME_TIMEOUT":return{message:"Three ds method timed out while waiting for a response.",type:"THREEDS_METHOD_TIMEOUT"};case"SQUARE_3DS_IFRAME_FORM_DISCONNECTED":return{message:"Form is no longer connected.",type:"THREEDS_METHOD_FORM_DISCONNECTED"};default:return{message:`Three ds method failed with unexpected error: ${e}`,type:"THREEDS_METHOD_FAILED"}}}class Tp{constructor(e){if(void 0===e.threeDsMethodUrl||void 0===e.threeDsMethodNotificationUrl)throw new Error(`Cannot complete 3DS method flow, one or more of threeDSMethodUrl and threeDSMethodNotificationUrl are undefined. Transaction data: ${JSON.stringify(e)}`);this.threeDsMethodUrl=e.threeDsMethodUrl,this.threeDSMethodData={threeDSMethodNotificationURL:e.threeDsMethodNotificationUrl,threeDSServerTransID:e.threeDSServerTransId},this.square3DSMethodIframe=new Ip({baseID:"sq-threeds-3ds-method",baseName:"3DSMethod",getErrorMessage:Op,height:"10",listenerMessageType:"threeDsMethodResponse",notificationData:{data:btoa(JSON.stringify(this.threeDSMethodData)),name:"threeDSMethodData"},notificationURL:this.threeDsMethodUrl,timeoutSeconds:11,validateMessage:this.validateMessage.bind(this),width:"10"})}async handle3DSMethod(){return this.square3DSMethodIframe.handle()}validateMessage(e){return e.threeDsServerTransId===this.threeDSMethodData.threeDSServerTransID?{isValid:!0}:{isValid:!1,message:`Received 3DS method response with transaction ID ${e.threeDsServerTransId}, expected ${this.threeDSMethodData.threeDSServerTransID}`,type:"THREEDS_METHOD_INCORRECT_TRANSACTION_ID"}}}!function(e){e.COMPLETED="COMPLETED",e.ERROR="ERROR"}(Ap||(Ap={}));class bp{constructor(){this.userChallenged=!1}async execute3dsAuthentication(e,t){this.configuration=e,this.threeDsTransactionData=t,await this.handle3DSMethodFlow();try{const e=await this.authenticate();this.handleAuthenticateResponse(e)}catch(e){this.handleError(e)}}async handle3DSMethodFlow(){if(void 0!==this.threeDsTransactionData?.threeDsMethodUrl)try{const e=new Tp(this.threeDsTransactionData);await e.handle3DSMethod()}catch(e){console.error("3DS method flow failed.",{error:e})}}authenticate(){const e={browser_info:{color_depth:window.screen.colorDepth,java_enabled:window.navigator.javaEnabled(),screen_height:window.innerHeight,screen_width:window.innerWidth},client_id:"",token:this.threeDsTransactionData.verificationToken};return this.configuration.callbacks.postAuthenticate(e)}handleAuthenticateResponse(e){if(void 0===e.errors)if(e.three_ds_trans_status===Sp.CHALLENGE_REQUIRED)try{this.userChallenged=!0,this.configuration.callbacks.onComplete({status:Ap.COMPLETED,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:!0})}catch(e){this.handleError(e)}else this.configuration.callbacks.onComplete({status:Ap.COMPLETED,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged});else this.configuration.callbacks.onComplete({status:Ap.ERROR,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged})}handleError(e){this.configuration.callbacks.onComplete({status:Ap.ERROR,threeDsServerTransId:this.threeDsTransactionData.threeDSServerTransId,userChallenged:this.userChallenged})}}function wp(e,t,r){const n=new Error(void 0!==r?`${e}\nSee: ${r}`:e);return n.name=t,n}const Pp={message:"The verification was not successful",type:"VERIFICATION_NOT_SUCCESSFUL"},Rp={message:"A verification request is already in place",type:"VERIFICATION_IN_PROGRESS"},Np={message:"The time to complete the verification has expired",type:"VERIFICATION_TIMEOUT"},Dp={analyticsParametersRequiredError:function(){return wp("The Analytics library must be initialized with analyticsParameters to call verifyBuyer.","AnalyticsParametersRequiredError")},invalidArgumentError:function(e,t){return wp(`The Analytics '${e}' argument must be of type '${t}'`,"InvalidArgumentError")},invalidElementTypeError:function(e,t){return wp(`An element with selector ${e} must be of type '${t}'`,"InvalidElementTypeError")},invalidFunctionArgumentError:function(e,t,r){return wp(`The '${e}' function '${t}' argument must be of type '${r}'.`,"InvalidFunctionArgumentError")},invalidFunctionCallbackError:function(e,t){return wp(`The '${e}' '${t}' callback must be a function.`,"InvalidFunctionCallbackError")},missingArgumentError:function(e){return wp(`The Analytics '${e}' argument is required.`,"MissingArgumentError")},missingChargeVerificationArgumentError:function(e,t){return wp(`The '${e}' '${t}' is required when verificationDetails.intent is 'CHARGE'.`,"MissingChargeVerificationArgumentError")},missingElementAttributeError:function(e,t){return wp(`An element with selector '${e}' attribute '${t}' is required`,"MissingElementAttributeError")},missingElementError:function(e){return wp(`An element with selector '${e}' cannot be found.`,"MissingElementError")},missingFunctionArgumentError:function(e,t){return wp(`The '${e}' '${t}' argument is required.`,"MissingFunctionArgumentError")},missingFunctionCallbackError:function(e,t){return wp(`The '${e}' '${t}' callback is required.`,"MissingFunctionCallbackError")},outOfRangeArgumentError:function(e,t,r,n,i=!1){return wp(`The '${e}' function '${t}' argument must be within range: ${r} and ${n} (${(i?"inclusive":"exclusive")+" of upper limit"}).`,"OutOfRangeArgumentError")}};class Lp{constructor(e,t,r){this.callback=e,this.onError=r,this.called=!1,this.callback=e,this.timeout=window.setTimeout((()=>this.timedOut()),t),this.onError=r}invoke(...e){this.called?this.callback(...this.onError):(clearTimeout(this.timeout),this.called=!0,this.callback(...e))}timedOut(){this.invoke(...this.onError)}}class xp{constructor(e,t,r){this.instanceId=e,this.applicationId=t,this.analyticsParameters=r,this.instanceId=e,this.applicationId=t,this.analyticsParameters=r,this.challengeUpdatesQueue=[],this.verificationUpdatePending=!1,this.userChallenged=!1,(()=>{this.pendingVerifyBuyerCall&&this.verifyBuyer(this.pendingVerifyBuyerCall.verificationId,this.pendingVerifyBuyerCall.source,this.pendingVerifyBuyerCall.details,this.pendingVerifyBuyerCall.callback,this.pendingVerifyBuyerCall.verifyBuyerCustomElement)})()}verifyBuyer(e,t,r,n,i){void 0===this.verifyBuyerCallback?(this.squareThreeds=new bp,this.verifyBuyerCallback=new Lp(((e,t)=>{n(e,t),delete this.verifyBuyerCallback}),9e5,[Np]),this.getVerification(e,t,r)):n(Rp,null)}updateVerification(e,t){const r=t.some((e=>{if("SQUARE_THREEDS"===e.type){const t=e.square_threeds_verification?.status;return function(e){return"CANCELED"===e||"REJECTED"===e||"AUTHENTICATED"===e||"COMPLETED"===e}(t)||"ERROR"===t}return!1})),n={challengeUpdates:t,token:this.token},i={analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,data:n,instanceId:this.instanceId,type:"requestVerificationUpdate",verificationId:e,version:2};!this.verificationUpdatePending||r?(Cp.send(i),this.verificationUpdatePending=!r):this.challengeUpdatesQueue.push(t)}handleThreeDsAuthenticate(e,t){"type"in t&&"message"in t?this.threeDsAuthenticatePromiseReject(t):this.threeDsAuthenticatePromiseResolve(t)}handleChallenges(e,t){if(void 0===this.verifyBuyerCallback)return;const r=this.challengeUpdatesQueue.shift();if(void 0!==r?this.updateVerification(e,r):this.verificationUpdatePending=!1,"type"in t&&"message"in t)return void this.verifyBuyerCallback.invoke(t,null);this.token=t.token;const n={token:this.token,userChallenged:this.userChallenged};switch(t.status){case"COMPLETED":this.verifyBuyerCallback.invoke(null,n);break;case"CANCELED":this.verifyBuyerCallback.invoke({...Pp,token:t.token},null);break;case"PENDING":for(const r of t.challenges)if("SQUARE_THREEDS"===r.type){if(this.squareThreedsConfiguration={callbacks:{onComplete:t=>{this.handleSquareThreeDsComplete(t,e)},postAuthenticate:t=>this.handlePostAuthenticate(t,e)}},!this.isValidSquareThreeDsChallenge(r))return;this.squareThreeDsTransactionData={directoryServerId:r.square_three_ds_verification.directory_server_id,messageVersion:r.square_three_ds_verification.message_version,threeDSServerTransId:r.square_three_ds_verification.three_ds_server_transaction_id,threeDsMethodNotificationUrl:r.square_three_ds_verification?.three_ds_method_notification_url,threeDsMethodUrl:r.square_three_ds_verification?.three_ds_method_url,verificationId:e,verificationToken:this.token},this.squareThreeds.execute3dsAuthentication(this.squareThreedsConfiguration,this.squareThreeDsTransactionData)}break;default:console.log(`Unknown status: ${t.status}`)}}isValidSquareThreeDsChallenge(e){return void 0!==e.square_three_ds_verification?.three_ds_server_transaction_id}getVerification(e,t,r){const n={analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,data:{source:t,verificationDetails:r},instanceId:this.instanceId,type:"requestVerification",verificationId:e,version:2};Cp.send(n)}handleSquareThreeDsComplete(e,t){this.userChallenged=e.userChallenged;const r={square_threeds_verification:{directory_server_id:this.squareThreeDsTransactionData.directoryServerId,message_version:this.squareThreeDsTransactionData.messageVersion,status:e.status===Ap.COMPLETED?Ap.COMPLETED:Ap.ERROR,three_ds_server_transaction_id:e.threeDsServerTransId},type:"SQUARE_THREEDS"};this.updateVerification(t,[r])}handlePostAuthenticate(e,t){const r=new Promise(((e,t)=>{this.threeDsAuthenticatePromiseResolve=e,this.threeDsAuthenticatePromiseReject=t}));return Cp.send({analyticsParameters:this.analyticsParameters,applicationId:this.applicationId,data:{...e,client_id:this.applicationId},instanceId:this.instanceId,type:"requestThreeDsAuthenticate",verificationId:t,version:3}),r}}const kp=1e5;function Mp(e,t){return e?"function"!=typeof e?Dp.invalidFunctionCallbackError("IframeCustomElement",t):void 0:Dp.missingFunctionCallbackError("IframeCustomElement",t)}class Up{constructor(e,t){this.applicationId=e,this.instanceId=`sq-analytics-${(new Date).getMilliseconds()}-${Math.random()*kp}`,Cp.listenFor(this.instanceId,this.messageReceived.bind(this)),t&&(this.verifier=new xp(this.instanceId,this.applicationId,t),this.analyticsParameters=t)}getToken(e){if(void 0!==this.tokenCallback)return;this.tokenCallback=e;const t={applicationId:this.applicationId,instanceId:this.instanceId,type:"requestToken",version:1};Cp.send(t)}verifyBuyer(e,t,r,n){const i=t,o=function(e,t,r,n,i){const o="verifyBuyer";if(!e)return Dp.analyticsParametersRequiredError();if(void 0===t)return Dp.missingFunctionArgumentError(o,"source");if("string"!=typeof t)return Dp.invalidFunctionArgumentError(o,"source","string");if(!r)return Dp.missingFunctionArgumentError(o,"verificationDetails");if("object"!=typeof r)return Dp.invalidFunctionArgumentError(o,"verificationDetails","object");const s=function(e,t){const r="verificationDetails";if("object"!=typeof t.billingContact)return Dp.invalidFunctionArgumentError(e,`${r}.billingContact`,"object");const{customScore:n}=t;if(void 0!==n){if("number"!=typeof n||Number.isNaN(n))return Dp.invalidFunctionArgumentError(e,`${r}.customScore`,"integer");if(n<0||n>1e3)return Dp.outOfRangeArgumentError(e,`${r}.customScore`,0,1e3,!0)}if("string"!=typeof t.intent)return Dp.invalidFunctionArgumentError(e,`${r}.intent`,"string");if("CHARGE"===t.intent||"CHARGE_AND_STORE"===t.intent){if(!t.currencyCode)return Dp.missingChargeVerificationArgumentError(e,`${r}.currencyCode`);if("string"!=typeof t.currencyCode)return Dp.invalidFunctionArgumentError(e,`${r}.currencyCode`,"string");if(!t.amount)return Dp.missingChargeVerificationArgumentError(e,`${r}.amount`);if("string"!=typeof t.amount)return Dp.invalidFunctionArgumentError(e,`${r}.amount`,"string")}}(o,r);if(s)return s;if(!n)return Dp.missingFunctionCallbackError(o,"verifyBuyerCallback");if("function"!=typeof n)return Dp.invalidFunctionCallbackError(o,"verifyBuyerCallback");if(void 0!==i){const e=function(e){if("string"!=typeof e)return Dp.invalidArgumentError("iframeElementSelector","string");const t=document.querySelector(e);return null===t?Dp.missingElementError(e):null===t.getAttribute("name")?Dp.missingElementAttributeError(e,"name"):"iframe"!==t.tagName.toLowerCase()||null===t.contentDocument&&null===t.contentWindow?Dp.invalidElementTypeError(e,"IFrameElement"):void 0}(i.elementSelector);if(e)return e;const t=Mp(i.challengeDisplayedCallback,"elementVisibleCallback");if(t)return t;const r=Mp(i.challengeHiddenCallback,"elementRemovedCallback");if(r)return r}}(this.analyticsParameters,e,i,r,n);if(o)throw o;const s=`verify-buyer-${(new Date).getMilliseconds()}-${Math.random()*kp}`;this.verifier?.verifyBuyer(s,e,i,((e,t)=>{r(e,t)}),n)}messageReceived(e){"receiveToken"===e.type&&"function"==typeof this.tokenCallback?(this.tokenCallback(e.token),delete this.tokenCallback):"receiveVerification"!==e.type&&"receiveVerificationUpdate"!==e.type||this.verifier?.handleChallenges(e.verificationId,e.response)}}const Hp=(e,t)=>new Up(e,t);class jp{constructor(e,t,r){this.verifyCounter=0,this.applicationId=e,this.locationId=t,this.debugLogger=r,this.verifyCounter=0}generateFreshToken(){this.debugLogger.debug("*** generating token by calling analytics client package");var e=this.locationId?Hp(this.applicationId,{locationId:this.locationId}):Hp(this.applicationId);return this.getTokenPromise(e)}verifyBuyer(e,t){this.debugLogger.debug("*** running verifyBuyer with token ".concat(e," and details ").concat(JSON.stringify(t))),++this.verifyCounter;var r="verify:".concat(e,":").concat(this.verifyCounter);return this.debugLogger.debug("*** verifyBuyer result ".concat(r)),Promise.resolve({token:r,userChallenged:!1})}captureException(e){this.debugLogger.error(e)}getTokenPromise(e){return new Promise((t=>{e.getToken(t)}))}}function Bp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bp(Object(r),!0).forEach((function(t){qp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qp(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Fp(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function Vp(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Fp(o,n,i,s,a,"next",e)}function a(e){Fp(o,n,i,s,a,"throw",e)}s(void 0)}))}}class zp{constructor(e,t,r,n){this.applicationId=t,this.locationId=r,this.debugLogger=n,this.errorLogger=e,this.numGenerateCalls=0,this.activeTokenPromise=null}generateFreshToken(){var e=this;return Vp((function*(){e.numGenerateCalls+=1;var t=e.numGenerateCalls;e.debugLogger.debug("spawning generate ".concat(t));var r=yield e.getAnalyticsLibrary();e.debugLogger.debug("done with getting library ".concat(t));var n=yield e.getTokenPromise(r);return e.debugLogger.debug("done with getToken ".concat(t)),e.activeTokenPromise=null,n}))()}verifyBuyer(e,t){var r=this;return Vp((function*(){var n=yield r.getAnalyticsLibrary(),i=Gp(Gp({},t),{},{billingContact:qs(t.billingContact)});return r.verifyBuyerPromise(n,e,i)}))()}captureException(e){e instanceof Un&&this.errorLogger.captureException(e)}getAnalyticsLibrary(){var e=this;return Vp((function*(){if(e.library)return e.debugLogger.debug("Reusing analytics library"),e.library;e.debugLogger.debug("Loading analytics library");var t=yield ks.load("analytics-link",{src:d.ANALYTICS_PUBLIC_ENDPOINT,crossorigin:"anonymous"},"Square","Analytics");return e.debugLogger.debug("Instantiating analytics library"),e.library=new t(e.applicationId,{locationId:e.locationId}),e.library}))()}getTokenPromise(e){return this.activeTokenPromise?this.debugLogger.debug("Reusing existing library.getToken call"):(this.debugLogger.debug("Calling library.getToken"),this.activeTokenPromise=new Promise((t=>{e.getToken((e=>{this.debugLogger.debug("Resolving callback from library.getToken"),t(e)}))}))),this.activeTokenPromise}verifyBuyerPromise(e,t,r){return new Promise(((n,i)=>{e.verifyBuyer(t,r,((e,t)=>{e?i(e):null!==t?n(t):i(new Fn("Received null verifyBuyer details without an error object"))}))}))}}function Yp(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(e){return void r(e)}a.done?t(c):Promise.resolve(c).then(n,i)}function $p(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){Yp(o,n,i,s,a,"next",e)}function a(e){Yp(o,n,i,s,a,"throw",e)}s(void 0)}))}}function Kp(e,t){var{paymentMethodSupportDetail:r,metricsHandler:n}=t,i=t.getSession();if(!i.locationId||0===i.locationId.length)throw new Rn(ea,"locationId");if(r&&r[e]&&!r[e].IsSupported){var{UnsupportedReasonType:o}=r[e],s=ta;throw o&&o in Qs&&(s=ra[o]),n.logEvent(oo.BuildError),new Rn(s)}}function Wp(e,t){if(!(e instanceof Jl))throw t.metricsHandler.logEvent(oo.BuildError),new fn([["paymentRequest","PaymentRequest"]])}class Qp{constructor(e,t,r){this.localeStrings=new xo(navigator.language),this.paymentOptions=e,this.metrics=t,this.errorLogger=r,this.paymentRequestLockMap=new WeakMap}overrideStrings(e){var t=this;return $p((function*(){try{var r=yield t.getPaymentContext(fo.App);if(!r.featureFlagHandler.isActive(Ti.CanUseOverrideStrings))throw new bn("overrideStrings");r.metricsHandler.logEvent(ao.OverrideStrings,e),r.setTranslationOverrides(e)}catch(e){if(io(e))throw t.errorLogger.captureException(e),new Fn("overriding the strings");throw e}}))()}setLocale(e){var t=this;return $p((function*(){try{var r=yield t.getPaymentContext(fo.App);return r.metricsHandler.logEvent(ao.SetLocale,e),r.setLocale(e)}catch(e){if(io(e))throw t.errorLogger.captureException(e),new Fn("setting the locale");throw e}}))()}verifyBuyer(e,t){var r=this;return $p((function*(){var n=[];if(r.paymentOptions.locationId&&0!==r.paymentOptions.locationId.length||n.push(new na("verifyBuyer","locationId","string")),e&&"string"==typeof e&&0!==e.length||n.push(new na("verifyBuyer","source","string")),t&&"object"==typeof t?n.push(...Hd.validateVerificationDetails(t,"verifyBuyer")):n.push(new na("verifyBuyer","details","object")),n.length>0)throw new ia(n);var i=yield r.getPaymentContext(fo.App,!1);try{var o;if(i.metricsHandler.logEvent(oo.VerificationStart),i.getFeatureFlagValues()[Ti.AnalyticsBackend]===Pi.ScriptLoadLegacy){var s=yield Vs.analyticsLibrary({applicationId:r.paymentOptions.applicationId,locationId:r.paymentOptions.locationId});o=yield Vs.verifyBuyer(s,e,t)}else o=yield i.analyticsManager.verifyBuyer(e,t);return i.metricsHandler.logEvent(oo.VerificationOK),o}catch(e){if(i.metricsHandler.logEvent(oo.VerificationError),e instanceof Un)throw r.errorLogger.captureException(e),e;throw new hn(e)}}))()}card(e){var t=this;return $p((function*(){var r=yield t.getPaymentContext(fo.Card);r.metricsHandler.logEvent(oo.BuildStart);try{var n=new Zu(r,e);return r.metricsHandler.logEvent(oo.BuildOK),n}catch(e){throw r.metricsHandler.logEvent(oo.BuildError),e}}))()}paymentRequest(e){var t=new Cd,r=new Jl(e,this.localeStrings,t);return this.paymentRequestLockMap.set(r,t),this.getPaymentContext(fo.PaymentRequest).then((t=>{var{metricsHandler:n}=t;r.setMetricsHandler(n),n.logEvent(ao.Configured,e)})),r}googlePay(e){var t=this;return $p((function*(){var r=yield t.getPaymentContext(fo.GooglePay);r.metricsHandler.logEvent(oo.BuildStart),Kp(Es.GOOGLE_PAY,r),function(e){if("undefined"==typeof ShadowRoot)throw e.metricsHandler.logEvent(oo.BuildError),new Rn(Xs)}(r),Wp(e,r);try{var n=t.getPaymentRequestLock(e),[i,o]=yield Ad(r),s=op(i,e,r,o,n);return r.metricsHandler.logEvent(oo.BuildOK),s}catch(e){throw r.metricsHandler.logEvent(oo.BuildError),e}}))()}applePay(e){var t=this;return $p((function*(){var r=yield t.getPaymentContext(fo.ApplePay);r.metricsHandler.logEvent(oo.BuildStart),Kp(Es.APPLE_PAY,r),Wp(e,r);try{var n=t.getPaymentRequestLock(e),i=np(e,r,n);return r.metricsHandler.logEvent(oo.BuildOK),i}catch(e){throw r.metricsHandler.logEvent(oo.BuildError),e}}))()}ach(e){var t=this;return $p((function*(){var r=yield t.getPaymentContext(fo.Ach);r.metricsHandler.logEvent(oo.BuildStart),Kp(Es.ACH,r);try{var n=new Ja(r,e);return yield n.initialize(),r.metricsHandler.logEvent(oo.BuildOK),n}catch(e){throw r.metricsHandler.logEvent(oo.BuildError),e}}))()}cashApp(e){var t=this;return $p((function*(){var r=yield t.getPaymentContext(fo.CashApp);r.metricsHandler.logEvent(oo.BuildStart),Kp(Es.CASH_APP,r);try{var n=new gl(r,e);return r.metricsHandler.logEvent(oo.BuildOK),n}catch(e){throw r.metricsHandler.logEvent(oo.BuildError),e}}))()}giftCard(e){var t=this;return $p((function*(){var r=yield t.getPaymentContext(fo.GiftCard);r.metricsHandler.logEvent(oo.BuildStart);try{var n=new Tl(r,e);return r.metricsHandler.logEvent(oo.BuildOK),n}catch(e){throw r.metricsHandler.logEvent(oo.BuildError),e}}))()}afterpayClearpay(e){var t=this;return $p((function*(){var r=yield t.getPaymentContext(fo.Afterpay);if(r.metricsHandler.logEvent(oo.BuildStart),!r.featureFlagHandler.isActive(Ti.CanUseBNPLA))throw r.metricsHandler.logEvent(oo.BuildError),new Mn;Kp(Es.AFTERPAY,r),Wp(e,r);try{var n=t.getPaymentRequestLock(e),[i,o]=yield Vh(r),s=rp(i,o,e,r,n);return yield s.internalSetCheckoutToken(),r.metricsHandler.logEvent(oo.BuildOK),s}catch(e){throw r.metricsHandler.logEvent(oo.BuildError),e}}))()}cashAppPay(e,t){var r=this;return $p((function*(){var n=yield r.getPaymentContext(fo.CashAppPayV1);n.metricsHandler.logEvent(oo.BuildStart),Kp(Es.CASH_APP_PAY_V1,n),Wp(e,n);try{var i=r.getPaymentRequestLock(e),o=yield tp.initialize(n),s=ip(o,e,t,n,i);return n.metricsHandler.logEvent(oo.BuildOK),s}catch(e){throw n.metricsHandler.logEvent(oo.BuildError),e}}))()}getPaymentContext(e){var t=arguments,r=this;return $p((function*(){var n=!(t.length>1&&void 0!==t[1])||t[1],{featureFlagValues:i,messenger:o,session:s,paymentMethodSupportDetail:a,isTestMerchant:c}=yield r.initializePaymentMethod();s.avt&&r.errorLogger.setAvt(s.avt),s.sessionId&&r.errorLogger.setSessionId(s.sessionId),s.instanceId&&r.errorLogger.setInstanceId(s.instanceId);var u=aa(),l=new ca(r.metrics,s,e,u),d=i[Ti.AnalyticsBackend];if(d===Pi.ScriptLoadLegacy&&r.setAnalytics(s),r.contextEventTarget||(r.contextEventTarget=new oa),void 0===r.analyticsManager){var h=function(e){return e[Ti.ClientLogLevel]===Ri.Debug?console:{debug(){},error(){}}}(i),p=new jp(s.applicationId,s.locationId,h);d===Pi.ScriptLoadBackend&&(p=new zp(r.errorLogger,s.applicationId,s.locationId,h)),r.analyticsManager=ap.build(p),d!==Pi.ScriptLoadLegacy&&r.analyticsManager.setupAutoRefresh(Bs)}var f=new Ws(r.errorLogger,o,l,s,a,r.localeStrings,r.contextEventTarget,i,c,r.analyticsManager);return n&&d!==Pi.ScriptLoadLegacy&&r.analyticsManager.beginGenerateToken(),r.errorLogger.setFeatureFlagHandler(f.featureFlagHandler),f}))()}initializePaymentMethod(){return this.initializePaymentParamPromise||(this.initializePaymentParamPromise=Hd.initializePayment(this.paymentOptions,this.metrics,this.errorLogger,this.localeStrings)),this.initializePaymentParamPromise}setAnalytics(e){if(!this.analyticsInterval){var t=this.analyticsInterval=window.setInterval((()=>{Hd.initializeAnalytics(e,this.errorLogger,t)}),Bs);Hd.initializeAnalytics(e,this.errorLogger,t)}}getPaymentRequestLock(e){var t=this.paymentRequestLockMap.get(e);if(!t){var r=new Fn("PaymentRequestLockMap entry does not exist. This should never happen.");throw this.errorLogger.captureException(r),r}return t}}function Zp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zp(Object(r),!0).forEach((function(t){Xp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Xp(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ef=d.ENABLE_ERROR_LOGGING,tf=d.env,rf=new Map;function nf(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="".concat(e,"-").concat(r);if(rf.has(n))return rf.get(n);if(!(t=c.windowLocation).hostname.endsWith("localhost")&&"https:"!==t.protocol)throw new Pn;if(!c.isSupported())throw new wn;!function(e){if(!function(e){return!(e.length<22||e.length>37)&&pi.test(e)&&!fi.test(e)}(e))throw new tn;var t=e.match(/^[\w-]{22}$/),r=e.startsWith("sq0idp-"),n=e.startsWith("sandbox-sq0idb"),i=e.startsWith("sq0ids-");if(!(t||r||n||i))throw new tn;if(r&&!mi())throw new rn(s.production,d.env);if(n&&!gi(s.sandbox))throw new rn(s.sandbox,d.env)}(e);var i=new ki({applicationId:e,applicationUrl:window.location.origin,enableErrorLogging:ef,environment:tf,sourceName:"web-payments-sdk-public",useGlobalHandlers:!1,version:d.VERSION}),o=c.windowLocation.hostname,a={applicationId:e,hostname:o,locationId:r,sourceUrl:c.windowLocation.origin},u=new As(i,{applicationId:e,hostname:o,locationId:r});u.logEvent({event:oo.LoadOK,eventSource:fo.App});var l=new Qp(a,u,i);return rf.set(n,l),l}window.Square?(window.Square.errors=window.Square.errors?Jp(Jp({},go),window.Square.errors):go,window.Square._buildWebSDKV1Payments=nf):window.Square={errors:go,_buildWebSDKV1Payments:nf,payments:nf}})()})();